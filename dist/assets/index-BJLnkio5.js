(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var $m={exports:{}},Ll={},Wm={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),t_=Symbol.for("react.portal"),n_=Symbol.for("react.fragment"),r_=Symbol.for("react.strict_mode"),s_=Symbol.for("react.profiler"),i_=Symbol.for("react.provider"),o_=Symbol.for("react.context"),a_=Symbol.for("react.forward_ref"),l_=Symbol.for("react.suspense"),u_=Symbol.for("react.memo"),c_=Symbol.for("react.lazy"),jf=Symbol.iterator;function d_(t){return t===null||typeof t!="object"?null:(t=jf&&t[jf]||t["@@iterator"],typeof t=="function"?t:null)}var Hm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qm=Object.assign,Qm={};function mi(t,e,n){this.props=t,this.context=e,this.refs=Qm,this.updater=n||Hm}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gm(){}Gm.prototype=mi.prototype;function Cd(t,e,n){this.props=t,this.context=e,this.refs=Qm,this.updater=n||Hm}var kd=Cd.prototype=new Gm;kd.constructor=Cd;qm(kd,mi.prototype);kd.isPureReactComponent=!0;var Mf=Array.isArray,Km=Object.prototype.hasOwnProperty,Rd={current:null},Ym={key:!0,ref:!0,__self:!0,__source:!0};function Xm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Km.call(e,r)&&!Ym.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Fo,type:t,key:i,ref:a,props:s,_owner:Rd.current}}function h_(t,e){return{$$typeof:Fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fo}function f_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lf=/\/+/g;function Eu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?f_(""+t.key):e.toString(36)}function Fa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fo:case t_:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Eu(a,0):r,Mf(s)?(n="",t!=null&&(n=t.replace(Lf,"$&/")+"/"),Fa(s,e,n,"",function(h){return h})):s!=null&&(Pd(s)&&(s=h_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Lf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Mf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Eu(i,l);a+=Fa(i,e,n,u,s)}else if(u=d_(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Eu(i,l++),a+=Fa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function va(t,e,n){if(t==null)return t;var r=[],s=0;return Fa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function p_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},za={transition:null},m_={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:za,ReactCurrentOwner:Rd};function Jm(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:va,forEach:function(t,e,n){va(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return va(t,function(){e++}),e},toArray:function(t){return va(t,function(e){return e})||[]},only:function(t){if(!Pd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=mi;de.Fragment=n_;de.Profiler=s_;de.PureComponent=Cd;de.StrictMode=r_;de.Suspense=l_;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m_;de.act=Jm;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Rd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Km.call(e,u)&&!Ym.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Fo,type:t.type,key:s,ref:i,props:r,_owner:a}};de.createContext=function(t){return t={$$typeof:o_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:i_,_context:t},t.Consumer=t};de.createElement=Xm;de.createFactory=function(t){var e=Xm.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:a_,render:t}};de.isValidElement=Pd;de.lazy=function(t){return{$$typeof:c_,_payload:{_status:-1,_result:t},_init:p_}};de.memo=function(t,e){return{$$typeof:u_,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=za.transition;za.transition={};try{t()}finally{za.transition=e}};de.unstable_act=Jm;de.useCallback=function(t,e){return Mt.current.useCallback(t,e)};de.useContext=function(t){return Mt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Mt.current.useEffect(t,e)};de.useId=function(){return Mt.current.useId()};de.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Mt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};de.useRef=function(t){return Mt.current.useRef(t)};de.useState=function(t){return Mt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Mt.current.useTransition()};de.version="18.3.1";Wm.exports=de;var V=Wm.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_=V,y_=Symbol.for("react.element"),v_=Symbol.for("react.fragment"),__=Object.prototype.hasOwnProperty,x_=g_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w_={key:!0,ref:!0,__self:!0,__source:!0};function Zm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)__.call(e,r)&&!w_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:y_,type:t,key:i,ref:a,props:s,_owner:x_.current}}Ll.Fragment=v_;Ll.jsx=Zm;Ll.jsxs=Zm;$m.exports=Ll;var d=$m.exports,eg={exports:{}},nn={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,F){var L=N.length;N.push(F);e:for(;0<L;){var $=L-1>>>1,X=N[$];if(0<s(X,F))N[$]=F,N[L]=X,L=$;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var F=N[0],L=N.pop();if(L!==F){N[0]=L;e:for(var $=0,X=N.length,re=X>>>1;$<re;){var Ce=2*($+1)-1,xe=N[Ce],he=Ce+1,ce=N[he];if(0>s(xe,L))he<X&&0>s(ce,xe)?(N[$]=ce,N[he]=L,$=he):(N[$]=xe,N[Ce]=L,$=Ce);else if(he<X&&0>s(ce,L))N[$]=ce,N[he]=L,$=he;else break e}}return F}function s(N,F){var L=N.sortIndex-F.sortIndex;return L!==0?L:N.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,m=null,g=3,x=!1,A=!1,P=!1,M=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(N){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=N)r(h),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(h)}}function j(N){if(P=!1,R(N),!A)if(n(u)!==null)A=!0,ae(B);else{var F=n(h);F!==null&&q(j,F.startTime-N)}}function B(N,F){A=!1,P&&(P=!1,C(v),v=-1),x=!0;var L=g;try{for(R(F),m=n(u);m!==null&&(!(m.expirationTime>F)||N&&!_());){var $=m.callback;if(typeof $=="function"){m.callback=null,g=m.priorityLevel;var X=$(m.expirationTime<=F);F=t.unstable_now(),typeof X=="function"?m.callback=X:m===n(u)&&r(u),R(F)}else r(u);m=n(u)}if(m!==null)var re=!0;else{var Ce=n(h);Ce!==null&&q(j,Ce.startTime-F),re=!1}return re}finally{m=null,g=L,x=!1}}var z=!1,w=null,v=-1,S=5,E=-1;function _(){return!(t.unstable_now()-E<S)}function k(){if(w!==null){var N=t.unstable_now();E=N;var F=!0;try{F=w(!0,N)}finally{F?T():(z=!1,w=null)}}else z=!1}var T;if(typeof I=="function")T=function(){I(k)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=k,T=function(){oe.postMessage(null)}}else T=function(){M(k,0)};function ae(N){w=N,z||(z=!0,T())}function q(N,F){v=M(function(){N(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){A||x||(A=!0,ae(B))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(N){switch(g){case 1:case 2:case 3:var F=3;break;default:F=g}var L=g;g=F;try{return N()}finally{g=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=g;g=N;try{return F()}finally{g=L}},t.unstable_scheduleCallback=function(N,F,L){var $=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?$+L:$):L=$,N){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=L+X,N={id:p++,callback:F,priorityLevel:N,startTime:L,expirationTime:X,sortIndex:-1},L>$?(N.sortIndex=L,e(h,N),n(u)===null&&N===n(h)&&(P?(C(v),v=-1):P=!0,q(j,L-$))):(N.sortIndex=X,e(u,N),A||x||(A=!0,ae(B))),N},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(N){var F=g;return function(){var L=g;g=F;try{return N.apply(this,arguments)}finally{g=L}}}})(ng);tg.exports=ng;var S_=tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_=V,tn=S_;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rg=new Set,ho={};function fs(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(ho[t]=e,t=0;t<e.length;t++)rg.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=Object.prototype.hasOwnProperty,T_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Of={},Ff={};function I_(t){return uc.call(Ff,t)?!0:uc.call(Of,t)?!1:T_.test(t)?Ff[t]=!0:(Of[t]=!0,!1)}function A_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C_(t,e,n,r){if(e===null||typeof e>"u"||A_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dd=/[\-:]([a-z])/g;function Nd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dd,Nd);_t[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dd,Nd);_t[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dd,Nd);_t[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function bd(t,e,n,r){var s=_t.hasOwnProperty(e)?_t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(C_(e,n,s,r)&&(n=null),r||s===null?I_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=E_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),Ms=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),Vd=Symbol.for("react.strict_mode"),cc=Symbol.for("react.profiler"),sg=Symbol.for("react.provider"),ig=Symbol.for("react.context"),jd=Symbol.for("react.forward_ref"),dc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Md=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),og=Symbol.for("react.offscreen"),zf=Symbol.iterator;function Vi(t){return t===null||typeof t!="object"?null:(t=zf&&t[zf]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Tu;function $i(t){if(Tu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tu=e&&e[1]||""}return`
`+Tu+t}var Iu=!1;function Au(t,e){if(!t||Iu)return"";Iu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Iu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$i(t):""}function k_(t){switch(t.tag){case 5:return $i(t.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return t=Au(t.type,!1),t;case 11:return t=Au(t.type.render,!1),t;case 1:return t=Au(t.type,!0),t;default:return""}}function fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case Ms:return"Portal";case cc:return"Profiler";case Vd:return"StrictMode";case dc:return"Suspense";case hc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ig:return(t.displayName||"Context")+".Consumer";case sg:return(t._context.displayName||"Context")+".Provider";case jd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Md:return e=t.displayName||null,e!==null?e:fc(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return fc(t(e))}catch{}}return null}function R_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fc(e);case 8:return e===Vd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ag(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function P_(t){var e=ag(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=P_(t))}function lg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ag(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pc(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ug(t,e){e=e.checked,e!=null&&bd(t,"checked",e,!1)}function mc(t,e){ug(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gc(t,e.type,n):e.hasOwnProperty("defaultValue")&&gc(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gc(t,e,n){(e!=="number"||nl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wi=Array.isArray;function Gs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $f(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Wi(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function cg(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,hg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D_=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(t){D_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ji[e]=Ji[t]})});function fg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ji.hasOwnProperty(t)&&Ji[t]?(""+e).trim():e+"px"}function pg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var N_=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _c(t,e){if(e){if(N_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function xc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sc=null,Ks=null,Ys=null;function Hf(t){if(t=Uo(t)){if(typeof Sc!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Ul(e),Sc(t.stateNode,t.type,e))}}function mg(t){Ks?Ys?Ys.push(t):Ys=[t]:Ks=t}function gg(){if(Ks){var t=Ks,e=Ys;if(Ys=Ks=null,Hf(t),e)for(t=0;t<e.length;t++)Hf(e[t])}}function yg(t,e){return t(e)}function vg(){}var Cu=!1;function _g(t,e,n){if(Cu)return t(e,n);Cu=!0;try{return yg(t,e,n)}finally{Cu=!1,(Ks!==null||Ys!==null)&&(vg(),gg())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=Ul(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Ec=!1;if(er)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Ec=!1}function b_(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Zi=!1,rl=null,sl=!1,Tc=null,V_={onError:function(t){Zi=!0,rl=t}};function j_(t,e,n,r,s,i,a,l,u){Zi=!1,rl=null,b_.apply(V_,arguments)}function M_(t,e,n,r,s,i,a,l,u){if(j_.apply(this,arguments),Zi){if(Zi){var h=rl;Zi=!1,rl=null}else throw Error(H(198));sl||(sl=!0,Tc=h)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qf(t){if(ps(t)!==t)throw Error(H(188))}function L_(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qf(s),t;if(i===r)return qf(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function wg(t){return t=L_(t),t!==null?Sg(t):null}function Sg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sg(t);if(e!==null)return e;t=t.sibling}return null}var Eg=tn.unstable_scheduleCallback,Qf=tn.unstable_cancelCallback,O_=tn.unstable_shouldYield,F_=tn.unstable_requestPaint,Ke=tn.unstable_now,z_=tn.unstable_getCurrentPriorityLevel,Od=tn.unstable_ImmediatePriority,Tg=tn.unstable_UserBlockingPriority,il=tn.unstable_NormalPriority,B_=tn.unstable_LowPriority,Ig=tn.unstable_IdlePriority,Ol=null,Vn=null;function U_(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ol,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:H_,$_=Math.log,W_=Math.LN2;function H_(t){return t>>>=0,t===0?32:31-($_(t)/W_|0)|0}var Sa=64,Ea=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ol(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Hi(l):(i&=a,i!==0&&(r=Hi(i)))}else a=n&~s,a!==0?r=Hi(a):i!==0&&(r=Hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function q_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Sn(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=q_(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ag(){var t=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),t}function ku(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function G_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Fd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function Cg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kg,zd,Rg,Pg,Dg,Ac=!1,Ta=[],Er=null,Tr=null,Ir=null,mo=new Map,go=new Map,vr=[],K_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gf(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uo(e),e!==null&&zd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Y_(t,e,n,r,s){switch(e){case"focusin":return Er=Mi(Er,t,e,n,r,s),!0;case"dragenter":return Tr=Mi(Tr,t,e,n,r,s),!0;case"mouseover":return Ir=Mi(Ir,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return mo.set(i,Mi(mo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,go.set(i,Mi(go.get(i)||null,t,e,n,r,s)),!0}return!1}function Ng(t){var e=Jr(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=xg(n),e!==null){t.blockedOn=e,Dg(t.priority,function(){Rg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ba(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wc=r,n.target.dispatchEvent(r),wc=null}else return e=Uo(n),e!==null&&zd(e),t.blockedOn=n,!1;e.shift()}return!0}function Kf(t,e,n){Ba(t)&&n.delete(e)}function X_(){Ac=!1,Er!==null&&Ba(Er)&&(Er=null),Tr!==null&&Ba(Tr)&&(Tr=null),Ir!==null&&Ba(Ir)&&(Ir=null),mo.forEach(Kf),go.forEach(Kf)}function Li(t,e){t.blockedOn===e&&(t.blockedOn=null,Ac||(Ac=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,X_)))}function yo(t){function e(s){return Li(s,t)}if(0<Ta.length){Li(Ta[0],t);for(var n=1;n<Ta.length;n++){var r=Ta[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&Li(Er,t),Tr!==null&&Li(Tr,t),Ir!==null&&Li(Ir,t),mo.forEach(e),go.forEach(e),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)Ng(n),n.blockedOn===null&&vr.shift()}var Xs=ar.ReactCurrentBatchConfig,al=!0;function J_(t,e,n,r){var s=Se,i=Xs.transition;Xs.transition=null;try{Se=1,Bd(t,e,n,r)}finally{Se=s,Xs.transition=i}}function Z_(t,e,n,r){var s=Se,i=Xs.transition;Xs.transition=null;try{Se=4,Bd(t,e,n,r)}finally{Se=s,Xs.transition=i}}function Bd(t,e,n,r){if(al){var s=Cc(t,e,n,r);if(s===null)Ou(t,e,r,ll,n),Gf(t,r);else if(Y_(s,t,e,n,r))r.stopPropagation();else if(Gf(t,r),e&4&&-1<K_.indexOf(t)){for(;s!==null;){var i=Uo(s);if(i!==null&&kg(i),i=Cc(t,e,n,r),i===null&&Ou(t,e,r,ll,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ou(t,e,r,null,n)}}var ll=null;function Cc(t,e,n,r){if(ll=null,t=Ld(r),t=Jr(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ll=t,null}function bg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z_()){case Od:return 1;case Tg:return 4;case il:case B_:return 16;case Ig:return 536870912;default:return 16}default:return 16}}var xr=null,Ud=null,Ua=null;function Vg(){if(Ua)return Ua;var t,e=Ud,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Ua=s.slice(t,1<r?1-r:void 0)}function $a(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function Yf(){return!1}function rn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ia:Yf,this.isPropagationStopped=Yf,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$d=rn(gi),Bo=$e({},gi,{view:0,detail:0}),ex=rn(Bo),Ru,Pu,Oi,Fl=$e({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Ru=t.screenX-Oi.screenX,Pu=t.screenY-Oi.screenY):Pu=Ru=0,Oi=t),Ru)},movementY:function(t){return"movementY"in t?t.movementY:Pu}}),Xf=rn(Fl),tx=$e({},Fl,{dataTransfer:0}),nx=rn(tx),rx=$e({},Bo,{relatedTarget:0}),Du=rn(rx),sx=$e({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),ix=rn(sx),ox=$e({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ax=rn(ox),lx=$e({},gi,{data:0}),Jf=rn(lx),ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dx[t])?!!e[t]:!1}function Wd(){return hx}var fx=$e({},Bo,{key:function(t){if(t.key){var e=ux[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$a(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wd,charCode:function(t){return t.type==="keypress"?$a(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$a(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),px=rn(fx),mx=$e({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=rn(mx),gx=$e({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wd}),yx=rn(gx),vx=$e({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=rn(vx),xx=$e({},Fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wx=rn(xx),Sx=[9,13,27,32],Hd=er&&"CompositionEvent"in window,eo=null;er&&"documentMode"in document&&(eo=document.documentMode);var Ex=er&&"TextEvent"in window&&!eo,jg=er&&(!Hd||eo&&8<eo&&11>=eo),ep=" ",tp=!1;function Mg(t,e){switch(t){case"keyup":return Sx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function Tx(t,e){switch(t){case"compositionend":return Lg(e);case"keypress":return e.which!==32?null:(tp=!0,ep);case"textInput":return t=e.data,t===ep&&tp?null:t;default:return null}}function Ix(t,e){if(Os)return t==="compositionend"||!Hd&&Mg(t,e)?(t=Vg(),Ua=Ud=xr=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jg&&e.locale!=="ko"?null:e.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ax[t.type]:e==="textarea"}function Og(t,e,n,r){mg(r),e=ul(e,"onChange"),0<e.length&&(n=new $d("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var to=null,vo=null;function Cx(t){Kg(t,0)}function zl(t){var e=Bs(t);if(lg(e))return t}function kx(t,e){if(t==="change")return e}var Fg=!1;if(er){var Nu;if(er){var bu="oninput"in document;if(!bu){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),bu=typeof rp.oninput=="function"}Nu=bu}else Nu=!1;Fg=Nu&&(!document.documentMode||9<document.documentMode)}function sp(){to&&(to.detachEvent("onpropertychange",zg),vo=to=null)}function zg(t){if(t.propertyName==="value"&&zl(vo)){var e=[];Og(e,vo,t,Ld(t)),_g(Cx,e)}}function Rx(t,e,n){t==="focusin"?(sp(),to=e,vo=n,to.attachEvent("onpropertychange",zg)):t==="focusout"&&sp()}function Px(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zl(vo)}function Dx(t,e){if(t==="click")return zl(e)}function Nx(t,e){if(t==="input"||t==="change")return zl(e)}function bx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tn=typeof Object.is=="function"?Object.is:bx;function _o(t,e){if(Tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uc.call(e,s)||!Tn(t[s],e[s]))return!1}return!0}function ip(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function op(t,e){var n=ip(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ip(n)}}function Bg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ug(){for(var t=window,e=nl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nl(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vx(t){var e=Ug(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bg(n.ownerDocument.documentElement,n)){if(r!==null&&qd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=op(n,i);var a=op(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jx=er&&"documentMode"in document&&11>=document.documentMode,Fs=null,kc=null,no=null,Rc=!1;function ap(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rc||Fs==null||Fs!==nl(r)||(r=Fs,"selectionStart"in r&&qd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),no&&_o(no,r)||(no=r,r=ul(kc,"onSelect"),0<r.length&&(e=new $d("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fs)))}function Aa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zs={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionend:Aa("Transition","TransitionEnd")},Vu={},$g={};er&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Bl(t){if(Vu[t])return Vu[t];if(!zs[t])return t;var e=zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $g)return Vu[t]=e[n];return t}var Wg=Bl("animationend"),Hg=Bl("animationiteration"),qg=Bl("animationstart"),Qg=Bl("transitionend"),Gg=new Map,lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Gg.set(t,e),fs(e,[t])}for(var ju=0;ju<lp.length;ju++){var Mu=lp[ju],Mx=Mu.toLowerCase(),Lx=Mu[0].toUpperCase()+Mu.slice(1);zr(Mx,"on"+Lx)}zr(Wg,"onAnimationEnd");zr(Hg,"onAnimationIteration");zr(qg,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(Qg,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function up(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,M_(r,e,void 0,t),t.currentTarget=null}function Kg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;up(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;up(s,l,h),i=u}}}if(sl)throw t=Tc,sl=!1,Tc=null,t}function be(t,e){var n=e[Vc];n===void 0&&(n=e[Vc]=new Set);var r=t+"__bubble";n.has(r)||(Yg(e,t,2,!1),n.add(r))}function Lu(t,e,n){var r=0;e&&(r|=4),Yg(n,t,r,e)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Ca]){t[Ca]=!0,rg.forEach(function(n){n!=="selectionchange"&&(Ox.has(n)||Lu(n,!1,t),Lu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ca]||(e[Ca]=!0,Lu("selectionchange",!1,e))}}function Yg(t,e,n,r){switch(bg(e)){case 1:var s=J_;break;case 4:s=Z_;break;default:s=Bd}n=s.bind(null,e,n,t),s=void 0,!Ec||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ou(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Jr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}_g(function(){var h=i,p=Ld(n),m=[];e:{var g=Gg.get(t);if(g!==void 0){var x=$d,A=t;switch(t){case"keypress":if($a(n)===0)break e;case"keydown":case"keyup":x=px;break;case"focusin":A="focus",x=Du;break;case"focusout":A="blur",x=Du;break;case"beforeblur":case"afterblur":x=Du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=nx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=yx;break;case Wg:case Hg:case qg:x=ix;break;case Qg:x=_x;break;case"scroll":x=ex;break;case"wheel":x=wx;break;case"copy":case"cut":case"paste":x=ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Zf}var P=(e&4)!==0,M=!P&&t==="scroll",C=P?g!==null?g+"Capture":null:g;P=[];for(var I=h,R;I!==null;){R=I;var j=R.stateNode;if(R.tag===5&&j!==null&&(R=j,C!==null&&(j=po(I,C),j!=null&&P.push(wo(I,j,R)))),M)break;I=I.return}0<P.length&&(g=new x(g,A,null,n,p),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==wc&&(A=n.relatedTarget||n.fromElement)&&(Jr(A)||A[tr]))break e;if((x||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,x?(A=n.relatedTarget||n.toElement,x=h,A=A?Jr(A):null,A!==null&&(M=ps(A),A!==M||A.tag!==5&&A.tag!==6)&&(A=null)):(x=null,A=h),x!==A)){if(P=Xf,j="onMouseLeave",C="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(P=Zf,j="onPointerLeave",C="onPointerEnter",I="pointer"),M=x==null?g:Bs(x),R=A==null?g:Bs(A),g=new P(j,I+"leave",x,n,p),g.target=M,g.relatedTarget=R,j=null,Jr(p)===h&&(P=new P(C,I+"enter",A,n,p),P.target=R,P.relatedTarget=M,j=P),M=j,x&&A)t:{for(P=x,C=A,I=0,R=P;R;R=Ds(R))I++;for(R=0,j=C;j;j=Ds(j))R++;for(;0<I-R;)P=Ds(P),I--;for(;0<R-I;)C=Ds(C),R--;for(;I--;){if(P===C||C!==null&&P===C.alternate)break t;P=Ds(P),C=Ds(C)}P=null}else P=null;x!==null&&cp(m,g,x,P,!1),A!==null&&M!==null&&cp(m,M,A,P,!0)}}e:{if(g=h?Bs(h):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var B=kx;else if(np(g))if(Fg)B=Nx;else{B=Px;var z=Rx}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=Dx);if(B&&(B=B(t,h))){Og(m,B,n,p);break e}z&&z(t,g,h),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&gc(g,"number",g.value)}switch(z=h?Bs(h):window,t){case"focusin":(np(z)||z.contentEditable==="true")&&(Fs=z,kc=h,no=null);break;case"focusout":no=kc=Fs=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,ap(m,n,p);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":ap(m,n,p)}var w;if(Hd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Os?Mg(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(jg&&n.locale!=="ko"&&(Os||v!=="onCompositionStart"?v==="onCompositionEnd"&&Os&&(w=Vg()):(xr=p,Ud="value"in xr?xr.value:xr.textContent,Os=!0)),z=ul(h,v),0<z.length&&(v=new Jf(v,t,null,n,p),m.push({event:v,listeners:z}),w?v.data=w:(w=Lg(n),w!==null&&(v.data=w)))),(w=Ex?Tx(t,n):Ix(t,n))&&(h=ul(h,"onBeforeInput"),0<h.length&&(p=new Jf("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}Kg(m,e)})}function wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=po(t,n),i!=null&&r.unshift(wo(t,i,s)),i=po(t,e),i!=null&&r.push(wo(t,i,s))),t=t.return}return r}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=po(n,i),u!=null&&a.unshift(wo(n,u,l))):s||(u=po(n,i),u!=null&&a.push(wo(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Fx=/\r\n?/g,zx=/\u0000|\uFFFD/g;function dp(t){return(typeof t=="string"?t:""+t).replace(Fx,`
`).replace(zx,"")}function ka(t,e,n){if(e=dp(e),dp(t)!==e&&n)throw Error(H(425))}function cl(){}var Pc=null,Dc=null;function Nc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,Bx=typeof clearTimeout=="function"?clearTimeout:void 0,hp=typeof Promise=="function"?Promise:void 0,Ux=typeof queueMicrotask=="function"?queueMicrotask:typeof hp<"u"?function(t){return hp.resolve(null).then(t).catch($x)}:bc;function $x(t){setTimeout(function(){throw t})}function Fu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yo(e)}function Ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),bn="__reactFiber$"+yi,So="__reactProps$"+yi,tr="__reactContainer$"+yi,Vc="__reactEvents$"+yi,Wx="__reactListeners$"+yi,Hx="__reactHandles$"+yi;function Jr(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fp(t);t!==null;){if(n=t[bn])return n;t=fp(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[bn]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Ul(t){return t[So]||null}var jc=[],Us=-1;function Br(t){return{current:t}}function je(t){0>Us||(t.current=jc[Us],jc[Us]=null,Us--)}function De(t,e){Us++,jc[Us]=t.current,t.current=e}var Mr={},Pt=Br(Mr),Ut=Br(!1),is=Mr;function ni(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function dl(){je(Ut),je(Pt)}function pp(t,e,n){if(Pt.current!==Mr)throw Error(H(168));De(Pt,e),De(Ut,n)}function Xg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,R_(t)||"Unknown",s));return $e({},n,r)}function hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,is=Pt.current,De(Pt,t),De(Ut,Ut.current),!0}function mp(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=Xg(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,je(Ut),je(Pt),De(Pt,t)):je(Ut),De(Ut,n)}var qn=null,$l=!1,zu=!1;function Jg(t){qn===null?qn=[t]:qn.push(t)}function qx(t){$l=!0,Jg(t)}function Ur(){if(!zu&&qn!==null){zu=!0;var t=0,e=Se;try{var n=qn;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,$l=!1}catch(s){throw qn!==null&&(qn=qn.slice(t+1)),Eg(Od,Ur),s}finally{Se=e,zu=!1}}return null}var $s=[],Ws=0,fl=null,pl=0,on=[],an=0,os=null,Kn=1,Yn="";function Kr(t,e){$s[Ws++]=pl,$s[Ws++]=fl,fl=t,pl=e}function Zg(t,e,n){on[an++]=Kn,on[an++]=Yn,on[an++]=os,os=t;var r=Kn;t=Yn;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Kn=1<<32-Sn(e)+s|n<<s|r,Yn=i+t}else Kn=1<<i|n<<s|r,Yn=t}function Qd(t){t.return!==null&&(Kr(t,1),Zg(t,1,0))}function Gd(t){for(;t===fl;)fl=$s[--Ws],$s[Ws]=null,pl=$s[--Ws],$s[Ws]=null;for(;t===os;)os=on[--an],on[an]=null,Yn=on[--an],on[an]=null,Kn=on[--an],on[an]=null}var en=null,Jt=null,Me=!1,wn=null;function ey(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Jt=Ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:Kn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Jt=null,!0):!1;default:return!1}}function Mc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lc(t){if(Me){var e=Jt;if(e){var n=e;if(!gp(t,e)){if(Mc(t))throw Error(H(418));e=Ar(n.nextSibling);var r=en;e&&gp(t,e)?ey(r,n):(t.flags=t.flags&-4097|2,Me=!1,en=t)}}else{if(Mc(t))throw Error(H(418));t.flags=t.flags&-4097|2,Me=!1,en=t}}}function yp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function Ra(t){if(t!==en)return!1;if(!Me)return yp(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nc(t.type,t.memoizedProps)),e&&(e=Jt)){if(Mc(t))throw ty(),Error(H(418));for(;e;)ey(t,e),e=Ar(e.nextSibling)}if(yp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=en?Ar(t.stateNode.nextSibling):null;return!0}function ty(){for(var t=Jt;t;)t=Ar(t.nextSibling)}function ri(){Jt=en=null,Me=!1}function Kd(t){wn===null?wn=[t]:wn.push(t)}var Qx=ar.ReactCurrentBatchConfig;function Fi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Pa(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vp(t){var e=t._init;return e(t._payload)}function ny(t){function e(C,I){if(t){var R=C.deletions;R===null?(C.deletions=[I],C.flags|=16):R.push(I)}}function n(C,I){if(!t)return null;for(;I!==null;)e(C,I),I=I.sibling;return null}function r(C,I){for(C=new Map;I!==null;)I.key!==null?C.set(I.key,I):C.set(I.index,I),I=I.sibling;return C}function s(C,I){return C=Pr(C,I),C.index=0,C.sibling=null,C}function i(C,I,R){return C.index=R,t?(R=C.alternate,R!==null?(R=R.index,R<I?(C.flags|=2,I):R):(C.flags|=2,I)):(C.flags|=1048576,I)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function l(C,I,R,j){return I===null||I.tag!==6?(I=Qu(R,C.mode,j),I.return=C,I):(I=s(I,R),I.return=C,I)}function u(C,I,R,j){var B=R.type;return B===Ls?p(C,I,R.props.children,j,R.key):I!==null&&(I.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===gr&&vp(B)===I.type)?(j=s(I,R.props),j.ref=Fi(C,I,R),j.return=C,j):(j=Ya(R.type,R.key,R.props,null,C.mode,j),j.ref=Fi(C,I,R),j.return=C,j)}function h(C,I,R,j){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=Gu(R,C.mode,j),I.return=C,I):(I=s(I,R.children||[]),I.return=C,I)}function p(C,I,R,j,B){return I===null||I.tag!==7?(I=rs(R,C.mode,j,B),I.return=C,I):(I=s(I,R),I.return=C,I)}function m(C,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Qu(""+I,C.mode,R),I.return=C,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _a:return R=Ya(I.type,I.key,I.props,null,C.mode,R),R.ref=Fi(C,null,I),R.return=C,R;case Ms:return I=Gu(I,C.mode,R),I.return=C,I;case gr:var j=I._init;return m(C,j(I._payload),R)}if(Wi(I)||Vi(I))return I=rs(I,C.mode,R,null),I.return=C,I;Pa(C,I)}return null}function g(C,I,R,j){var B=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return B!==null?null:l(C,I,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _a:return R.key===B?u(C,I,R,j):null;case Ms:return R.key===B?h(C,I,R,j):null;case gr:return B=R._init,g(C,I,B(R._payload),j)}if(Wi(R)||Vi(R))return B!==null?null:p(C,I,R,j,null);Pa(C,R)}return null}function x(C,I,R,j,B){if(typeof j=="string"&&j!==""||typeof j=="number")return C=C.get(R)||null,l(I,C,""+j,B);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _a:return C=C.get(j.key===null?R:j.key)||null,u(I,C,j,B);case Ms:return C=C.get(j.key===null?R:j.key)||null,h(I,C,j,B);case gr:var z=j._init;return x(C,I,R,z(j._payload),B)}if(Wi(j)||Vi(j))return C=C.get(R)||null,p(I,C,j,B,null);Pa(I,j)}return null}function A(C,I,R,j){for(var B=null,z=null,w=I,v=I=0,S=null;w!==null&&v<R.length;v++){w.index>v?(S=w,w=null):S=w.sibling;var E=g(C,w,R[v],j);if(E===null){w===null&&(w=S);break}t&&w&&E.alternate===null&&e(C,w),I=i(E,I,v),z===null?B=E:z.sibling=E,z=E,w=S}if(v===R.length)return n(C,w),Me&&Kr(C,v),B;if(w===null){for(;v<R.length;v++)w=m(C,R[v],j),w!==null&&(I=i(w,I,v),z===null?B=w:z.sibling=w,z=w);return Me&&Kr(C,v),B}for(w=r(C,w);v<R.length;v++)S=x(w,C,v,R[v],j),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?v:S.key),I=i(S,I,v),z===null?B=S:z.sibling=S,z=S);return t&&w.forEach(function(_){return e(C,_)}),Me&&Kr(C,v),B}function P(C,I,R,j){var B=Vi(R);if(typeof B!="function")throw Error(H(150));if(R=B.call(R),R==null)throw Error(H(151));for(var z=B=null,w=I,v=I=0,S=null,E=R.next();w!==null&&!E.done;v++,E=R.next()){w.index>v?(S=w,w=null):S=w.sibling;var _=g(C,w,E.value,j);if(_===null){w===null&&(w=S);break}t&&w&&_.alternate===null&&e(C,w),I=i(_,I,v),z===null?B=_:z.sibling=_,z=_,w=S}if(E.done)return n(C,w),Me&&Kr(C,v),B;if(w===null){for(;!E.done;v++,E=R.next())E=m(C,E.value,j),E!==null&&(I=i(E,I,v),z===null?B=E:z.sibling=E,z=E);return Me&&Kr(C,v),B}for(w=r(C,w);!E.done;v++,E=R.next())E=x(w,C,v,E.value,j),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?v:E.key),I=i(E,I,v),z===null?B=E:z.sibling=E,z=E);return t&&w.forEach(function(k){return e(C,k)}),Me&&Kr(C,v),B}function M(C,I,R,j){if(typeof R=="object"&&R!==null&&R.type===Ls&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case _a:e:{for(var B=R.key,z=I;z!==null;){if(z.key===B){if(B=R.type,B===Ls){if(z.tag===7){n(C,z.sibling),I=s(z,R.props.children),I.return=C,C=I;break e}}else if(z.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===gr&&vp(B)===z.type){n(C,z.sibling),I=s(z,R.props),I.ref=Fi(C,z,R),I.return=C,C=I;break e}n(C,z);break}else e(C,z);z=z.sibling}R.type===Ls?(I=rs(R.props.children,C.mode,j,R.key),I.return=C,C=I):(j=Ya(R.type,R.key,R.props,null,C.mode,j),j.ref=Fi(C,I,R),j.return=C,C=j)}return a(C);case Ms:e:{for(z=R.key;I!==null;){if(I.key===z)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){n(C,I.sibling),I=s(I,R.children||[]),I.return=C,C=I;break e}else{n(C,I);break}else e(C,I);I=I.sibling}I=Gu(R,C.mode,j),I.return=C,C=I}return a(C);case gr:return z=R._init,M(C,I,z(R._payload),j)}if(Wi(R))return A(C,I,R,j);if(Vi(R))return P(C,I,R,j);Pa(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(n(C,I.sibling),I=s(I,R),I.return=C,C=I):(n(C,I),I=Qu(R,C.mode,j),I.return=C,C=I),a(C)):n(C,I)}return M}var si=ny(!0),ry=ny(!1),ml=Br(null),gl=null,Hs=null,Yd=null;function Xd(){Yd=Hs=gl=null}function Jd(t){var e=ml.current;je(ml),t._currentValue=e}function Oc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Js(t,e){gl=t,Yd=Hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Yd!==t)if(t={context:t,memoizedValue:e,next:null},Hs===null){if(gl===null)throw Error(H(308));Hs=t,gl.dependencies={lanes:0,firstContext:t}}else Hs=Hs.next=t;return e}var Zr=null;function Zd(t){Zr===null?Zr=[t]:Zr.push(t)}function sy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zd(e)):(n.next=s.next,s.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yr=!1;function eh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nr(t,n)}return s=r.interleaved,s===null?(e.next=e,Zd(r)):(e.next=s.next,s.next=e),r.interleaved=e,nr(t,n)}function Wa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fd(t,n)}}function _p(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yl(t,e,n,r){var s=t.updateQueue;yr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,p=h=u=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,P=l;switch(g=e,x=n,P.tag){case 1:if(A=P.payload,typeof A=="function"){m=A.call(x,m,g);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=P.payload,g=typeof A=="function"?A.call(x,m,g):A,g==null)break e;m=$e({},m,g);break e;case 2:yr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=x,u=m):p=p.next=x,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ls|=a,t.lanes=a,t.memoizedState=m}}function xp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var $o={},jn=Br($o),Eo=Br($o),To=Br($o);function es(t){if(t===$o)throw Error(H(174));return t}function th(t,e){switch(De(To,e),De(Eo,t),De(jn,$o),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vc(e,t)}je(jn),De(jn,e)}function ii(){je(jn),je(Eo),je(To)}function oy(t){es(To.current);var e=es(jn.current),n=vc(e,t.type);e!==n&&(De(Eo,t),De(jn,n))}function nh(t){Eo.current===t&&(je(jn),je(Eo))}var Be=Br(0);function vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bu=[];function rh(){for(var t=0;t<Bu.length;t++)Bu[t]._workInProgressVersionPrimary=null;Bu.length=0}var Ha=ar.ReactCurrentDispatcher,Uu=ar.ReactCurrentBatchConfig,as=0,Ue=null,it=null,dt=null,_l=!1,ro=!1,Io=0,Gx=0;function It(){throw Error(H(321))}function sh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tn(t[n],e[n]))return!1;return!0}function ih(t,e,n,r,s,i){if(as=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ha.current=t===null||t.memoizedState===null?Jx:Zx,t=n(r,s),ro){i=0;do{if(ro=!1,Io=0,25<=i)throw Error(H(301));i+=1,dt=it=null,e.updateQueue=null,Ha.current=e1,t=n(r,s)}while(ro)}if(Ha.current=xl,e=it!==null&&it.next!==null,as=0,dt=it=Ue=null,_l=!1,e)throw Error(H(300));return t}function oh(){var t=Io!==0;return Io=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ue.memoizedState=dt=t:dt=dt.next=t,dt}function pn(){if(it===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=dt===null?Ue.memoizedState:dt.next;if(e!==null)dt=e,it=t;else{if(t===null)throw Error(H(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},dt===null?Ue.memoizedState=dt=t:dt=dt.next=t}return dt}function Ao(t,e){return typeof e=="function"?e(t):e}function $u(t){var e=pn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var p=h.lane;if((as&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Ue.lanes|=p,ls|=p}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Tn(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wu(t){var e=pn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Tn(i,e.memoizedState)||(Bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ay(){}function ly(t,e){var n=Ue,r=pn(),s=e(),i=!Tn(r.memoizedState,s);if(i&&(r.memoizedState=s,Bt=!0),r=r.queue,ah(dy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Co(9,cy.bind(null,n,r,s,e),void 0,null),ht===null)throw Error(H(349));as&30||uy(n,e,s)}return s}function uy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cy(t,e,n,r){e.value=n,e.getSnapshot=r,hy(e)&&fy(t)}function dy(t,e,n){return n(function(){hy(e)&&fy(t)})}function hy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tn(t,n)}catch{return!0}}function fy(t){var e=nr(t,1);e!==null&&En(e,t,1,-1)}function wp(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:t},e.queue=t,t=t.dispatch=Xx.bind(null,Ue,t),[e.memoizedState,t]}function Co(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function py(){return pn().memoizedState}function qa(t,e,n,r){var s=Nn();Ue.flags|=t,s.memoizedState=Co(1|e,n,void 0,r===void 0?null:r)}function Wl(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(it!==null){var a=it.memoizedState;if(i=a.destroy,r!==null&&sh(r,a.deps)){s.memoizedState=Co(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=Co(1|e,n,i,r)}function Sp(t,e){return qa(8390656,8,t,e)}function ah(t,e){return Wl(2048,8,t,e)}function my(t,e){return Wl(4,2,t,e)}function gy(t,e){return Wl(4,4,t,e)}function yy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vy(t,e,n){return n=n!=null?n.concat([t]):null,Wl(4,4,yy.bind(null,e,t),n)}function lh(){}function _y(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xy(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wy(t,e,n){return as&21?(Tn(n,e)||(n=Ag(),Ue.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function Kx(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Uu.transition;Uu.transition={};try{t(!1),e()}finally{Se=n,Uu.transition=r}}function Sy(){return pn().memoizedState}function Yx(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ey(t))Ty(e,n);else if(n=sy(t,e,n,r),n!==null){var s=Vt();En(n,t,r,s),Iy(n,e,r)}}function Xx(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ey(t))Ty(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Tn(l,a)){var u=e.interleaved;u===null?(s.next=s,Zd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=sy(t,e,s,r),n!==null&&(s=Vt(),En(n,t,r,s),Iy(n,e,r))}}function Ey(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function Ty(t,e){ro=_l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fd(t,n)}}var xl={readContext:fn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},Jx={readContext:fn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:Sp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qa(4194308,4,yy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return qa(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yx.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:wp,useDebugValue:lh,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=wp(!1),e=t[0];return t=Kx.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=Nn();if(Me){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),ht===null)throw Error(H(349));as&30||uy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sp(dy.bind(null,r,i,t),[t]),r.flags|=2048,Co(9,cy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=ht.identifierPrefix;if(Me){var n=Yn,r=Kn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zx={readContext:fn,useCallback:_y,useContext:fn,useEffect:ah,useImperativeHandle:vy,useInsertionEffect:my,useLayoutEffect:gy,useMemo:xy,useReducer:$u,useRef:py,useState:function(){return $u(Ao)},useDebugValue:lh,useDeferredValue:function(t){var e=pn();return wy(e,it.memoizedState,t)},useTransition:function(){var t=$u(Ao)[0],e=pn().memoizedState;return[t,e]},useMutableSource:ay,useSyncExternalStore:ly,useId:Sy,unstable_isNewReconciler:!1},e1={readContext:fn,useCallback:_y,useContext:fn,useEffect:ah,useImperativeHandle:vy,useInsertionEffect:my,useLayoutEffect:gy,useMemo:xy,useReducer:Wu,useRef:py,useState:function(){return Wu(Ao)},useDebugValue:lh,useDeferredValue:function(t){var e=pn();return it===null?e.memoizedState=t:wy(e,it.memoizedState,t)},useTransition:function(){var t=Wu(Ao)[0],e=pn().memoizedState;return[t,e]},useMutableSource:ay,useSyncExternalStore:ly,useId:Sy,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hl={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=Rr(t),i=Xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(En(e,t,s,r),Wa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=Rr(t),i=Xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(En(e,t,s,r),Wa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=Rr(t),s=Xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(En(e,t,r,n),Wa(e,t,r))}};function Ep(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!_o(n,r)||!_o(s,i):!0}function Ay(t,e,n){var r=!1,s=Mr,i=e.contextType;return typeof i=="object"&&i!==null?i=fn(i):(s=$t(e)?is:Pt.current,r=e.contextTypes,i=(r=r!=null)?ni(t,s):Mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Tp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hl.enqueueReplaceState(e,e.state,null)}function zc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},eh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fn(i):(i=$t(e)?is:Pt.current,s.context=ni(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Fc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hl.enqueueReplaceState(s,s.state,null),yl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=k_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t1=typeof WeakMap=="function"?WeakMap:Map;function Cy(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sl||(Sl=!0,Xc=r),Bc(t,e)},n}function ky(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bc(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ip(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new t1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=m1.bind(null,t,e,n),e.then(t,t))}function Ap(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var n1=ar.ReactCurrentOwner,Bt=!1;function bt(t,e,n,r){e.child=t===null?ry(e,null,n,r):si(e,t.child,n,r)}function kp(t,e,n,r,s){n=n.render;var i=e.ref;return Js(e,s),r=ih(t,e,n,r,i,s),n=oh(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Me&&n&&Qd(e),e.flags|=1,bt(t,e,r,s),e.child)}function Rp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ry(t,e,i,r,s)):(t=Ya(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(a,r)&&t.ref===e.ref)return rr(t,e,s)}return e.flags|=1,t=Pr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ry(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_o(i,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,rr(t,e,s)}return Uc(t,e,n,r,s)}function Py(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Qs,Xt),Xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Qs,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,De(Qs,Xt),Xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,De(Qs,Xt),Xt|=r;return bt(t,e,s,n),e.child}function Dy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uc(t,e,n,r,s){var i=$t(n)?is:Pt.current;return i=ni(e,i),Js(e,s),n=ih(t,e,n,r,i,s),r=oh(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Me&&r&&Qd(e),e.flags|=1,bt(t,e,n,s),e.child)}function Pp(t,e,n,r,s){if($t(n)){var i=!0;hl(e)}else i=!1;if(Js(e,s),e.stateNode===null)Qa(t,e),Ay(e,n,r),zc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=fn(h):(h=$t(n)?is:Pt.current,h=ni(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Tp(e,a,r,h),yr=!1;var g=e.memoizedState;a.state=g,yl(e,r,a,s),u=e.memoizedState,l!==r||g!==u||Ut.current||yr?(typeof p=="function"&&(Fc(e,n,p,r),u=e.memoizedState),(l=yr||Ep(e,n,l,r,g,u,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,iy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:_n(e.type,l),a.props=h,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=fn(u):(u=$t(n)?is:Pt.current,u=ni(e,u));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Tp(e,a,r,u),yr=!1,g=e.memoizedState,a.state=g,yl(e,r,a,s);var A=e.memoizedState;l!==m||g!==A||Ut.current||yr?(typeof x=="function"&&(Fc(e,n,x,r),A=e.memoizedState),(h=yr||Ep(e,n,h,r,g,A,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return $c(t,e,n,r,i,s)}function $c(t,e,n,r,s,i){Dy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&mp(e,n,!1),rr(t,e,i);r=e.stateNode,n1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=si(e,t.child,null,i),e.child=si(e,null,l,i)):bt(t,e,l,i),e.memoizedState=r.state,s&&mp(e,n,!0),e.child}function Ny(t){var e=t.stateNode;e.pendingContext?pp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pp(t,e.context,!1),th(t,e.containerInfo)}function Dp(t,e,n,r,s){return ri(),Kd(s),e.flags|=256,bt(t,e,n,r),e.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function by(t,e,n){var r=e.pendingProps,s=Be.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),De(Be,s&1),t===null)return Lc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Gl(a,r,0,null),t=rs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Hc(n),e.memoizedState=Wc,t):uh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return r1(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Pr(l,i):(i=rs(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Hc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Wc,r}return i=t.child,t=i.sibling,r=Pr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uh(t,e){return e=Gl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Da(t,e,n,r){return r!==null&&Kd(r),si(e,t.child,null,n),t=uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r1(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Hu(Error(H(422))),Da(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Gl({mode:"visible",children:r.children},s,0,null),i=rs(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&si(e,t.child,null,a),e.child.memoizedState=Hc(a),e.memoizedState=Wc,i);if(!(e.mode&1))return Da(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=Hu(i,r,void 0),Da(t,e,a,r)}if(l=(a&t.childLanes)!==0,Bt||l){if(r=ht,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nr(t,s),En(r,t,s,-1))}return mh(),r=Hu(Error(H(421))),Da(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=g1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jt=Ar(s.nextSibling),en=e,Me=!0,wn=null,t!==null&&(on[an++]=Kn,on[an++]=Yn,on[an++]=os,Kn=t.id,Yn=t.overflow,os=e),e=uh(e,r.children),e.flags|=4096,e)}function Np(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oc(t.return,e,n)}function qu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Np(t,n,e);else if(t.tag===19)Np(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qu(e,!0,n,null,i);break;case"together":qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function s1(t,e,n){switch(e.tag){case 3:Ny(e),ri();break;case 5:oy(e);break;case 1:$t(e.type)&&hl(e);break;case 4:th(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;De(ml,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?by(t,e,n):(De(Be,Be.current&1),t=rr(t,e,n),t!==null?t.sibling:null);De(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,Py(t,e,n)}return rr(t,e,n)}var jy,qc,My,Ly;jy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qc=function(){};My=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(jn.current);var i=null;switch(n){case"input":s=pc(t,s),r=pc(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=yc(t,s),r=yc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cl)}_c(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ho.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ho.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&be("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ly=function(t,e,n,r){n!==r&&(e.flags|=4)};function zi(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function i1(t,e,n){var r=e.pendingProps;switch(Gd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return $t(e.type)&&dl(),At(e),null;case 3:return r=e.stateNode,ii(),je(Ut),je(Pt),rh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ra(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(ed(wn),wn=null))),qc(t,e),At(e),null;case 5:nh(e);var s=es(To.current);if(n=e.type,t!==null&&e.stateNode!=null)My(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return At(e),null}if(t=es(jn.current),Ra(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[So]=i,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<qi.length;s++)be(qi[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Bf(r,i),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},be("invalid",r);break;case"textarea":$f(r,i),be("invalid",r)}_c(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ka(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ka(r.textContent,l,t),s=["children",""+l]):ho.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&be("scroll",r)}switch(n){case"input":xa(r),Uf(r,i,!0);break;case"textarea":xa(r),Wf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=cl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[bn]=e,t[So]=r,jy(t,e,!1,!1),e.stateNode=t;e:{switch(a=xc(n,r),n){case"dialog":be("cancel",t),be("close",t),s=r;break;case"iframe":case"object":case"embed":be("load",t),s=r;break;case"video":case"audio":for(s=0;s<qi.length;s++)be(qi[s],t);s=r;break;case"source":be("error",t),s=r;break;case"img":case"image":case"link":be("error",t),be("load",t),s=r;break;case"details":be("toggle",t),s=r;break;case"input":Bf(t,r),s=pc(t,r),be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),be("invalid",t);break;case"textarea":$f(t,r),s=yc(t,r),be("invalid",t);break;default:s=r}_c(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?pg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fo(t,u):typeof u=="number"&&fo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ho.hasOwnProperty(i)?u!=null&&i==="onScroll"&&be("scroll",t):u!=null&&bd(t,i,u,a))}switch(n){case"input":xa(t),Uf(t,r,!1);break;case"textarea":xa(t),Wf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Gs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Gs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)Ly(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=es(To.current),es(jn.current),Ra(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:ka(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ka(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return At(e),null;case 13:if(je(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Jt!==null&&e.mode&1&&!(e.flags&128))ty(),ri(),e.flags|=98560,i=!1;else if(i=Ra(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[bn]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else wn!==null&&(ed(wn),wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?ot===0&&(ot=3):mh())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return ii(),qc(t,e),t===null&&xo(e.stateNode.containerInfo),At(e),null;case 10:return Jd(e.type._context),At(e),null;case 17:return $t(e.type)&&dl(),At(e),null;case 19:if(je(Be),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)zi(i,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=vl(t),a!==null){for(e.flags|=128,zi(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>ai&&(e.flags|=128,r=!0,zi(i,!1),e.lanes=4194304)}else{if(!r)if(t=vl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Me)return At(e),null}else 2*Ke()-i.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,zi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Be.current,De(Be,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return ph(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function o1(t,e){switch(Gd(e),e.tag){case 1:return $t(e.type)&&dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),je(Ut),je(Pt),rh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nh(e),null;case 13:if(je(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Be),null;case 4:return ii(),null;case 10:return Jd(e.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var Na=!1,kt=!1,a1=typeof WeakSet=="function"?WeakSet:Set,J=null;function qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Qc(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var bp=!1;function l1(t,e){if(Pc=al,t=Ug(),qd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=a),g===i&&++p===r&&(u=a),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dc={focusedElem:t,selectionRange:n},al=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var P=A.memoizedProps,M=A.memoizedState,C=e.stateNode,I=C.getSnapshotBeforeUpdate(e.elementType===e.type?P:_n(e.type,P),M);C.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(j){Qe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return A=bp,bp=!1,A}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qc(e,n,i)}s=s.next}while(s!==r)}}function ql(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Oy(t){var e=t.alternate;e!==null&&(t.alternate=null,Oy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[So],delete e[Vc],delete e[Wx],delete e[Hx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fy(t){return t.tag===5||t.tag===3||t.tag===4}function Vp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cl));else if(r!==4&&(t=t.child,t!==null))for(Kc(t,e,n),t=t.sibling;t!==null;)Kc(t,e,n),t=t.sibling}function Yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yc(t,e,n),t=t.sibling;t!==null;)Yc(t,e,n),t=t.sibling}var pt=null,xn=!1;function mr(t,e,n){for(n=n.child;n!==null;)zy(t,e,n),n=n.sibling}function zy(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ol,n)}catch{}switch(n.tag){case 5:kt||qs(n,e);case 6:var r=pt,s=xn;pt=null,mr(t,e,n),pt=r,xn=s,pt!==null&&(xn?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(xn?(t=pt,n=n.stateNode,t.nodeType===8?Fu(t.parentNode,n):t.nodeType===1&&Fu(t,n),yo(t)):Fu(pt,n.stateNode));break;case 4:r=pt,s=xn,pt=n.stateNode.containerInfo,xn=!0,mr(t,e,n),pt=r,xn=s;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Qc(n,e,a),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!kt&&(qs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Qe(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,mr(t,e,n),kt=r):mr(t,e,n);break;default:mr(t,e,n)}}function jp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a1),e.forEach(function(r){var s=y1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:pt=l.stateNode,xn=!1;break e;case 3:pt=l.stateNode.containerInfo,xn=!0;break e;case 4:pt=l.stateNode.containerInfo,xn=!0;break e}l=l.return}if(pt===null)throw Error(H(160));zy(i,a,s),pt=null,xn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Qe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)By(e,t),e=e.sibling}function By(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Dn(t),r&4){try{so(3,t,t.return),ql(3,t)}catch(P){Qe(t,t.return,P)}try{so(5,t,t.return)}catch(P){Qe(t,t.return,P)}}break;case 1:vn(e,t),Dn(t),r&512&&n!==null&&qs(n,n.return);break;case 5:if(vn(e,t),Dn(t),r&512&&n!==null&&qs(n,n.return),t.flags&32){var s=t.stateNode;try{fo(s,"")}catch(P){Qe(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ug(s,i),xc(l,a);var h=xc(l,i);for(a=0;a<u.length;a+=2){var p=u[a],m=u[a+1];p==="style"?pg(s,m):p==="dangerouslySetInnerHTML"?hg(s,m):p==="children"?fo(s,m):bd(s,p,m,h)}switch(l){case"input":mc(s,i);break;case"textarea":cg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Gs(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?Gs(s,!!i.multiple,i.defaultValue,!0):Gs(s,!!i.multiple,i.multiple?[]:"",!1))}s[So]=i}catch(P){Qe(t,t.return,P)}}break;case 6:if(vn(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Qe(t,t.return,P)}}break;case 3:if(vn(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(P){Qe(t,t.return,P)}break;case 4:vn(e,t),Dn(t);break;case 13:vn(e,t),Dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hh=Ke())),r&4&&jp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(h=kt)||p,vn(e,t),kt=h):vn(e,t),Dn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(m=J=p;J!==null;){switch(g=J,x=g.child,g.tag){case 0:case 11:case 14:case 15:so(4,g,g.return);break;case 1:qs(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(P){Qe(r,n,P)}}break;case 5:qs(g,g.return);break;case 22:if(g.memoizedState!==null){Lp(m);continue}}x!==null?(x.return=g,J=x):Lp(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fg("display",a))}catch(P){Qe(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(P){Qe(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:vn(e,t),Dn(t),r&4&&jp(t);break;case 21:break;default:vn(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fy(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fo(s,""),r.flags&=-33);var i=Vp(t);Yc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Vp(t);Kc(t,l,a);break;default:throw Error(H(161))}}catch(u){Qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u1(t,e,n){J=t,Uy(t)}function Uy(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Na;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||kt;l=Na;var h=kt;if(Na=a,(kt=u)&&!h)for(J=s;J!==null;)a=J,u=a.child,a.tag===22&&a.memoizedState!==null?Op(s):u!==null?(u.return=a,J=u):Op(s);for(;i!==null;)J=i,Uy(i),i=i.sibling;J=s,Na=l,kt=h}Mp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):Mp(t)}}function Mp(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||ql(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&yo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}kt||e.flags&512&&Gc(e)}catch(g){Qe(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Lp(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Op(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ql(4,e)}catch(u){Qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Qe(e,s,u)}}var i=e.return;try{Gc(e)}catch(u){Qe(e,i,u)}break;case 5:var a=e.return;try{Gc(e)}catch(u){Qe(e,a,u)}}}catch(u){Qe(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var c1=Math.ceil,wl=ar.ReactCurrentDispatcher,ch=ar.ReactCurrentOwner,dn=ar.ReactCurrentBatchConfig,ye=0,ht=null,nt=null,yt=0,Xt=0,Qs=Br(0),ot=0,ko=null,ls=0,Ql=0,dh=0,io=null,Ft=null,hh=0,ai=1/0,Hn=null,Sl=!1,Xc=null,kr=null,ba=!1,wr=null,El=0,oo=0,Jc=null,Ga=-1,Ka=0;function Vt(){return ye&6?Ke():Ga!==-1?Ga:Ga=Ke()}function Rr(t){return t.mode&1?ye&2&&yt!==0?yt&-yt:Qx.transition!==null?(Ka===0&&(Ka=Ag()),Ka):(t=Se,t!==0||(t=window.event,t=t===void 0?16:bg(t.type)),t):1}function En(t,e,n,r){if(50<oo)throw oo=0,Jc=null,Error(H(185));zo(t,n,r),(!(ye&2)||t!==ht)&&(t===ht&&(!(ye&2)&&(Ql|=n),ot===4&&_r(t,yt)),Wt(t,r),n===1&&ye===0&&!(e.mode&1)&&(ai=Ke()+500,$l&&Ur()))}function Wt(t,e){var n=t.callbackNode;Q_(t,e);var r=ol(t,t===ht?yt:0);if(r===0)n!==null&&Qf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qf(n),e===1)t.tag===0?qx(Fp.bind(null,t)):Jg(Fp.bind(null,t)),Ux(function(){!(ye&6)&&Ur()}),n=null;else{switch(Cg(r)){case 1:n=Od;break;case 4:n=Tg;break;case 16:n=il;break;case 536870912:n=Ig;break;default:n=il}n=Yy(n,$y.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $y(t,e){if(Ga=-1,Ka=0,ye&6)throw Error(H(327));var n=t.callbackNode;if(Zs()&&t.callbackNode!==n)return null;var r=ol(t,t===ht?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tl(t,r);else{e=r;var s=ye;ye|=2;var i=Hy();(ht!==t||yt!==e)&&(Hn=null,ai=Ke()+500,ns(t,e));do try{f1();break}catch(l){Wy(t,l)}while(!0);Xd(),wl.current=i,ye=s,nt!==null?e=0:(ht=null,yt=0,e=ot)}if(e!==0){if(e===2&&(s=Ic(t),s!==0&&(r=s,e=Zc(t,s))),e===1)throw n=ko,ns(t,0),_r(t,r),Wt(t,Ke()),n;if(e===6)_r(t,r);else{if(s=t.current.alternate,!(r&30)&&!d1(s)&&(e=Tl(t,r),e===2&&(i=Ic(t),i!==0&&(r=i,e=Zc(t,i))),e===1))throw n=ko,ns(t,0),_r(t,r),Wt(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Yr(t,Ft,Hn);break;case 3:if(_r(t,r),(r&130023424)===r&&(e=hh+500-Ke(),10<e)){if(ol(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bc(Yr.bind(null,t,Ft,Hn),e);break}Yr(t,Ft,Hn);break;case 4:if(_r(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Sn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c1(r/1960))-r,10<r){t.timeoutHandle=bc(Yr.bind(null,t,Ft,Hn),r);break}Yr(t,Ft,Hn);break;case 5:Yr(t,Ft,Hn);break;default:throw Error(H(329))}}}return Wt(t,Ke()),t.callbackNode===n?$y.bind(null,t):null}function Zc(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=Tl(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&ed(e)),t}function ed(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function d1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~dh,e&=~Ql,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Fp(t){if(ye&6)throw Error(H(327));Zs();var e=ol(t,0);if(!(e&1))return Wt(t,Ke()),null;var n=Tl(t,e);if(t.tag!==0&&n===2){var r=Ic(t);r!==0&&(e=r,n=Zc(t,r))}if(n===1)throw n=ko,ns(t,0),_r(t,e),Wt(t,Ke()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Ft,Hn),Wt(t,Ke()),null}function fh(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(ai=Ke()+500,$l&&Ur())}}function us(t){wr!==null&&wr.tag===0&&!(ye&6)&&Zs();var e=ye;ye|=1;var n=dn.transition,r=Se;try{if(dn.transition=null,Se=1,t)return t()}finally{Se=r,dn.transition=n,ye=e,!(ye&6)&&Ur()}}function ph(){Xt=Qs.current,je(Qs)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bx(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Gd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dl();break;case 3:ii(),je(Ut),je(Pt),rh();break;case 5:nh(r);break;case 4:ii();break;case 13:je(Be);break;case 19:je(Be);break;case 10:Jd(r.type._context);break;case 22:case 23:ph()}n=n.return}if(ht=t,nt=t=Pr(t.current,null),yt=Xt=e,ot=0,ko=null,dh=Ql=ls=0,Ft=io=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Zr=null}return t}function Wy(t,e){do{var n=nt;try{if(Xd(),Ha.current=xl,_l){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_l=!1}if(as=0,dt=it=Ue=null,ro=!1,Io=0,ch.current=null,n===null||n.return===null){ot=1,ko=e,nt=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=yt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Ap(a);if(x!==null){x.flags&=-257,Cp(x,a,l,i,e),x.mode&1&&Ip(i,h,e),e=x,u=h;var A=e.updateQueue;if(A===null){var P=new Set;P.add(u),e.updateQueue=P}else A.add(u);break e}else{if(!(e&1)){Ip(i,h,e),mh();break e}u=Error(H(426))}}else if(Me&&l.mode&1){var M=Ap(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Cp(M,a,l,i,e),Kd(oi(u,l));break e}}i=u=oi(u,l),ot!==4&&(ot=2),io===null?io=[i]:io.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var C=Cy(i,u,e);_p(i,C);break e;case 1:l=u;var I=i.type,R=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(kr===null||!kr.has(R)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=ky(i,l,e);_p(i,j);break e}}i=i.return}while(i!==null)}Qy(n)}catch(B){e=B,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function Hy(){var t=wl.current;return wl.current=xl,t===null?xl:t}function mh(){(ot===0||ot===3||ot===2)&&(ot=4),ht===null||!(ls&268435455)&&!(Ql&268435455)||_r(ht,yt)}function Tl(t,e){var n=ye;ye|=2;var r=Hy();(ht!==t||yt!==e)&&(Hn=null,ns(t,e));do try{h1();break}catch(s){Wy(t,s)}while(!0);if(Xd(),ye=n,wl.current=r,nt!==null)throw Error(H(261));return ht=null,yt=0,ot}function h1(){for(;nt!==null;)qy(nt)}function f1(){for(;nt!==null&&!O_();)qy(nt)}function qy(t){var e=Ky(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Qy(t):nt=e,ch.current=null}function Qy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o1(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,nt=null;return}}else if(n=i1(n,e,Xt),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);ot===0&&(ot=5)}function Yr(t,e,n){var r=Se,s=dn.transition;try{dn.transition=null,Se=1,p1(t,e,n,r)}finally{dn.transition=s,Se=r}return null}function p1(t,e,n,r){do Zs();while(wr!==null);if(ye&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(G_(t,i),t===ht&&(nt=ht=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ba||(ba=!0,Yy(il,function(){return Zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dn.transition,dn.transition=null;var a=Se;Se=1;var l=ye;ye|=4,ch.current=null,l1(t,n),By(n,t),Vx(Dc),al=!!Pc,Dc=Pc=null,t.current=n,u1(n),F_(),ye=l,Se=a,dn.transition=i}else t.current=n;if(ba&&(ba=!1,wr=t,El=s),i=t.pendingLanes,i===0&&(kr=null),U_(n.stateNode),Wt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sl)throw Sl=!1,t=Xc,Xc=null,t;return El&1&&t.tag!==0&&Zs(),i=t.pendingLanes,i&1?t===Jc?oo++:(oo=0,Jc=t):oo=0,Ur(),null}function Zs(){if(wr!==null){var t=Cg(El),e=dn.transition,n=Se;try{if(dn.transition=null,Se=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,El=0,ye&6)throw Error(H(331));var s=ye;for(ye|=4,J=t.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(J=h;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:so(8,p,i)}var m=p.child;if(m!==null)m.return=p,J=m;else for(;J!==null;){p=J;var g=p.sibling,x=p.return;if(Oy(p),p===h){J=null;break}if(g!==null){g.return=x,J=g;break}J=x}}}var A=i.alternate;if(A!==null){var P=A.child;if(P!==null){A.child=null;do{var M=P.sibling;P.sibling=null,P=M}while(P!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:so(9,i,i.return)}var C=i.sibling;if(C!==null){C.return=i.return,J=C;break e}J=i.return}}var I=t.current;for(J=I;J!==null;){a=J;var R=a.child;if(a.subtreeFlags&2064&&R!==null)R.return=a,J=R;else e:for(a=I;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ql(9,l)}}catch(B){Qe(l,l.return,B)}if(l===a){J=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,J=j;break e}J=l.return}}if(ye=s,Ur(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ol,t)}catch{}r=!0}return r}finally{Se=n,dn.transition=e}}return!1}function zp(t,e,n){e=oi(n,e),e=Cy(t,e,1),t=Cr(t,e,1),e=Vt(),t!==null&&(zo(t,1,e),Wt(t,e))}function Qe(t,e,n){if(t.tag===3)zp(t,t,n);else for(;e!==null;){if(e.tag===3){zp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=oi(n,t),t=ky(e,t,1),e=Cr(e,t,1),t=Vt(),e!==null&&(zo(e,1,t),Wt(e,t));break}}e=e.return}}function m1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(yt&n)===n&&(ot===4||ot===3&&(yt&130023424)===yt&&500>Ke()-hh?ns(t,0):dh|=n),Wt(t,e)}function Gy(t,e){e===0&&(t.mode&1?(e=Ea,Ea<<=1,!(Ea&130023424)&&(Ea=4194304)):e=1);var n=Vt();t=nr(t,e),t!==null&&(zo(t,e,n),Wt(t,n))}function g1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gy(t,n)}function y1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),Gy(t,n)}var Ky;Ky=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,s1(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Me&&e.flags&1048576&&Zg(e,pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qa(t,e),t=e.pendingProps;var s=ni(e,Pt.current);Js(e,n),s=ih(null,e,r,t,s,n);var i=oh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(i=!0,hl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,eh(e),s.updater=Hl,e.stateNode=s,s._reactInternals=e,zc(e,r,t,n),e=$c(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&Qd(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_1(r),t=_n(r,t),s){case 0:e=Uc(null,e,r,t,n);break e;case 1:e=Pp(null,e,r,t,n);break e;case 11:e=kp(null,e,r,t,n);break e;case 14:e=Rp(null,e,r,_n(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Uc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Pp(t,e,r,s,n);case 3:e:{if(Ny(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,iy(t,e),yl(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oi(Error(H(423)),e),e=Dp(t,e,r,n,s);break e}else if(r!==s){s=oi(Error(H(424)),e),e=Dp(t,e,r,n,s);break e}else for(Jt=Ar(e.stateNode.containerInfo.firstChild),en=e,Me=!0,wn=null,n=ry(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),r===s){e=rr(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return oy(e),t===null&&Lc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Nc(r,s)?a=null:i!==null&&Nc(r,i)&&(e.flags|=32),Dy(t,e),bt(t,e,a,n),e.child;case 6:return t===null&&Lc(e),null;case 13:return by(t,e,n);case 4:return th(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=si(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),kp(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,De(ml,r._currentValue),r._currentValue=a,i!==null)if(Tn(i.value,a)){if(i.children===s.children&&!Ut.current){e=rr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Xn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Oc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Oc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Js(e,n),s=fn(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=_n(r,e.pendingProps),s=_n(r.type,s),Rp(t,e,r,s,n);case 15:return Ry(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Qa(t,e),e.tag=1,$t(r)?(t=!0,hl(e)):t=!1,Js(e,n),Ay(e,r,s),zc(e,r,s,n),$c(null,e,r,!0,t,n);case 19:return Vy(t,e,n);case 22:return Py(t,e,n)}throw Error(H(156,e.tag))};function Yy(t,e){return Eg(t,e)}function v1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new v1(t,e,n,r)}function gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _1(t){if(typeof t=="function")return gh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jd)return 11;if(t===Md)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ya(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")gh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ls:return rs(n.children,s,i,e);case Vd:a=8,s|=8;break;case cc:return t=un(12,n,e,s|2),t.elementType=cc,t.lanes=i,t;case dc:return t=un(13,n,e,s),t.elementType=dc,t.lanes=i,t;case hc:return t=un(19,n,e,s),t.elementType=hc,t.lanes=i,t;case og:return Gl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sg:a=10;break e;case ig:a=9;break e;case jd:a=11;break e;case Md:a=14;break e;case gr:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=un(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function rs(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function Gl(t,e,n,r){return t=un(22,t,r,e),t.elementType=og,t.lanes=n,t.stateNode={isHidden:!1},t}function Qu(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function Gu(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ku(0),this.expirationTimes=ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ku(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yh(t,e,n,r,s,i,a,l,u){return t=new x1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=un(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eh(i),t}function w1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xy(t){if(!t)return Mr;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if($t(n))return Xg(t,n,e)}return e}function Jy(t,e,n,r,s,i,a,l,u){return t=yh(n,r,!0,t,s,i,a,l,u),t.context=Xy(null),n=t.current,r=Vt(),s=Rr(n),i=Xn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,zo(t,s,r),Wt(t,r),t}function Kl(t,e,n,r){var s=e.current,i=Vt(),a=Rr(s);return n=Xy(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,a),t!==null&&(En(t,s,a,i),Wa(t,s,a)),a}function Il(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vh(t,e){Bp(t,e),(t=t.alternate)&&Bp(t,e)}function S1(){return null}var Zy=typeof reportError=="function"?reportError:function(t){console.error(t)};function _h(t){this._internalRoot=t}Yl.prototype.render=_h.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Kl(t,e,null,null)};Yl.prototype.unmount=_h.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){Kl(null,t,null,null)}),e[tr]=null}};function Yl(t){this._internalRoot=t}Yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vr.length&&e!==0&&e<vr[n].priority;n++);vr.splice(n,0,t),n===0&&Ng(t)}};function xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Up(){}function E1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Il(a);i.call(h)}}var a=Jy(e,r,t,0,null,!1,!1,"",Up);return t._reactRootContainer=a,t[tr]=a.current,xo(t.nodeType===8?t.parentNode:t),us(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Il(u);l.call(h)}}var u=yh(t,0,!1,null,null,!1,!1,"",Up);return t._reactRootContainer=u,t[tr]=u.current,xo(t.nodeType===8?t.parentNode:t),us(function(){Kl(e,u,n,r)}),u}function Jl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Il(a);l.call(u)}}Kl(e,a,t,s)}else a=E1(n,e,t,s,r);return Il(a)}kg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hi(e.pendingLanes);n!==0&&(Fd(e,n|1),Wt(e,Ke()),!(ye&6)&&(ai=Ke()+500,Ur()))}break;case 13:us(function(){var r=nr(t,1);if(r!==null){var s=Vt();En(r,t,1,s)}}),vh(t,1)}};zd=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=Vt();En(e,t,134217728,n)}vh(t,134217728)}};Rg=function(t){if(t.tag===13){var e=Rr(t),n=nr(t,e);if(n!==null){var r=Vt();En(n,t,e,r)}vh(t,e)}};Pg=function(){return Se};Dg=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Sc=function(t,e,n){switch(e){case"input":if(mc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ul(r);if(!s)throw Error(H(90));lg(r),mc(r,s)}}}break;case"textarea":cg(t,n);break;case"select":e=n.value,e!=null&&Gs(t,!!n.multiple,e,!1)}};yg=fh;vg=us;var T1={usingClientEntryPoint:!1,Events:[Uo,Bs,Ul,mg,gg,fh]},Bi={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I1={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wg(t),t===null?null:t.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||S1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Va.isDisabled&&Va.supportsFiber)try{Ol=Va.inject(I1),Vn=Va}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T1;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(e))throw Error(H(200));return w1(t,e,null,n)};nn.createRoot=function(t,e){if(!xh(t))throw Error(H(299));var n=!1,r="",s=Zy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yh(t,1,!1,null,null,n,!1,r,s),t[tr]=e.current,xo(t.nodeType===8?t.parentNode:t),new _h(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=wg(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return us(t)};nn.hydrate=function(t,e,n){if(!Xl(e))throw Error(H(200));return Jl(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!xh(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Zy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Jy(e,null,t,1,n??null,s,!1,i,a),t[tr]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yl(e)};nn.render=function(t,e,n){if(!Xl(e))throw Error(H(200));return Jl(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Xl(t))throw Error(H(40));return t._reactRootContainer?(us(function(){Jl(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};nn.unstable_batchedUpdates=fh;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xl(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Jl(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function e0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e0)}catch(t){console.error(t)}}e0(),eg.exports=nn;var A1=eg.exports,t0,$p=A1;t0=$p.createRoot,$p.hydrateRoot;var Wp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},C1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,x=h&63;u||(x=64,a||(g=64)),r.push(n[p],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new k1;const g=i<<2|l>>4;if(r.push(g),h!==64){const x=l<<4&240|h>>2;if(r.push(x),m!==64){const A=h<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R1=function(t){const e=n0(t);return r0.encodeByteArray(e,!0)},s0=function(t){return R1(t).replace(/\./g,"")},P1=function(t){try{return r0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=()=>D1().__FIREBASE_DEFAULTS__,b1=()=>{if(typeof process>"u"||typeof Wp>"u")return;const t=Wp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&P1(t[1]);return e&&JSON.parse(e)},wh=()=>{try{return N1()||b1()||V1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j1=t=>{var e,n;return(n=(e=wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},M1=t=>{const e=j1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i0=()=>{var t;return(t=wh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F1(){var t;const e=(t=wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z1(){return!F1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B1(){try{return typeof indexedDB=="object"}catch{return!1}}function U1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="FirebaseError";class vi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$1,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,o0.prototype.create)}}class o0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?W1(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new vi(s,l,r)}}function W1(t,e){return t.replace(H1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const H1=/\{\$([^}]+)}/g;function Al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Hp(i)&&Hp(a)){if(!Al(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Hp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new L1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G1(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q1(t){return t===Xr?void 0:t}function G1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const Y1={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},X1=ge.INFO,J1={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},Z1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=J1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a0{constructor(e){this.name=e,this._logLevel=X1,this._logHandler=Z1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const ew=(t,e)=>e.some(n=>t instanceof n);let qp,Qp;function tw(){return qp||(qp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nw(){return Qp||(Qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l0=new WeakMap,td=new WeakMap,u0=new WeakMap,Ku=new WeakMap,Sh=new WeakMap;function rw(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Dr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&l0.set(n,t)}).catch(()=>{}),Sh.set(e,t),e}function sw(t){if(td.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});td.set(t,e)}let nd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return td.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iw(t){nd=t(nd)}function ow(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yu(this),e,...n);return u0.set(r,e.sort?e.sort():[e]),Dr(r)}:nw().includes(t)?function(...e){return t.apply(Yu(this),e),Dr(l0.get(this))}:function(...e){return Dr(t.apply(Yu(this),e))}}function aw(t){return typeof t=="function"?ow(t):(t instanceof IDBTransaction&&sw(t),ew(t,tw())?new Proxy(t,nd):t)}function Dr(t){if(t instanceof IDBRequest)return rw(t);if(Ku.has(t))return Ku.get(t);const e=aw(t);return e!==t&&(Ku.set(t,e),Sh.set(e,t)),e}const Yu=t=>Sh.get(t);function lw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Dr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Dr(a.result),u.oldVersion,u.newVersion,Dr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const uw=["get","getKey","getAll","getAllKeys","count"],cw=["put","add","delete","clear"],Xu=new Map;function Gp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xu.get(e))return Xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=cw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uw.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Xu.set(e,i),i}iw(t=>({...t,get:(e,n,r)=>Gp(e,n)||t.get(e,n,r),has:(e,n)=>!!Gp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rd="@firebase/app",Kp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new a0("@firebase/app"),fw="@firebase/app-compat",pw="@firebase/analytics-compat",mw="@firebase/analytics",gw="@firebase/app-check-compat",yw="@firebase/app-check",vw="@firebase/auth",_w="@firebase/auth-compat",xw="@firebase/database",ww="@firebase/data-connect",Sw="@firebase/database-compat",Ew="@firebase/functions",Tw="@firebase/functions-compat",Iw="@firebase/installations",Aw="@firebase/installations-compat",Cw="@firebase/messaging",kw="@firebase/messaging-compat",Rw="@firebase/performance",Pw="@firebase/performance-compat",Dw="@firebase/remote-config",Nw="@firebase/remote-config-compat",bw="@firebase/storage",Vw="@firebase/storage-compat",jw="@firebase/firestore",Mw="@firebase/vertexai-preview",Lw="@firebase/firestore-compat",Ow="firebase",Fw="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="[DEFAULT]",zw={[rd]:"fire-core",[fw]:"fire-core-compat",[mw]:"fire-analytics",[pw]:"fire-analytics-compat",[yw]:"fire-app-check",[gw]:"fire-app-check-compat",[vw]:"fire-auth",[_w]:"fire-auth-compat",[xw]:"fire-rtdb",[ww]:"fire-data-connect",[Sw]:"fire-rtdb-compat",[Ew]:"fire-fn",[Tw]:"fire-fn-compat",[Iw]:"fire-iid",[Aw]:"fire-iid-compat",[Cw]:"fire-fcm",[kw]:"fire-fcm-compat",[Rw]:"fire-perf",[Pw]:"fire-perf-compat",[Dw]:"fire-rc",[Nw]:"fire-rc-compat",[bw]:"fire-gcs",[Vw]:"fire-gcs-compat",[jw]:"fire-fst",[Lw]:"fire-fst-compat",[Mw]:"fire-vertex","fire-js":"fire-js",[Ow]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Map,Bw=new Map,id=new Map;function Yp(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ro(t){const e=t.name;if(id.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;id.set(e,t);for(const n of Cl.values())Yp(n,t);for(const n of Bw.values())Yp(n,t);return!0}function c0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new o0("app","Firebase",Uw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=Fw;function d0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=i0()),!n)throw Nr.create("no-options");const i=Cl.get(s);if(i){if(Al(n,i.options)&&Al(r,i.config))return i;throw Nr.create("duplicate-app",{appName:s})}const a=new K1(s);for(const u of id.values())a.addComponent(u);const l=new $w(n,r,a);return Cl.set(s,l),l}function Hw(t=sd){const e=Cl.get(t);if(!e&&t===sd&&i0())return d0();if(!e)throw Nr.create("no-app",{appName:t});return e}function br(t,e,n){var r;let s=(r=zw[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}Ro(new li(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebase-heartbeat-database",Qw=1,Po="firebase-heartbeat-store";let Ju=null;function h0(){return Ju||(Ju=lw(qw,Qw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),Ju}async function Gw(t){try{const n=(await h0()).transaction(Po),r=await n.objectStore(Po).get(f0(t));return await n.done,r}catch(e){if(e instanceof vi)sr.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function Xp(t,e){try{const r=(await h0()).transaction(Po,"readwrite");await r.objectStore(Po).put(e,f0(t)),await r.done}catch(n){if(n instanceof vi)sr.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function f0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=1024,Yw=30*24*60*60*1e3;class Xw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=Yw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jp(),{heartbeatsToSend:r,unsentEntries:s}=Jw(this._heartbeatsCache.heartbeats),i=s0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return sr.warn(n),""}}}function Jp(){return new Date().toISOString().substring(0,10)}function Jw(t,e=Kw){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Zp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B1()?U1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zp(t){return s0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){Ro(new li("platform-logger",e=>new dw(e),"PRIVATE")),Ro(new li("heartbeat",e=>new Xw(e),"PRIVATE")),br(rd,Kp,t),br(rd,Kp,"esm2017"),br("fire-js","")}eS("");var tS="firebase",nS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(tS,nS,"app");var em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,p0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function S(){}S.prototype=v.prototype,w.D=v.prototype,w.prototype=new S,w.prototype.constructor=w,w.C=function(E,_,k){for(var T=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)T[pe-2]=arguments[pe];return v.prototype[_].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,S){S||(S=0);var E=Array(16);if(typeof v=="string")for(var _=0;16>_;++_)E[_]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(_=0;16>_;++_)E[_]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=w.g[0],S=w.g[1],_=w.g[2];var k=w.g[3],T=v+(k^S&(_^k))+E[0]+3614090360&4294967295;v=S+(T<<7&4294967295|T>>>25),T=k+(_^v&(S^_))+E[1]+3905402710&4294967295,k=v+(T<<12&4294967295|T>>>20),T=_+(S^k&(v^S))+E[2]+606105819&4294967295,_=k+(T<<17&4294967295|T>>>15),T=S+(v^_&(k^v))+E[3]+3250441966&4294967295,S=_+(T<<22&4294967295|T>>>10),T=v+(k^S&(_^k))+E[4]+4118548399&4294967295,v=S+(T<<7&4294967295|T>>>25),T=k+(_^v&(S^_))+E[5]+1200080426&4294967295,k=v+(T<<12&4294967295|T>>>20),T=_+(S^k&(v^S))+E[6]+2821735955&4294967295,_=k+(T<<17&4294967295|T>>>15),T=S+(v^_&(k^v))+E[7]+4249261313&4294967295,S=_+(T<<22&4294967295|T>>>10),T=v+(k^S&(_^k))+E[8]+1770035416&4294967295,v=S+(T<<7&4294967295|T>>>25),T=k+(_^v&(S^_))+E[9]+2336552879&4294967295,k=v+(T<<12&4294967295|T>>>20),T=_+(S^k&(v^S))+E[10]+4294925233&4294967295,_=k+(T<<17&4294967295|T>>>15),T=S+(v^_&(k^v))+E[11]+2304563134&4294967295,S=_+(T<<22&4294967295|T>>>10),T=v+(k^S&(_^k))+E[12]+1804603682&4294967295,v=S+(T<<7&4294967295|T>>>25),T=k+(_^v&(S^_))+E[13]+4254626195&4294967295,k=v+(T<<12&4294967295|T>>>20),T=_+(S^k&(v^S))+E[14]+2792965006&4294967295,_=k+(T<<17&4294967295|T>>>15),T=S+(v^_&(k^v))+E[15]+1236535329&4294967295,S=_+(T<<22&4294967295|T>>>10),T=v+(_^k&(S^_))+E[1]+4129170786&4294967295,v=S+(T<<5&4294967295|T>>>27),T=k+(S^_&(v^S))+E[6]+3225465664&4294967295,k=v+(T<<9&4294967295|T>>>23),T=_+(v^S&(k^v))+E[11]+643717713&4294967295,_=k+(T<<14&4294967295|T>>>18),T=S+(k^v&(_^k))+E[0]+3921069994&4294967295,S=_+(T<<20&4294967295|T>>>12),T=v+(_^k&(S^_))+E[5]+3593408605&4294967295,v=S+(T<<5&4294967295|T>>>27),T=k+(S^_&(v^S))+E[10]+38016083&4294967295,k=v+(T<<9&4294967295|T>>>23),T=_+(v^S&(k^v))+E[15]+3634488961&4294967295,_=k+(T<<14&4294967295|T>>>18),T=S+(k^v&(_^k))+E[4]+3889429448&4294967295,S=_+(T<<20&4294967295|T>>>12),T=v+(_^k&(S^_))+E[9]+568446438&4294967295,v=S+(T<<5&4294967295|T>>>27),T=k+(S^_&(v^S))+E[14]+3275163606&4294967295,k=v+(T<<9&4294967295|T>>>23),T=_+(v^S&(k^v))+E[3]+4107603335&4294967295,_=k+(T<<14&4294967295|T>>>18),T=S+(k^v&(_^k))+E[8]+1163531501&4294967295,S=_+(T<<20&4294967295|T>>>12),T=v+(_^k&(S^_))+E[13]+2850285829&4294967295,v=S+(T<<5&4294967295|T>>>27),T=k+(S^_&(v^S))+E[2]+4243563512&4294967295,k=v+(T<<9&4294967295|T>>>23),T=_+(v^S&(k^v))+E[7]+1735328473&4294967295,_=k+(T<<14&4294967295|T>>>18),T=S+(k^v&(_^k))+E[12]+2368359562&4294967295,S=_+(T<<20&4294967295|T>>>12),T=v+(S^_^k)+E[5]+4294588738&4294967295,v=S+(T<<4&4294967295|T>>>28),T=k+(v^S^_)+E[8]+2272392833&4294967295,k=v+(T<<11&4294967295|T>>>21),T=_+(k^v^S)+E[11]+1839030562&4294967295,_=k+(T<<16&4294967295|T>>>16),T=S+(_^k^v)+E[14]+4259657740&4294967295,S=_+(T<<23&4294967295|T>>>9),T=v+(S^_^k)+E[1]+2763975236&4294967295,v=S+(T<<4&4294967295|T>>>28),T=k+(v^S^_)+E[4]+1272893353&4294967295,k=v+(T<<11&4294967295|T>>>21),T=_+(k^v^S)+E[7]+4139469664&4294967295,_=k+(T<<16&4294967295|T>>>16),T=S+(_^k^v)+E[10]+3200236656&4294967295,S=_+(T<<23&4294967295|T>>>9),T=v+(S^_^k)+E[13]+681279174&4294967295,v=S+(T<<4&4294967295|T>>>28),T=k+(v^S^_)+E[0]+3936430074&4294967295,k=v+(T<<11&4294967295|T>>>21),T=_+(k^v^S)+E[3]+3572445317&4294967295,_=k+(T<<16&4294967295|T>>>16),T=S+(_^k^v)+E[6]+76029189&4294967295,S=_+(T<<23&4294967295|T>>>9),T=v+(S^_^k)+E[9]+3654602809&4294967295,v=S+(T<<4&4294967295|T>>>28),T=k+(v^S^_)+E[12]+3873151461&4294967295,k=v+(T<<11&4294967295|T>>>21),T=_+(k^v^S)+E[15]+530742520&4294967295,_=k+(T<<16&4294967295|T>>>16),T=S+(_^k^v)+E[2]+3299628645&4294967295,S=_+(T<<23&4294967295|T>>>9),T=v+(_^(S|~k))+E[0]+4096336452&4294967295,v=S+(T<<6&4294967295|T>>>26),T=k+(S^(v|~_))+E[7]+1126891415&4294967295,k=v+(T<<10&4294967295|T>>>22),T=_+(v^(k|~S))+E[14]+2878612391&4294967295,_=k+(T<<15&4294967295|T>>>17),T=S+(k^(_|~v))+E[5]+4237533241&4294967295,S=_+(T<<21&4294967295|T>>>11),T=v+(_^(S|~k))+E[12]+1700485571&4294967295,v=S+(T<<6&4294967295|T>>>26),T=k+(S^(v|~_))+E[3]+2399980690&4294967295,k=v+(T<<10&4294967295|T>>>22),T=_+(v^(k|~S))+E[10]+4293915773&4294967295,_=k+(T<<15&4294967295|T>>>17),T=S+(k^(_|~v))+E[1]+2240044497&4294967295,S=_+(T<<21&4294967295|T>>>11),T=v+(_^(S|~k))+E[8]+1873313359&4294967295,v=S+(T<<6&4294967295|T>>>26),T=k+(S^(v|~_))+E[15]+4264355552&4294967295,k=v+(T<<10&4294967295|T>>>22),T=_+(v^(k|~S))+E[6]+2734768916&4294967295,_=k+(T<<15&4294967295|T>>>17),T=S+(k^(_|~v))+E[13]+1309151649&4294967295,S=_+(T<<21&4294967295|T>>>11),T=v+(_^(S|~k))+E[4]+4149444226&4294967295,v=S+(T<<6&4294967295|T>>>26),T=k+(S^(v|~_))+E[11]+3174756917&4294967295,k=v+(T<<10&4294967295|T>>>22),T=_+(v^(k|~S))+E[2]+718787259&4294967295,_=k+(T<<15&4294967295|T>>>17),T=S+(k^(_|~v))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(_+(T<<21&4294967295|T>>>11))&4294967295,w.g[2]=w.g[2]+_&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var S=v-this.blockSize,E=this.B,_=this.h,k=0;k<v;){if(_==0)for(;k<=S;)s(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<v;)if(E[_++]=w.charCodeAt(k++),_==this.blockSize){s(this,E),_=0;break}}else for(;k<v;)if(E[_++]=w[k++],_==this.blockSize){s(this,E),_=0;break}}this.h=_,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var S=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=S&255,S/=256;for(this.u(w),w=Array(16),v=S=0;4>v;++v)for(var E=0;32>E;E+=8)w[S++]=this.g[v]>>>E&255;return w};function i(w,v){var S=l;return Object.prototype.hasOwnProperty.call(S,w)?S[w]:S[w]=v(w)}function a(w,v){this.h=v;for(var S=[],E=!0,_=w.length-1;0<=_;_--){var k=w[_]|0;E&&k==v||(S[_]=k,E=!1)}this.g=S}var l={};function u(w){return-128<=w&&128>w?i(w,function(v){return new a([v|0],0>v?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return M(h(-w));for(var v=[],S=1,E=0;w>=S;E++)v[E]=w/S|0,S*=4294967296;return new a(v,0)}function p(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return M(p(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(v,8)),E=m,_=0;_<w.length;_+=8){var k=Math.min(8,w.length-_),T=parseInt(w.substring(_,_+k),v);8>k?(k=h(Math.pow(v,k)),E=E.j(k).add(h(T))):(E=E.j(S),E=E.add(h(T)))}return E}var m=u(0),g=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-M(this).m();for(var w=0,v=1,S=0;S<this.g.length;S++){var E=this.i(S);w+=(0<=E?E:4294967296+E)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(P(this))return"-"+M(this).toString(w);for(var v=h(Math.pow(w,6)),S=this,E="";;){var _=j(S,v).g;S=C(S,_.j(v));var k=((0<S.g.length?S.g[0]:S.h)>>>0).toString(w);if(S=_,A(S))return k+E;for(;6>k.length;)k="0"+k;E=k+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function P(w){return w.h==-1}t.l=function(w){return w=C(this,w),P(w)?-1:A(w)?0:1};function M(w){for(var v=w.g.length,S=[],E=0;E<v;E++)S[E]=~w.g[E];return new a(S,~w.h).add(g)}t.abs=function(){return P(this)?M(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),S=[],E=0,_=0;_<=v;_++){var k=E+(this.i(_)&65535)+(w.i(_)&65535),T=(k>>>16)+(this.i(_)>>>16)+(w.i(_)>>>16);E=T>>>16,k&=65535,T&=65535,S[_]=T<<16|k}return new a(S,S[S.length-1]&-2147483648?-1:0)};function C(w,v){return w.add(M(v))}t.j=function(w){if(A(this)||A(w))return m;if(P(this))return P(w)?M(this).j(M(w)):M(M(this).j(w));if(P(w))return M(this.j(M(w)));if(0>this.l(x)&&0>w.l(x))return h(this.m()*w.m());for(var v=this.g.length+w.g.length,S=[],E=0;E<2*v;E++)S[E]=0;for(E=0;E<this.g.length;E++)for(var _=0;_<w.g.length;_++){var k=this.i(E)>>>16,T=this.i(E)&65535,pe=w.i(_)>>>16,oe=w.i(_)&65535;S[2*E+2*_]+=T*oe,I(S,2*E+2*_),S[2*E+2*_+1]+=k*oe,I(S,2*E+2*_+1),S[2*E+2*_+1]+=T*pe,I(S,2*E+2*_+1),S[2*E+2*_+2]+=k*pe,I(S,2*E+2*_+2)}for(E=0;E<v;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=v;E<2*v;E++)S[E]=0;return new a(S,0)};function I(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function R(w,v){this.g=w,this.h=v}function j(w,v){if(A(v))throw Error("division by zero");if(A(w))return new R(m,m);if(P(w))return v=j(M(w),v),new R(M(v.g),M(v.h));if(P(v))return v=j(w,M(v)),new R(M(v.g),v.h);if(30<w.g.length){if(P(w)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var S=g,E=v;0>=E.l(w);)S=B(S),E=B(E);var _=z(S,1),k=z(E,1);for(E=z(E,2),S=z(S,2);!A(E);){var T=k.add(E);0>=T.l(w)&&(_=_.add(S),k=T),E=z(E,1),S=z(S,1)}return v=C(w,_.j(v)),new R(_,v)}for(_=m;0<=w.l(v);){for(S=Math.max(1,Math.floor(w.m()/v.m())),E=Math.ceil(Math.log(S)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),k=h(S),T=k.j(v);P(T)||0<T.l(w);)S-=E,k=h(S),T=k.j(v);A(k)&&(k=g),_=_.add(k),w=C(w,T)}return new R(_,w)}t.A=function(w){return j(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),S=[],E=0;E<v;E++)S[E]=this.i(E)&w.i(E);return new a(S,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),S=[],E=0;E<v;E++)S[E]=this.i(E)|w.i(E);return new a(S,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),S=[],E=0;E<v;E++)S[E]=this.i(E)^w.i(E);return new a(S,this.h^w.h)};function B(w){for(var v=w.g.length+1,S=[],E=0;E<v;E++)S[E]=w.i(E)<<1|w.i(E-1)>>>31;return new a(S,w.h)}function z(w,v){var S=v>>5;v%=32;for(var E=w.g.length-S,_=[],k=0;k<E;k++)_[k]=0<v?w.i(k+S)>>>v|w.i(k+S+1)<<32-v:w.i(k+S);return new a(_,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,ss=a}).apply(typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{});var ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m0,Qi,g0,Xa,od,y0,v0,_0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ja=="object"&&ja];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var f=r;o=o.split(".");for(var y=0;y<o.length-1;y++){var D=o[y];if(!(D in f))break e;f=f[D]}o=o[o.length-1],y=f[o],c=c(y),c!=y&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var f=0,y=!1,D={next:function(){if(!y&&f<o.length){var b=f++;return{value:c(b,o[b]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function p(o,c,f){return o.call.apply(o.bind,arguments)}function m(o,c,f){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),o.apply(c,D)}}return function(){return o.apply(c,arguments)}}function g(o,c,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function x(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function A(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(y,D,b){for(var G=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)G[Ae-2]=arguments[Ae];return c.prototype[D].apply(y,G)}}function P(o){const c=o.length;if(0<c){const f=Array(c);for(let y=0;y<c;y++)f[y]=o[y];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const D=o.length||0,b=y.length||0;o.length=D+b;for(let G=0;G<b;G++)o[D+G]=y[G]}else o.push(y)}}class C{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function I(o){return/^[\s\xa0]*$/.test(o)}function R(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function j(o){return j[" "](o),o}j[" "]=function(){};var B=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function z(o,c,f){for(const y in o)c.call(f,o[y],y,o)}function w(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function v(o){const c={};for(const f in o)c[f]=o[f];return c}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,c){let f,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(f in y)o[f]=y[f];for(let b=0;b<S.length;b++)f=S[b],Object.prototype.hasOwnProperty.call(y,f)&&(o[f]=y[f])}}function _(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function k(o){l.setTimeout(()=>{throw o},0)}function T(){var o=F;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class pe{constructor(){this.h=this.g=null}add(c,f){const y=oe.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var oe=new C(()=>new ae,o=>o.reset());class ae{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let q,N=!1,F=new pe,L=()=>{const o=l.Promise.resolve(void 0);q=()=>{o.then($)}};var $=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(f){k(f)}var c=oe;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}N=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function xe(o,c){if(re.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(B){e:{try{j(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:he[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&xe.aa.h.call(this)}}A(xe,re);var he={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Le=0;function we(o,c,f,y,D){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=D,this.key=++Le,this.da=this.fa=!1}function ee(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ke(o){this.src=o,this.g={},this.h=0}ke.prototype.add=function(o,c,f,y,D){var b=o.toString();o=this.g[b],o||(o=this.g[b]=[],this.h++);var G=Re(o,c,y,D);return-1<G?(c=o[G],f||(c.fa=!1)):(c=new we(c,this.src,b,!!y,D),c.fa=f,o.push(c)),c};function Oe(o,c){var f=c.type;if(f in o.g){var y=o.g[f],D=Array.prototype.indexOf.call(y,c,void 0),b;(b=0<=D)&&Array.prototype.splice.call(y,D,1),b&&(ee(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Re(o,c,f,y){for(var D=0;D<o.length;++D){var b=o[D];if(!b.da&&b.listener==c&&b.capture==!!f&&b.ha==y)return D}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Ht={};function qt(o,c,f,y,D){if(Array.isArray(c)){for(var b=0;b<c.length;b++)qt(o,c[b],f,y,D);return null}return f=Jo(f),o&&o[ce]?o.K(c,f,h(y)?!!y.capture:!1,D):Qt(o,c,f,!1,y,D)}function Qt(o,c,f,y,D,b){if(!c)throw Error("Invalid event type");var G=h(D)?!!D.capture:!!D,Ae=Pe(o);if(Ae||(o[wt]=Ae=new ke(o)),f=Ae.add(c,f,y,G,b),f.proxy)return f;if(y=Gt(),f.proxy=y,y.src=o,y.listener=f,o.addEventListener)Ce||(D=G),D===void 0&&(D=!1),o.addEventListener(c.toString(),y,D);else if(o.attachEvent)o.attachEvent(Cn(c.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Gt(){function o(f){return c.call(o.src,o.listener,f)}const c=cr;return o}function lr(o,c,f,y,D){if(Array.isArray(c))for(var b=0;b<c.length;b++)lr(o,c[b],f,y,D);else y=h(y)?!!y.capture:!!y,f=Jo(f),o&&o[ce]?(o=o.i,c=String(c).toString(),c in o.g&&(b=o.g[c],f=Re(b,f,y,D),-1<f&&(ee(b[f]),Array.prototype.splice.call(b,f,1),b.length==0&&(delete o.g[c],o.h--)))):o&&(o=Pe(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Re(c,f,y,D)),(f=-1<o?c[o]:null)&&ur(f))}function ur(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[ce])Oe(c.i,o);else{var f=o.type,y=o.proxy;c.removeEventListener?c.removeEventListener(f,y,o.capture):c.detachEvent?c.detachEvent(Cn(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=Pe(c))?(Oe(f,o),f.h==0&&(f.src=null,c[wt]=null)):ee(o)}}}function Cn(o){return o in Ht?Ht[o]:Ht[o]="on"+o}function cr(o,c){if(o.da)o=!0;else{c=new xe(c,this);var f=o.listener,y=o.ha||o.src;o.fa&&ur(o),o=f.call(y,c)}return o}function Pe(o){return o=o[wt],o instanceof ke?o:null}var Ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jo(o){return typeof o=="function"?o:(o[Ei]||(o[Ei]=function(c){return o.handleEvent(c)}),o[Ei])}function lt(){X.call(this),this.i=new ke(this),this.M=this,this.F=null}A(lt,X),lt.prototype[ce]=!0,lt.prototype.removeEventListener=function(o,c,f,y){lr(this,o,c,f,y)};function Ye(o,c){var f,y=o.F;if(y)for(f=[];y;y=y.F)f.push(y);if(o=o.M,y=c.type||c,typeof c=="string")c=new re(c,o);else if(c instanceof re)c.target=c.target||o;else{var D=c;c=new re(y,o),E(c,D)}if(D=!0,f)for(var b=f.length-1;0<=b;b--){var G=c.g=f[b];D=Wr(G,y,!0,c)&&D}if(G=c.g=o,D=Wr(G,y,!0,c)&&D,D=Wr(G,y,!1,c)&&D,f)for(b=0;b<f.length;b++)G=c.g=f[b],D=Wr(G,y,!1,c)&&D}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],y=0;y<f.length;y++)ee(f[y]);delete o.g[c],o.h--}}this.F=null},lt.prototype.K=function(o,c,f,y){return this.i.add(String(o),c,!1,f,y)},lt.prototype.L=function(o,c,f,y){return this.i.add(String(o),c,!0,f,y)};function Wr(o,c,f,y){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,b=0;b<c.length;++b){var G=c[b];if(G&&!G.da&&G.capture==f){var Ae=G.listener,ft=G.ha||G.src;G.fa&&Oe(o.i,G),D=Ae.call(ft,y)!==!1&&D}}return D&&!y.defaultPrevented}function vs(o,c,f){if(typeof o=="function")f&&(o=g(o,f));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Zo(o){o.g=vs(()=>{o.g=null,o.i&&(o.i=!1,Zo(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Te extends X{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(o){X.call(this),this.h=o,this.g={}}A(kn,X);var Hr=[];function _s(o){z(o.g,function(c,f){this.g.hasOwnProperty(f)&&ur(c)},o),o.g={}}kn.prototype.N=function(){kn.aa.N.call(this),_s(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ea=l.JSON.stringify,ta=l.JSON.parse,of=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function xs(){}xs.prototype.h=null;function Rn(o){return o.h||(o.h=o.i())}function ws(){}var sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ss(){re.call(this,"d")}A(Ss,re);function na(){re.call(this,"c")}A(na,re);var zn={},mu=null;function Ti(){return mu=mu||new lt}zn.La="serverreachability";function Es(o){re.call(this,zn.La,o)}A(Es,re);function mn(o){const c=Ti();Ye(c,new Es(c))}zn.STAT_EVENT="statevent";function Ts(o,c){re.call(this,zn.STAT_EVENT,o),this.stat=c}A(Ts,re);function ut(o){const c=Ti();Ye(c,new Ts(c,o))}zn.Ma="timingevent";function dr(o,c){re.call(this,zn.Ma,o),this.size=c}A(dr,re);function gn(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function qr(){this.g=!0}qr.prototype.xa=function(){this.g=!1};function ra(o,c,f,y,D,b){o.info(function(){if(o.g)if(b)for(var G="",Ae=b.split("&"),ft=0;ft<Ae.length;ft++){var ve=Ae[ft].split("=");if(1<ve.length){var Et=ve[0];ve=ve[1];var Tt=Et.split("_");G=2<=Tt.length&&Tt[1]=="type"?G+(Et+"="+ve+"&"):G+(Et+"=redacted&")}}else G=null;else G=b;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+c+`
`+f+`
`+G})}function sa(o,c,f,y,D,b,G){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+c+`
`+f+`
`+b+" "+G})}function Bn(o,c,f,y){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+yu(o,f)+(y?" "+y:"")})}function gu(o,c){o.info(function(){return"TIMEOUT: "+c})}qr.prototype.info=function(){};function yu(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var y=f[o];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var b=D[0];if(b!="noop"&&b!="stop"&&b!="close")for(var G=1;G<D.length;G++)D[G]=""}}}}return ea(f)}catch{return c}}var hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Is={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function Un(){}A(Un,xs),Un.prototype.g=function(){return new XMLHttpRequest},Un.prototype.i=function(){return{}},Pn=new Un;function St(o,c,f,y){this.j=o,this.i=c,this.l=f,this.R=y||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ia}function ia(){this.i=null,this.g="",this.h=!1}var K={},Q={};function W(o,c,f){o.L=1,o.v=ua($n(c)),o.m=f,o.P=!0,te(o,null)}function te(o,c){o.F=Date.now(),Fe(o),o.A=$n(o.v);var f=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),ff(f.i,"t",y),o.C=0,f=o.j.J,o.h=new ia,o.g=Df(o.j,f?c:null,!o.m),0<o.O&&(o.M=new Te(g(o.Y,o,o.g),o.O)),c=o.U,f=o.g,y=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(Hr[0]=D.toString()),D=Hr);for(var b=0;b<D.length;b++){var G=qt(f,D[b],y||c.handleEvent,!1,c.h||c);if(!G)break;c.g[G.key]=G}c=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),mn(),ra(o.i,o.u,o.A,o.l,o.R,o.m)}St.prototype.ca=function(o){o=o.target;const c=this.M;c&&Wn(o)==3?c.j():this.Y(o)},St.prototype.Y=function(o){try{if(o==this.g)e:{const Tt=Wn(this.g);var c=this.g.Ba();const Ps=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||xf(this.g)))){this.J||Tt!=4||c==7||(c==8||0>=Ps?mn(3):mn(2)),Xe(this);var f=this.g.Z();this.X=f;t:if(Ie(this)){var y=xf(this.g);o="";var D=y.length,b=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){st(this),Je(this);var G="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,o+=this.h.i.decode(y[c],{stream:!(b&&c==D-1)});y.length=0,this.h.g+=o,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,sa(this.i,this.u,this.A,this.l,this.R,Tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,ft=this.g;if((Ae=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ae)){var ve=Ae;break t}}ve=null}if(f=ve)Bn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ii(this,f);else{this.o=!1,this.s=3,ut(12),st(this),Je(this);break e}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<G.length;)if(yn=He(this,G),yn==Q){Tt==4&&(this.s=4,ut(14),f=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==K){this.s=4,ut(15),Bn(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else Bn(this.i,this.l,yn,null),Ii(this,yn);if(Ie(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||G.length!=0||this.h.h||(this.s=1,ut(16),f=!1),this.o=this.o&&f,!f)Bn(this.i,this.l,G,"[Invalid Chunked Response]"),st(this),Je(this);else if(0<G.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),wu(Et),Et.M=!0,ut(11))}}else Bn(this.i,this.l,G,null),Ii(this,G);Tt==4&&st(this),this.o&&!this.J&&(Tt==4?Cf(this.j,this):(this.o=!1,Fe(this)))}else Zv(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),st(this),Je(this)}}}catch{}finally{}};function Ie(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function He(o,c){var f=o.C,y=c.indexOf(`
`,f);return y==-1?Q:(f=Number(c.substring(f,y)),isNaN(f)?K:(y+=1,y+f>c.length?Q:(c=c.slice(y,y+f),o.C=y+f,c)))}St.prototype.cancel=function(){this.J=!0,st(this)};function Fe(o){o.S=Date.now()+o.I,Dt(o,o.I)}function Dt(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=gn(g(o.ba,o),c)}function Xe(o){o.B&&(l.clearTimeout(o.B),o.B=null)}St.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(gu(this.i,this.A),this.L!=2&&(mn(),ut(17)),st(this),this.s=2,Je(this)):Dt(this,this.S-o)};function Je(o){o.j.G==0||o.J||Cf(o.j,o)}function st(o){Xe(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,_s(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ii(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||ze(f.h,o))){if(!o.K&&ze(f.h,o)&&f.G==3){try{var y=f.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)ma(f),fa(f);else break e;xu(f),ut(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=gn(g(f.Za,f),6e3));if(1>=se(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Gr(f,11)}else if((o.K||f.g==o)&&ma(f),!I(c))for(D=f.Da.g.parse(c),c=0;c<D.length;c++){let ve=D[c];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];const Et=ve[3];Et!=null&&(f.la=Et,f.j.info("VER="+f.la));const Tt=ve[4];Tt!=null&&(f.Aa=Tt,f.j.info("SVER="+f.Aa));const Ps=ve[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(y=1.5*Ps,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const yn=o.g;if(yn){const ya=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var b=y.h;b.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Nt(b,b.h),b.h=null))}if(y.D){const Su=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Su&&(y.ya=Su,Ne(y.I,y.D,Su))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var G=o;if(y.qa=Pf(y,y.J?y.ia:null,y.W),G.K){Cs(y.h,G);var Ae=G,ft=y.L;ft&&(Ae.I=ft),Ae.B&&(Xe(Ae),Fe(Ae)),y.g=G}else If(y);0<f.i.length&&pa(f)}else ve[0]!="stop"&&ve[0]!="close"||Gr(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Gr(f,7):_u(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}mn(4)}catch{}}var Ai=class{constructor(o,c){this.g=o,this.map=c}};function Kt(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function As(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function se(o){return o.h?1:o.g?o.g.size:0}function ze(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Nt(o,c){o.g?o.g.add(c):o.h=c}function Cs(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Kt.prototype.cancel=function(){if(this.i=oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function oa(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return P(o.i)}function Ov(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,y=0;y<f;y++)c.push(o[y]);return c}c=[],f=0;for(y in o)c[f++]=o[y];return c}function Fv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const y in o)c[f++]=y;return c}}}function af(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=Fv(o),y=Ov(o),D=y.length,b=0;b<D;b++)c.call(void 0,y[b],f&&f[b],o)}var lf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zv(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var y=o[f].indexOf("="),D=null;if(0<=y){var b=o[f].substring(0,y);D=o[f].substring(y+1)}else b=o[f];c(b,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Qr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Qr){this.h=o.h,aa(this,o.j),this.o=o.o,this.g=o.g,la(this,o.s),this.l=o.l;var c=o.i,f=new Ri;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),uf(this,f),this.m=o.m}else o&&(c=String(o).match(lf))?(this.h=!1,aa(this,c[1]||"",!0),this.o=Ci(c[2]||""),this.g=Ci(c[3]||"",!0),la(this,c[4]),this.l=Ci(c[5]||"",!0),uf(this,c[6]||"",!0),this.m=Ci(c[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}Qr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(ki(c,cf,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ki(c,cf,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ki(f,f.charAt(0)=="/"?$v:Uv,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ki(f,Hv)),o.join("")};function $n(o){return new Qr(o)}function aa(o,c,f){o.j=f?Ci(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function la(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function uf(o,c,f){c instanceof Ri?(o.i=c,qv(o.i,o.h)):(f||(c=ki(c,Wv)),o.i=new Ri(c,o.h))}function Ne(o,c,f){o.i.set(c,f)}function ua(o){return Ne(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ci(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ki(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Bv),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Bv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var cf=/[#\/\?@]/g,Uv=/[#\?:]/g,$v=/[#\?]/g,Wv=/[#\?@]/g,Hv=/#/g;function Ri(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function fr(o){o.g||(o.g=new Map,o.h=0,o.i&&zv(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Ri.prototype,t.add=function(o,c){fr(this),this.i=null,o=ks(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function df(o,c){fr(o),c=ks(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function hf(o,c){return fr(o),c=ks(o,c),o.g.has(c)}t.forEach=function(o,c){fr(this),this.g.forEach(function(f,y){f.forEach(function(D){o.call(c,D,y,this)},this)},this)},t.na=function(){fr(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let y=0;y<c.length;y++){const D=o[y];for(let b=0;b<D.length;b++)f.push(c[y])}return f},t.V=function(o){fr(this);let c=[];if(typeof o=="string")hf(this,o)&&(c=c.concat(this.g.get(ks(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return fr(this),this.i=null,o=ks(this,o),hf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function ff(o,c,f){df(o,c),0<f.length&&(o.i=null,o.g.set(ks(o,c),P(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var y=c[f];const b=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var D=b;G[y]!==""&&(D+="="+encodeURIComponent(String(G[y]))),o.push(D)}}return this.i=o.join("&")};function ks(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function qv(o,c){c&&!o.j&&(fr(o),o.i=null,o.g.forEach(function(f,y){var D=y.toLowerCase();y!=D&&(df(this,y),ff(this,D,f))},o)),o.j=c}function Qv(o,c){const f=new qr;if(l.Image){const y=new Image;y.onload=x(pr,f,"TestLoadImage: loaded",!0,c,y),y.onerror=x(pr,f,"TestLoadImage: error",!1,c,y),y.onabort=x(pr,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=x(pr,f,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else c(!1)}function Gv(o,c){const f=new qr,y=new AbortController,D=setTimeout(()=>{y.abort(),pr(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:y.signal}).then(b=>{clearTimeout(D),b.ok?pr(f,"TestPingServer: ok",!0,c):pr(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),pr(f,"TestPingServer: error",!1,c)})}function pr(o,c,f,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(f)}catch{}}function Kv(){this.g=new of}function Yv(o,c,f){const y=f||"";try{af(o,function(D,b){let G=D;h(D)&&(G=ea(D)),c.push(y+b+"="+encodeURIComponent(G))})}catch(D){throw c.push(y+"type="+encodeURIComponent("_badmap")),D}}function ca(o){this.l=o.Ub||null,this.j=o.eb||!1}A(ca,xs),ca.prototype.g=function(){return new da(this.l,this.j)},ca.prototype.i=function(o){return function(){return o}}({});function da(o,c){lt.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(da,lt),t=da.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Di(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function pf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Pi(this):Di(this),this.readyState==3&&pf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Pi(this))},t.Qa=function(o){this.g&&(this.response=o,Pi(this))},t.ga=function(){this.g&&Pi(this)};function Pi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Di(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Di(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mf(o){let c="";return z(o,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function vu(o,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=mf(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ne(o,c,f))}function qe(o){lt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(qe,lt);var Xv=/^https?$/i,Jv=["POST","PUT"];t=qe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?Rn(this.o):Rn(Pn),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(b){gf(this,b);return}if(o=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)f.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const b of y.keys())f.set(b,y.get(b));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Jv,c,void 0))||y||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,G]of f)this.g.setRequestHeader(b,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_f(this),this.u=!0,this.g.send(o),this.u=!1}catch(b){gf(this,b)}};function gf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,yf(o),ha(o)}function yf(o){o.A||(o.A=!0,Ye(o,"complete"),Ye(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ye(this,"complete"),Ye(this,"abort"),ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ha(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vf(this):this.bb())},t.bb=function(){vf(this)};function vf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Wn(o)!=4||o.Z()!=2)){if(o.u&&Wn(o)==4)vs(o.Ea,0,o);else if(Ye(o,"readystatechange"),Wn(o)==4){o.h=!1;try{const G=o.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=G===0){var D=String(o.D).match(lf)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),y=!Xv.test(D?D.toLowerCase():"")}f=y}if(f)Ye(o,"complete"),Ye(o,"success");else{o.m=6;try{var b=2<Wn(o)?o.g.statusText:""}catch{b=""}o.l=b+" ["+o.Z()+"]",yf(o)}}finally{ha(o)}}}}function ha(o,c){if(o.g){_f(o);const f=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ye(o,"ready");try{f.onreadystatechange=y}catch{}}}function _f(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Wn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),ta(c)}};function xf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Zv(o){const c={};o=(o.g&&2<=Wn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(I(o[y]))continue;var f=_(o[y]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const b=c[D]||[];c[D]=b,b.push(f)}w(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function wf(o){this.Aa=0,this.i=[],this.j=new qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,o),this.cb=Ni("retryDelaySeedMs",1e4,o),this.Wa=Ni("forwardChannelMaxRetries",2,o),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Kt(o&&o.concurrentRequestLimit),this.Da=new Kv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wf.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,y){ut(0),this.W=o,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Pf(this,null,this.W),pa(this)};function _u(o){if(Sf(o),o.G==3){var c=o.U++,f=$n(o.I);if(Ne(f,"SID",o.K),Ne(f,"RID",c),Ne(f,"TYPE","terminate"),bi(o,f),c=new St(o,o.j,c),c.L=2,c.v=ua($n(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Df(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Fe(c)}Rf(o)}function fa(o){o.g&&(wu(o),o.g.cancel(),o.g=null)}function Sf(o){fa(o),o.u&&(l.clearTimeout(o.u),o.u=null),ma(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function pa(o){if(!As(o.h)&&!o.s){o.s=!0;var c=o.Ga;q||L(),N||(q(),N=!0),F.add(c,o),o.B=0}}function e_(o,c){return se(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=gn(g(o.Ga,o,c),kf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new St(this,this.j,o);let b=this.o;if(this.S&&(b?(b=v(b),E(b,this.S)):b=this.S),this.m!==null||this.O||(D.H=b,b=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Tf(this,D,c),f=$n(this.I),Ne(f,"RID",o),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),bi(this,f),b&&(this.O?c="headers="+encodeURIComponent(String(mf(b)))+"&"+c:this.m&&vu(f,this.m,b)),Nt(this.h,D),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",c),Ne(f,"SID","null"),D.T=!0,W(D,f,null)):W(D,f,c),this.G=2}}else this.G==3&&(o?Ef(this,o):this.i.length==0||As(this.h)||Ef(this))};function Ef(o,c){var f;c?f=c.l:f=o.U++;const y=$n(o.I);Ne(y,"SID",o.K),Ne(y,"RID",f),Ne(y,"AID",o.T),bi(o,y),o.m&&o.o&&vu(y,o.m,o.o),f=new St(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Tf(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Nt(o.h,f),W(f,y,c)}function bi(o,c){o.H&&z(o.H,function(f,y){Ne(c,y,f)}),o.l&&af({},function(f,y){Ne(c,y,f)})}function Tf(o,c,f){f=Math.min(o.i.length,f);var y=o.l?g(o.l.Na,o.l,o):null;e:{var D=o.i;let b=-1;for(;;){const G=["count="+f];b==-1?0<f?(b=D[0].g,G.push("ofs="+b)):b=0:G.push("ofs="+b);let Ae=!0;for(let ft=0;ft<f;ft++){let ve=D[ft].g;const Et=D[ft].map;if(ve-=b,0>ve)b=Math.max(0,D[ft].g-100),Ae=!1;else try{Yv(Et,G,"req"+ve+"_")}catch{y&&y(Et)}}if(Ae){y=G.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,y}function If(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;q||L(),N||(q(),N=!0),F.add(c,o),o.v=0}}function xu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=gn(g(o.Fa,o),kf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=gn(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),fa(this),Af(this))};function wu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Af(o){o.g=new St(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=$n(o.qa);Ne(c,"RID","rpc"),Ne(c,"SID",o.K),Ne(c,"AID",o.T),Ne(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ne(c,"TO",o.ja),Ne(c,"TYPE","xmlhttp"),bi(o,c),o.m&&o.o&&vu(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=ua($n(c)),f.m=null,f.P=!0,te(f,o)}t.Za=function(){this.C!=null&&(this.C=null,fa(this),xu(this),ut(19))};function ma(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Cf(o,c){var f=null;if(o.g==c){ma(o),wu(o),o.g=null;var y=2}else if(ze(o.h,c))f=c.D,Cs(o.h,c),y=1;else return;if(o.G!=0){if(c.o)if(y==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var D=o.B;y=Ti(),Ye(y,new dr(y,f)),pa(o)}else If(o);else if(D=c.s,D==3||D==0&&0<c.X||!(y==1&&e_(o,c)||y==2&&xu(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),D){case 1:Gr(o,5);break;case 4:Gr(o,10);break;case 3:Gr(o,6);break;default:Gr(o,2)}}}function kf(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Gr(o,c){if(o.j.info("Error code "+c),c==2){var f=g(o.fb,o),y=o.Xa;const D=!y;y=new Qr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||aa(y,"https"),ua(y),D?Qv(y.toString(),f):Gv(y.toString(),f)}else ut(2);o.G=0,o.l&&o.l.sa(c),Rf(o),Sf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Rf(o){if(o.G=0,o.ka=[],o.l){const c=oa(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,P(o.i),o.i.length=0),o.l.ra()}}function Pf(o,c,f){var y=f instanceof Qr?$n(f):new Qr(f);if(y.g!="")c&&(y.g=c+"."+y.g),la(y,y.s);else{var D=l.location;y=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var b=new Qr(null);y&&aa(b,y),c&&(b.g=c),D&&la(b,D),f&&(b.l=f),y=b}return f=o.D,c=o.ya,f&&c&&Ne(y,f,c),Ne(y,"VER",o.la),bi(o,y),y}function Df(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new qe(new ca({eb:f})):new qe(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nf(){}t=Nf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ga(){}ga.prototype.g=function(o,c){return new Yt(o,c)};function Yt(o,c){lt.call(this),this.g=new wf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!I(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!I(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Rs(this)}A(Yt,lt),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){_u(this.g)},Yt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ea(o),o=f);c.i.push(new Ai(c.Ya++,o)),c.G==3&&pa(c)},Yt.prototype.N=function(){this.g.l=null,delete this.j,_u(this.g),delete this.g,Yt.aa.N.call(this)};function bf(o){Ss.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}A(bf,Ss);function Vf(){na.call(this),this.status=1}A(Vf,na);function Rs(o){this.g=o}A(Rs,Nf),Rs.prototype.ua=function(){Ye(this.g,"a")},Rs.prototype.ta=function(o){Ye(this.g,new bf(o))},Rs.prototype.sa=function(o){Ye(this.g,new Vf)},Rs.prototype.ra=function(){Ye(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,_0=function(){return new ga},v0=function(){return Ti()},y0=zn,od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,Xa=hr,Is.COMPLETE="complete",g0=Is,ws.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Qi=ws,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,m0=qe}).apply(typeof ja<"u"?ja:typeof self<"u"?self:typeof window<"u"?window:{});const tm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new a0("@firebase/firestore");function Ui(){return cs.logLevel}function Z(t,...e){if(cs.logLevel<=ge.DEBUG){const n=e.map(Eh);cs.debug(`Firestore (${_i}): ${t}`,...n)}}function ir(t,...e){if(cs.logLevel<=ge.ERROR){const n=e.map(Eh);cs.error(`Firestore (${_i}): ${t}`,...n)}}function Do(t,...e){if(cs.logLevel<=ge.WARN){const n=e.map(Eh);cs.warn(`Firestore (${_i}): ${t}`,...n)}}function Eh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function Ee(t,e){t||ie()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class iS{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new rS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Ot(e)}}class oS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new oS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new lS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=cS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function ui(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new at(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new at(0,0))}static max(){return new le(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return No.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof No?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends No{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const dS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends No{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return dS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Y(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ve.fromString(e))}static fromName(e){return new ne(Ve.fromString(e).popFirst(5))}static empty(){return new ne(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ve(e.slice()))}}function hS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new Lr(s,ne.empty(),e)}function fS(t){return new Lr(t.readTime,t.key,-1)}class Lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lr(le.min(),ne.empty(),-1)}static max(){return new Lr(le.max(),ne.empty(),-1)}}function pS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==mS)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{a[h]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function yS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Th.oe=-1;function Zl(t){return t==null}function kl(t){return t===0&&1/t==-1/0}function vS(t){return typeof t=="number"&&Number.isInteger(t)&&!kl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ma(this.root,e,this.comparator,!0)}}class Ma{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??mt.RED,this.left=s??mt.EMPTY,this.right=i??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rm(this.data.getIterator())}getIteratorFrom(e){return new rm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class rm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new vt(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new S0("Invalid base64 string: "+i):i}}(e);return new xt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const _S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=_S.exec(t);if(Ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ds(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ah(t){const e=t.mapValue.fields.__previous_value__;return Ih(e)?Ah(e):e}function bo(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,s,i,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Vo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La={mapValue:{}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ih(t)?4:SS(t)?9007199254740991:wS(t)?10:11:ie()}function On(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bo(t).isEqual(bo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Or(s.timestampValue),l=Or(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ds(s.bytesValue).isEqual(ds(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ge(s.doubleValue),l=Ge(i.doubleValue);return a===l?kl(a)===kl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ui(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(nm(a)!==nm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!On(a[u],l[u])))return!1;return!0}(t,e);default:return ie()}}function jo(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function ci(t,e){if(t===e)return 0;const n=hs(t),r=hs(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ge(i.integerValue||i.doubleValue),u=Ge(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return sm(t.timestampValue,e.timestampValue);case 4:return sm(bo(t),bo(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,a){const l=ds(i),u=ds(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=_e(l[h],u[h]);if(p!==0)return p}return _e(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=_e(Ge(i.latitude),Ge(a.latitude));return l!==0?l:_e(Ge(i.longitude),Ge(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return im(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,p;const m=i.fields||{},g=a.fields||{},x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=_e(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:im(x,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===La.mapValue&&a===La.mapValue)return 0;if(i===La.mapValue)return 1;if(a===La.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=_e(u[m],p[m]);if(g!==0)return g;const x=ci(l[u[m]],h[p[m]]);if(x!==0)return x}return _e(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ie()}}function sm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Or(t),r=Or(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function im(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ci(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function di(t){return ad(t)}function ad(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ad(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ad(n.fields[a])}`;return s+"}"}(t.mapValue):ie()}function om(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ld(t){return!!t&&"integerValue"in t}function Ch(t){return!!t&&"arrayValue"in t}function am(t){return!!t&&"nullValue"in t}function lm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ja(t){return!!t&&"mapValue"in t}function wS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(n)}setAll(e){let n=gt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ao(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ms(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new zt(ao(this.value))}}function E0(t){const e=[];return ms(t.fields,(n,r)=>{const s=new gt([n]);if(Ja(r)){const i=E0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,le.min(),le.min(),le.min(),zt.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,le.min(),le.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,le.min(),le.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){this.position=e,this.inclusive=n}}function um(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(a.referenceValue),n.key):r=ci(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function cm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function ES(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{}class rt extends T0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IS(e,n,r):n==="array-contains"?new kS(e,r):n==="in"?new RS(e,r):n==="not-in"?new PS(e,r):n==="array-contains-any"?new DS(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AS(e,r):new CS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ci(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends T0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new An(e,n)}matches(e){return I0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function I0(t){return t.op==="and"}function A0(t){return TS(t)&&I0(t)}function TS(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function ud(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+di(t.value);if(A0(t))return t.filters.map(e=>ud(e)).join(",");{const e=t.filters.map(n=>ud(n)).join(",");return`${t.op}(${e})`}}function C0(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&On(r.value,s.value)}(t,e):t instanceof An?function(r,s){return s instanceof An&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&C0(a,s.filters[l]),!0):!1}(t,e):void ie()}function k0(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${di(n.value)}`}(t):t instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(k0).join(" ,")+"}"}(t):"Filter"}class IS extends rt{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class AS extends rt{constructor(e,n){super(e,"in",n),this.keys=R0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CS extends rt{constructor(e,n){super(e,"not-in",n),this.keys=R0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function R0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class kS extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ch(n)&&jo(n.arrayValue,this.value)}}class RS extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class PS extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!jo(this.value.arrayValue,n)}}class DS extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function dm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new NS(t,e,n,r,s,i,a)}function kh(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>di(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>di(r)).join(",")),e.ue=n}return e.ue}function Rh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ES(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cm(t.startAt,e.startAt)&&cm(t.endAt,e.endAt)}function cd(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bS(t,e,n,r,s,i,a,l){return new qo(t,e,n,r,s,i,a,l)}function Ph(t){return new qo(t)}function hm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function P0(t){return t.collectionGroup!==null}function lo(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new vt(gt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Pl(i,r))}),n.has(gt.keyField().canonicalString())||e.ce.push(new Pl(gt.keyField(),r))}return e.ce}function Mn(t){const e=ue(t);return e.le||(e.le=VS(e,lo(t))),e.le}function VS(t,e){if(t.limitType==="F")return dm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Pl(s.field,i)});const n=t.endAt?new Rl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rl(t.startAt.position,t.startAt.inclusive):null;return dm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dd(t,e){const n=t.filters.concat([e]);return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hd(t,e,n){return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return Rh(Mn(t),Mn(e))&&t.limitType===e.limitType}function D0(t){return`${kh(Mn(t))}|lt:${t.limitType}`}function Ns(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>k0(s)).join(", ")}]`),Zl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>di(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>di(s)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of lo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=um(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,lo(r),s)||r.endAt&&!function(a,l,u){const h=um(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,lo(r),s))}(t,e)}function jS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N0(t){return(e,n)=>{let r=!1;for(const s of lo(t)){const i=MS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function MS(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?ci(u,h):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return w0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new We(ne.comparator);function or(){return LS}const b0=new We(ne.comparator);function Gi(...t){let e=b0;for(const n of t)e=e.insert(n.key,n);return e}function V0(t){let e=b0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return uo()}function j0(){return uo()}function uo(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const OS=new We(ne.comparator),FS=new vt(ne.comparator);function fe(...t){let e=FS;for(const n of t)e=e.add(n);return e}const zS=new vt(_e);function BS(){return zS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kl(e)?"-0":e}}function M0(t){return{integerValue:""+t}}function US(t,e){return vS(e)?M0(e):Dh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this._=void 0}}function $S(t,e,n){return t instanceof Mo?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ih(i)&&(i=Ah(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Lo?O0(t,e):t instanceof Oo?F0(t,e):function(s,i){const a=L0(s,i),l=fm(a)+fm(s.Pe);return ld(a)&&ld(s.Pe)?M0(l):Dh(s.serializer,l)}(t,e)}function WS(t,e,n){return t instanceof Lo?O0(t,e):t instanceof Oo?F0(t,e):n}function L0(t,e){return t instanceof Dl?function(r){return ld(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mo extends nu{}class Lo extends nu{constructor(e){super(),this.elements=e}}function O0(t,e){const n=z0(e);for(const r of t.elements)n.some(s=>On(s,r))||n.push(r);return{arrayValue:{values:n}}}class Oo extends nu{constructor(e){super(),this.elements=e}}function F0(t,e){let n=z0(e);for(const r of t.elements)n=n.filter(s=>!On(s,r));return{arrayValue:{values:n}}}class Dl extends nu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function fm(t){return Ge(t.integerValue||t.doubleValue)}function z0(t){return Ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.field=e,this.transform=n}}function qS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Lo&&s instanceof Lo||r instanceof Oo&&s instanceof Oo?ui(r.elements,s.elements,On):r instanceof Dl&&s instanceof Dl?On(r.Pe,s.Pe):r instanceof Mo&&s instanceof Mo}(t.transform,e.transform)}class QS{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Za(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function B0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nh(t.key,hn.none()):new Qo(t.key,t.data,hn.none());{const n=t.data,r=zt.empty();let s=new vt(gt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new $r(t.key,r,new Zt(s.toArray()),hn.none())}}function GS(t,e,n){t instanceof Qo?function(s,i,a){const l=s.value.clone(),u=mm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(s,i,a){if(!Za(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=mm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(U0(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof Qo?function(i,a,l,u){if(!Za(i.precondition,a))return l;const h=i.value.clone(),p=gm(i.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof $r?function(i,a,l,u){if(!Za(i.precondition,a))return l;const h=gm(i.fieldTransforms,u,a),p=a.data;return p.setAll(U0(i)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return Za(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function KS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=L0(r.transform,s||null);i!=null&&(n===null&&(n=zt.empty()),n.set(r.field,i))}return n||null}function pm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ui(r,s,(i,a)=>qS(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qo extends ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function U0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mm(t,e,n){const r=new Map;Ee(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,WS(a,l,n[s]))}return r}function gm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,$S(i,a,e))}return r}class Nh extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YS extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&GS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=j0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=B0(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ui(this.mutations,e.mutations,(n,r)=>pm(n,r))&&ui(this.baseMutations,e.baseMutations,(n,r)=>pm(n,r))}}class bh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length);let s=function(){return OS}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new bh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,me;function eE(t){switch(t){default:return ie();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function $0(t){if(t===void 0)return ir("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ze.OK:return O.OK;case Ze.CANCELLED:return O.CANCELLED;case Ze.UNKNOWN:return O.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return O.INTERNAL;case Ze.UNAVAILABLE:return O.UNAVAILABLE;case Ze.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ze.NOT_FOUND:return O.NOT_FOUND;case Ze.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ze.ABORTED:return O.ABORTED;case Ze.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ze.DATA_LOSS:return O.DATA_LOSS;default:return ie()}}(me=Ze||(Ze={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new ss([4294967295,4294967295],0);function ym(t){const e=tE().encode(t),n=new p0;return n.update(e),new Uint8Array(n.digest())}function vm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ss([n,r],0),new ss([s,i],0)]}class Vh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ki(`Invalid padding: ${n}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ss.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ss.fromNumber(r)));return s.compare(nE)===1&&(s=new ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ym(e),[r,s]=vm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Vh(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=ym(e),[r,s]=vm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Go.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new su(le.min(),s,new We(_e),or(),fe())}}class Go{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Go(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class W0{constructor(e,n){this.targetId=e,this.me=n}}class H0{constructor(e,n,r=xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class _m{constructor(){this.fe=0,this.ge=wm(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new Go(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rE{constructor(e){this.Le=e,this.Be=new Map,this.ke=or(),this.qe=xm(),this.Qe=new We(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(cd(i))if(r===0){const a=new ne(i.path);this.Ue(n,a,Rt.newNoDocument(a,le.min()))}else Ee(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=ds(r).toUint8Array()}catch(u){if(u instanceof S0)return Do("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Vh(a,s,i)}catch(u){return Do(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&cd(l.target)){const u=new ne(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Rt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=fe();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new su(e,n,this.Qe,this.ke,r);return this.ke=or(),this.qe=xm(),this.Qe=new We(_e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _m,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _m),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function xm(){return new We(ne.comparator)}function wm(){return new We(ne.comparator)}const sE={asc:"ASCENDING",desc:"DESCENDING"},iE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oE={and:"AND",or:"OR"};class aE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fd(t,e){return t.useProto3Json||Zl(e)?e:{value:e}}function Nl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lE(t,e){return Nl(t,e.toTimestamp())}function Ln(t){return Ee(!!t),le.fromTimestamp(function(n){const r=Or(n);return new at(r.seconds,r.nanos)}(t))}function jh(t,e){return pd(t,e).canonicalString()}function pd(t,e){const n=function(s){return new Ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Q0(t){const e=Ve.fromString(t);return Ee(J0(e)),e}function md(t,e){return jh(t.databaseId,e.path)}function Zu(t,e){const n=Q0(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(K0(n))}function G0(t,e){return jh(t.databaseId,e)}function uE(t){const e=Q0(t);return e.length===4?Ve.emptyPath():K0(e)}function gd(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K0(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sm(t,e,n){return{name:md(t,e),fields:n.value.mapValue.fields}}function cE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Ee(p===void 0||typeof p=="string"),xt.fromBase64String(p||"")):(Ee(p===void 0||p instanceof Buffer||p instanceof Uint8Array),xt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const p=h.code===void 0?O.UNKNOWN:$0(h.code);return new Y(p,h.message||"")}(a);n=new H0(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zu(t,r.document.name),i=Ln(r.document.updateTime),a=r.document.createTime?Ln(r.document.createTime):le.min(),l=new zt({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(s,i,a,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new el(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zu(t,r.document),i=r.readTime?Ln(r.readTime):le.min(),a=Rt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new el([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zu(t,r.document),i=r.removedTargetIds||[];n=new el([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new ZS(s,i),l=r.targetId;n=new W0(l,a)}}return n}function dE(t,e){let n;if(e instanceof Qo)n={update:Sm(t,e.key,e.value)};else if(e instanceof Nh)n={delete:md(t,e.key)};else if(e instanceof $r)n={update:Sm(t,e.key,e.data),updateMask:xE(e.fieldMask)};else{if(!(e instanceof YS))return ie();n={verify:md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Mo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Lo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Oo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Dl)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function hE(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Ln(s.updateTime):Ln(i);return a.isEqual(le.min())&&(a=Ln(i)),new QS(a,s.transformResults||[])}(n,e))):[]}function fE(t,e){return{documents:[G0(t,e.path)]}}function pE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=G0(t,s);const i=function(h){if(h.length!==0)return X0(An.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:bs(g.field),direction:yE(g.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=fd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function mE(t){let e=uE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=Y0(m);return g instanceof An&&A0(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(A){return new Pl(Vs(A.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Zl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Rl(x,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,x=m.values||[];return new Rl(x,g)}(n.endAt)),bS(e,s,a,i,l,"F",u,h)}function gE(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Y0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vs(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vs(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vs(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vs(n.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Vs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(r=>Y0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function yE(t){return sE[t]}function vE(t){return iE[t]}function _E(t){return oE[t]}function bs(t){return{fieldPath:t.canonicalString()}}function Vs(t){return gt.fromServerFormat(t.fieldPath)}function X0(t){return t instanceof rt?function(n){if(n.op==="=="){if(lm(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NAN"}};if(am(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lm(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NAN"}};if(am(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(n.field),op:vE(n.op),value:n.value}}}(t):t instanceof An?function(n){const r=n.getFilters().map(s=>X0(s));return r.length===1?r[0]:{compositeFilter:{op:_E(n.op),filters:r}}}(t):ie()}function xE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function J0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=le.min(),a=le.min(),l=xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.ct=e}}function SE(t){const e=mE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.un=new TE}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Lr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class TE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vt(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hi(0)}static kn(){return new hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&co(r.mutation,s,Zt.empty(),at.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Gi();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=or();const a=uo(),l=function(){return uo()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof $r)?i=i.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),co(p.mutation,h,p.mutation.getFieldMask(),at.now())):a.set(h.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new AE(p,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=uo();let s=new We((a,l)=>a-l),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Zt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(s.get(l.batchId)||fe()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=j0();p.forEach(g=>{if(!i.has(g)){const x=B0(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ne.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):P0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ts());let l=-1,u=i;return a.next(h=>U.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,fe())).next(p=>({batchId:l,changes:V0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Gi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Gi();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const h=function(m,g){return new qo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,Rt.newInvalidDocument(p)))});let l=Gi();return a.forEach((u,h)=>{const p=i.get(u);p!==void 0&&co(p.mutation,h,Zt.empty(),at.now()),tu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:SE(s.bundledQuery),readTime:Ln(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.overlays=new We(ne.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),i=n.length+1,a=new ne(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=ts(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=ts(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new JS(n,r));let i=this.Ir.get(n);i===void 0&&(i=fe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this.Tr=new vt(ct.Er),this.dr=new vt(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Ve([])),r=new ct(n,e),s=new ct(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Ve([])),r=new ct(n,e),s=new ct(n,e+1);let i=fe();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(ct.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XS(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new ct(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),s=new ct(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(_e);return n.forEach(s=>{const i=new ct(s,0),a=new ct(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const a=new ct(new ne(i),0);let l=new vt(_e);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},a),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new ct(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ct(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.Mr=e,this.docs=function(){return new We(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const a=n.path,l=new ne(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||pS(fS(p),r)<=0||(s.has(p.key)||tu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bE(this)}getSize(e){return U.resolve(this.size)}}class bE extends IE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.persistence=e,this.Nr=new xi(n=>kh(n),Rh),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mh,this.targetCount=0,this.kr=hi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Th(0),this.Kr=!1,this.Kr=!0,this.$r=new PE,this.referenceDelegate=e(this),this.Ur=new VE(this),this.indexManager=new EE,this.remoteDocumentCache=function(s){return new NE(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wE(n),this.Gr=new kE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new ME(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ME extends gS{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Jr=new Mh,this.Yr=null}static Zr(e){return new Lh(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Oh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return z1()?8:yS(O1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new LE;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ui()<=ge.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ui()<=ge.DEBUG&&Z("QueryEngine","Query:",Ns(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ui()<=ge.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):U.resolve())}Yi(e,n){if(hm(n))return U.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=hd(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=fe(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,hd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return hm(n)||s.isEqual(le.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?U.resolve(null):(Ui()<=ge.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ns(n)),this.rs(e,a,n,hS(s,-1)).next(l=>l))})}ts(e,n){let r=new vt(N0(e));return n.forEach((s,i)=>{tu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ui()<=ge.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Ns(n)),this.Ji.getDocumentsMatchingQuery(e,n,Lr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new We(_e),this._s=new xi(i=>kh(i),Rh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function zE(t,e,n,r){return new FE(t,e,n,r)}async function Z0(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=fe();for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function BE(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,g=m.keys();let x=U.resolve();return g.forEach(A=>{x=x.next(()=>p.getEntry(u,A)).next(P=>{const M=h.docVersions.get(A);Ee(M!==null),P.version.compareTo(M)<0&&(m.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),p.addEntry(P)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=fe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ev(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function UE(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(xt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),s=s.insert(m,x),function(P,M,C){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,x,p)&&l.push(n.Ur.updateTargetData(i,x))});let u=or(),h=fe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push($E(i,a,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(le.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return U.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function $E(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=or();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Z("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function WE(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HE(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new Sr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function yd(t,e,n){const r=ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ho(a))throw a;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Em(t,e,n){const r=ue(t);let s=le.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,p){const m=ue(u),g=m._s.get(p);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(h,p)}(r,a,Mn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:le.min(),n?i:fe())).next(l=>(qE(r,jS(e),l),{documents:l,Ts:i})))}function qE(t,e,n){let r=t.us.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Tm{constructor(){this.activeTargetIds=BS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QE{constructor(){this.so=new Tm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa=null;function ec(){return Oa===null?Oa=function(){return 268435456+Math.round(2147483648*Math.random())}():Oa++,"0x"+Oa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class XE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=ec(),u=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,u,h,s).then(p=>(Z("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Do("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=KE[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ec();return new Promise((a,l)=>{const u=new m0;u.setWithCredentials(!0),u.listenOnce(g0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Xa.NO_ERROR:const p=u.getResponseJson();Z(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case Xa.TIMEOUT:Z(Ct,`RPC '${e}' ${i} timed out`),l(new Y(O.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:const m=u.getStatus();if(Z(Ct,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const A=function(M){const C=M.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(C)>=0?C:O.UNKNOWN}(x.status);l(new Y(A,x.message))}else l(new Y(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(O.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Z(Ct,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Z(Ct,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=ec(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=_0(),l=v0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Z(Ct,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=a.createWebChannel(p,u);let g=!1,x=!1;const A=new YE({Io:M=>{x?Z(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(g||(Z(Ct,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Z(Ct,`RPC '${e}' stream ${s} sending:`,M),m.send(M))},To:()=>m.close()}),P=(M,C,I)=>{M.listen(C,R=>{try{I(R)}catch(j){setTimeout(()=>{throw j},0)}})};return P(m,Qi.EventType.OPEN,()=>{x||(Z(Ct,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),P(m,Qi.EventType.CLOSE,()=>{x||(x=!0,Z(Ct,`RPC '${e}' stream ${s} transport closed`),A.So())}),P(m,Qi.EventType.ERROR,M=>{x||(x=!0,Do(Ct,`RPC '${e}' stream ${s} transport errored:`,M),A.So(new Y(O.UNAVAILABLE,"The operation could not be completed")))}),P(m,Qi.EventType.MESSAGE,M=>{var C;if(!x){const I=M.data[0];Ee(!!I);const R=I,j=R.error||((C=R[0])===null||C===void 0?void 0:C.error);if(j){Z(Ct,`RPC '${e}' stream ${s} received error:`,j);const B=j.status;let z=function(S){const E=Ze[S];if(E!==void 0)return $0(E)}(B),w=j.message;z===void 0&&(z=O.INTERNAL,w="Unknown error status: "+B+" with message "+j.message),x=!0,A.So(new Y(z,w)),m.close()}else Z(Ct,`RPC '${e}' stream ${s} received:`,I),A.bo(I)}}),P(l,y0.STAT_EVENT,M=>{M.stat===od.PROXY?Z(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===od.NOPROXY&&Z(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return new aE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JE extends nv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=cE(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?Ln(a.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gd(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=cd(u)?{documents:fE(i,u)}:{query:pE(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=q0(i,a.resumeToken);const h=fd(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(le.min())>0){l.readTime=Nl(i,a.snapshotVersion.toTimestamp());const h=fd(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=gE(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gd(this.serializer),n.removeTarget=e,this.a_(n)}}class ZE extends nv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=hE(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,pd(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,pd(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(O.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{gs(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ue(u);h.L_.add(4),await Ko(h),h.q_.set("Unknown"),h.L_.delete(4),await ou(h)}(this))})}),this.q_=new tT(r,s)}}async function ou(t){if(gs(t))for(const e of t.B_)await e(!0)}async function Ko(t){for(const e of t.B_)await e(!1)}function rv(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Uh(n)?Bh(n):wi(n).r_()&&zh(n,e))}function Fh(t,e){const n=ue(t),r=wi(n);n.N_.delete(e),r.r_()&&sv(n,e),n.N_.size===0&&(r.r_()?r.o_():gs(n)&&n.q_.set("Unknown"))}function zh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wi(t).A_(e)}function sv(t,e){t.Q_.xe(e),wi(t).R_(e)}function Bh(t){t.Q_=new rE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wi(t).start(),t.q_.v_()}function Uh(t){return gs(t)&&!wi(t).n_()&&t.N_.size>0}function gs(t){return ue(t).L_.size===0}function iv(t){t.Q_=void 0}async function rT(t){t.q_.set("Online")}async function sT(t){t.N_.forEach((e,n)=>{zh(t,e)})}async function iT(t,e){iv(t),Uh(t)?(t.q_.M_(e),Bh(t)):t.q_.set("Unknown")}async function oT(t,e,n){if(t.q_.set("Online"),e instanceof H0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bl(t,r)}else if(e instanceof el?t.Q_.Ke(e):e instanceof W0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await ev(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(xt.EMPTY_BYTE_STRING,p.snapshotVersion)),sv(i,u);const m=new Sr(p.target,u,h,p.sequenceNumber);zh(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await bl(t,r)}}async function bl(t,e,n){if(!Ho(e))throw e;t.L_.add(1),await Ko(t),t.q_.set("Offline"),n||(n=()=>ev(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ou(t)})}function ov(t,e){return e().catch(n=>bl(t,n,e))}async function au(t){const e=ue(t),n=Fr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aT(e);)try{const s=await WE(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,lT(e,s)}catch(s){await bl(e,s)}av(e)&&lv(e)}function aT(t){return gs(t)&&t.O_.length<10}function lT(t,e){t.O_.push(e);const n=Fr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function av(t){return gs(t)&&!Fr(t).n_()&&t.O_.length>0}function lv(t){Fr(t).start()}async function uT(t){Fr(t).p_()}async function cT(t){const e=Fr(t);for(const n of t.O_)e.m_(n.mutations)}async function dT(t,e,n){const r=t.O_.shift(),s=bh.from(r,e,n);await ov(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await au(t)}async function hT(t,e){e&&Fr(t).V_&&await async function(r,s){if(function(a){return eE(a)&&a!==O.ABORTED}(s.code)){const i=r.O_.shift();Fr(r).s_(),await ov(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await au(r)}}(t,e),av(t)&&lv(t)}async function Am(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=gs(n);n.L_.add(3),await Ko(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ou(n)}async function fT(t,e){const n=ue(t);e?(n.L_.delete(2),await ou(n)):e||(n.L_.add(2),await Ko(n),n.q_.set("Unknown"))}function wi(t){return t.K_||(t.K_=function(n,r,s){const i=ue(n);return i.w_(),new JE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:rT.bind(null,t),Ro:sT.bind(null,t),mo:iT.bind(null,t),d_:oT.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Uh(t)?Bh(t):t.q_.set("Unknown")):(await t.K_.stop(),iv(t))})),t.K_}function Fr(t){return t.U_||(t.U_=function(n,r,s){const i=ue(n);return i.w_(),new ZE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uT.bind(null,t),mo:hT.bind(null,t),f_:cT.bind(null,t),g_:dT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await au(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new $h(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wh(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Ho(t))return new Y(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Gi(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new ei(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.W_=new We(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fi{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new fi(e,n,ei.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mT{constructor(){this.queries=km(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=km(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Y(O.ABORTED,"Firestore shutting down"))}}function km(){return new xi(t=>D0(t),eu)}async function uv(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new pT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Wh(a,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Hh(n)}async function cv(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gT(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Hh(n)}function yT(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Hh(t){t.Y_.forEach(e=>{e.next()})}var vd,Rm;(Rm=vd||(vd={})).ea="default",Rm.Cache="cache";class dv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.key=e}}class fv{constructor(e){this.key=e}}class vT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=N0(e),this.Ra=new ei(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Cm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),x=tu(this.query,m)?m:null,A=!!g&&this.mutatedKeys.has(g.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let M=!1;g&&x?g.data.isEqual(x.data)?A!==P&&(r.track({type:3,doc:x}),M=!0):this.ga(g,x)||(r.track({type:2,doc:x}),M=!0,(u&&this.Aa(x,u)>0||h&&this.Aa(x,h)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),M=!0):g&&!x&&(r.track({type:1,doc:g}),M=!0,(u||h)&&(l=!0)),M&&(x?(a=a.add(x),i=P?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,m)=>function(x,A){const P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return P(x)-P(A)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new fi(this.query,e.Ra,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new fv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hv(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _T{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xT{constructor(e){this.key=e,this.va=!1}}class wT{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new xi(l=>D0(l),eu),this.Ma=new Map,this.xa=new Set,this.Oa=new We(ne.comparator),this.Na=new Map,this.La=new Mh,this.Ba={},this.ka=new Map,this.qa=hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ST(t,e,n=!0){const r=_v(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await pv(r,e,n,!0),s}async function ET(t,e){const n=_v(t);await pv(n,e,!0,!1)}async function pv(t,e,n,r){const s=await HE(t.localStore,Mn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await TT(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&rv(t.remoteStore,s),l}async function TT(t,e,n,r,s){t.Ka=(m,g,x)=>async function(P,M,C,I){let R=M.view.ma(C);R.ns&&(R=await Em(P.localStore,M.query,!1).then(({documents:w})=>M.view.ma(w,R)));const j=I&&I.targetChanges.get(M.targetId),B=I&&I.targetMismatches.get(M.targetId)!=null,z=M.view.applyChanges(R,P.isPrimaryClient,j,B);return Dm(P,M.targetId,z.wa),z.snapshot}(t,m,g,x);const i=await Em(t.localStore,e,!0),a=new vT(e,i.Ts),l=a.ma(i.documents),u=Go.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);Dm(t,n,h.wa);const p=new _T(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function IT(t,e,n){const r=ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!eu(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fh(r.remoteStore,s.targetId),_d(r,s.targetId)}).catch(Wo)):(_d(r,s.targetId),await yd(r.localStore,s.targetId,!0))}async function AT(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fh(n.remoteStore,r.targetId))}async function CT(t,e,n){const r=VT(t);try{const s=await function(a,l){const u=ue(a),h=at.now(),p=l.reduce((x,A)=>x.add(A.key),fe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let A=or(),P=fe();return u.cs.getEntries(x,p).next(M=>{A=M,A.forEach((C,I)=>{I.isValidDocument()||(P=P.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,A)).next(M=>{m=M;const C=[];for(const I of l){const R=KS(I,m.get(I.key).overlayedDocument);R!=null&&C.push(new $r(I.key,R,E0(R.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(x,h,C,l)}).next(M=>{g=M;const C=M.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(x,M.batchId,C)})}).then(()=>({batchId:g.batchId,changes:V0(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new We(_e)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await Yo(r,s.changes),await au(r.remoteStore)}catch(s){const i=Wh(s,"Failed to persist write");n.reject(i)}}async function mv(t,e){const n=ue(t);try{const r=await UE(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ee(a.va):s.removedDocuments.size>0&&(Ee(a.va),a.va=!1))}),await Yo(n,r,e)}catch(r){await Wo(r)}}function Pm(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ue(a);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(h=!0)}),h&&Hh(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kT(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new We(ne.comparator);a=a.insert(i,Rt.newNoDocument(i,le.min()));const l=fe().add(i),u=new su(le.min(),new Map,new We(_e),a,l);await mv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),qh(r)}else await yd(r.localStore,e,!1).then(()=>_d(r,e,n)).catch(Wo)}async function RT(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await BE(n.localStore,e);yv(n,r,null),gv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yo(n,s)}catch(s){await Wo(s)}}async function PT(t,e,n){const r=ue(t);try{const s=await function(a,l){const u=ue(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(Ee(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);yv(r,e,n),gv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yo(r,s)}catch(s){await Wo(s)}}function gv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yv(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function _d(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vv(t,r)})}function vv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Fh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),qh(t))}function Dm(t,e,n){for(const r of n)r instanceof hv?(t.La.addReference(r.key,e),DT(t,r)):r instanceof fv?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vv(t,r.key)):ie()}function DT(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),qh(t))}function qh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Ve.fromString(e)),r=t.qa.next();t.Na.set(r,new xT(n)),t.Oa=t.Oa.insert(n,r),rv(t.remoteStore,new Sr(Mn(Ph(n.path)),r,"TargetPurposeLimboResolution",Th.oe))}}async function Yo(t,e,n){const r=ue(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Oh.Wi(u.targetId,h);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,h){const p=ue(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(h,g=>U.forEach(g.$i,x=>p.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>U.forEach(g.Ui,x=>p.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Ho(m))throw m;Z("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const x=p.os.get(g),A=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(g,P)}}}(r.localStore,i))}async function NT(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await Z0(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new Y(O.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yo(n,r.hs)}}function bT(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let s=fe();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function _v(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kT.bind(null,e),e.Ca.d_=gT.bind(null,e.eventManager),e.Ca.$a=yT.bind(null,e.eventManager),e}function VT(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PT.bind(null,e),e}class Vl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return zE(this.persistence,new OE,e.initialUser,this.serializer)}Ga(e){return new jE(Lh.Zr,this.serializer)}Wa(e){return new QE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vl.provider={build:()=>new Vl};class xd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NT.bind(null,this.syncEngine),await fT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mT}()}createDatastore(e){const n=iu(e.databaseInfo.databaseId),r=function(i){return new XE(i)}(e.databaseInfo);return function(i,a,l,u){return new eT(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new nT(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Pm(this.syncEngine,n,0),function(){return Im.D()?new Im:new GE}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,p){const m=new wT(s,i,a,l,u,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ko(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xd.provider={build:()=>new xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=x0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Z("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Z("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nc(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Z0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Nm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MT(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Am(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Am(e.remoteStore,s)),t._onlineComponents=e}async function MT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await nc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await nc(t,new Vl)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await nc(t,new Vl);return t._offlineComponents}async function wv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Nm(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Nm(t,new xd))),t._onlineComponents}function LT(t){return wv(t).then(e=>e.syncEngine)}async function Sv(t){const e=await wv(t),n=e.eventManager;return n.onListen=ST.bind(null,e.syncEngine),n.onUnlisten=IT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ET.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AT.bind(null,e.syncEngine),n}function OT(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const p=new xv({next:g=>{p.Za(),a.enqueueAndForget(()=>cv(i,m));const x=g.docs.has(l);!x&&g.fromCache?h.reject(new Y(O.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?h.reject(new Y(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new dv(Ph(l.path),p,{includeMetadataChanges:!0,_a:!0});return uv(i,m)}(await Sv(t),t.asyncQueue,e,n,r)),r.promise}function FT(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const p=new xv({next:g=>{p.Za(),a.enqueueAndForget(()=>cv(i,m)),g.fromCache&&u.source==="server"?h.reject(new Y(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new dv(l,p,{includeMetadataChanges:!0,_a:!0});return uv(i,m)}(await Sv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e,n){if(!n)throw new Y(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zT(t,e,n,r){if(e===!0&&r===!0)throw new Y(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vm(t){if(!ne.isDocumentKey(t))throw new Y(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jm(t){if(ne.isDocumentKey(t))throw new Y(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lu(t);throw new Y(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ev((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sS;switch(r.type){case"firstParty":return new aS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bm.get(n);r&&(Z("ComponentProvider","Removing Datastore"),bm.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Vr extends Si{constructor(e,n,r){super(e,n,Ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new ne(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function Qn(t,e,...n){if(t=In(t),Tv("collection","path",e),t instanceof Qh){const r=Ve.fromString(e,...n);return jm(r),new Vr(t,null,r)}{if(!(t instanceof jt||t instanceof Vr))throw new Y(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return jm(r),new Vr(t.firestore,null,r)}}function ln(t,e,...n){if(t=In(t),arguments.length===1&&(e=x0.newId()),Tv("doc","path",e),t instanceof Qh){const r=Ve.fromString(e,...n);return Vm(r),new jt(t,null,new ne(r))}{if(!(t instanceof jt||t instanceof Vr))throw new Y(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Vm(r),new jt(t.firestore,t instanceof Vr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tv(this,"async_queue_retry"),this.Vu=()=>{const r=tc();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=tc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=tc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ho(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw ir("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=$h.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ys extends Qh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lm(e),this._firestoreClient=void 0,await e}}}function BT(t,e,n){n||(n="(default)");const r=c0(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Al(i,e))return s;throw new Y(O.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y(O.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Gh(t){if(t._terminated)throw new Y(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UT(t),t._firestoreClient}function UT(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,p){return new xS(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Ev(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new jT(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(xt.fromBase64String(e))}catch(n){throw new Y(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pi(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=/^__.*__$/;class WT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qo(e,this.data,n,this.fieldTransforms)}}class Iv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Av(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class Xh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Av(this.Cu)&&$T.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class HT{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iu(e)}Qu(e,n,r,s=!1){return new Xh({Cu:e,methodName:n,qu:r,path:gt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function du(t){const e=t._freezeSettings(),n=iu(t._databaseId);return new HT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cv(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Zh("Data must be an object, but it was:",a,r);const l=kv(r,a);let u,h;if(i.merge)u=new Zt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=wd(e,m,n);if(!a.contains(g))throw new Y(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Pv(p,g)||p.push(g)}u=new Zt(p),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new WT(new zt(l),u,h)}class hu extends cu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hu}}class Jh extends cu{_toFieldTransform(e){return new HS(e.path,new Mo)}isEqual(e){return e instanceof Jh}}function qT(t,e,n,r){const s=t.Qu(1,e,n);Zh("Data must be an object, but it was:",s,r);const i=[],a=zt.empty();ms(r,(u,h)=>{const p=ef(e,u,n);h=In(h);const m=s.Nu(p);if(h instanceof hu)i.push(p);else{const g=Xo(h,m);g!=null&&(i.push(p),a.set(p,g))}});const l=new Zt(i);return new Iv(a,l,s.fieldTransforms)}function QT(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[wd(e,r,n)],u=[s];if(i.length%2!=0)throw new Y(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(wd(e,i[g])),u.push(i[g+1]);const h=[],p=zt.empty();for(let g=l.length-1;g>=0;--g)if(!Pv(h,l[g])){const x=l[g];let A=u[g];A=In(A);const P=a.Nu(x);if(A instanceof hu)h.push(x);else{const M=Xo(A,P);M!=null&&(h.push(x),p.set(x,M))}}const m=new Zt(h);return new Iv(p,m,a.fieldTransforms)}function GT(t,e,n,r=!1){return Xo(n,t.Qu(r?4:3,e))}function Xo(t,e){if(Rv(t=In(t)))return Zh("Unsupported field value:",e,t),kv(t,e);if(t instanceof cu)return function(r,s){if(!Av(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Xo(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=In(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return US(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=at.fromDate(r);return{timestampValue:Nl(s.serializer,i)}}if(r instanceof at){const i=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nl(s.serializer,i)}}if(r instanceof Kh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pi)return{bytesValue:q0(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Yh)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Dh(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${lu(r)}`)}(t,e)}function kv(t,e){const n={};return w0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,(r,s)=>{const i=Xo(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Rv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Kh||t instanceof pi||t instanceof jt||t instanceof cu||t instanceof Yh)}function Zh(t,e,n){if(!Rv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=lu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function wd(t,e,n){if((e=In(e))instanceof uu)return e._internalPath;if(typeof e=="string")return ef(t,e);throw jl("Field path arguments must be of type string or ",t,!1,void 0,n)}const KT=new RegExp("[~\\*/\\[\\]]");function ef(t,e,n){if(e.search(KT)>=0)throw jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uu(...e.split("."))._internalPath}catch{throw jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Y(O.INVALID_ARGUMENT,l+t+u)}function Pv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YT extends Dv{data(){return super.data()}}function tf(t,e){return typeof e=="string"?ef(t,e):e instanceof uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nf{}class JT extends nf{}function Yi(t,e,...n){let r=[];e instanceof nf&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof rf).length,l=i.filter(u=>u instanceof fu).length;if(a>1||a>0&&l>0)throw new Y(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fu extends JT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fu(e,n,r)}_apply(e){const n=this._parse(e);return Nv(e._query,n),new Si(e.firestore,e.converter,dd(e._query,n))}_parse(e){const n=du(e.firestore);return function(i,a,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Y(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Fm(m,p);const x=[];for(const A of m)x.push(Om(u,i,A));g={arrayValue:{values:x}}}else g=Om(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Fm(m,p),g=GT(l,a,m,p==="in"||p==="not-in");return rt.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Sd(t,e,n){const r=e,s=tf("where",t);return fu._create(s,r,n)}class rf extends nf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Nv(a,u),a=dd(a,u)}(e._query,n),new Si(e.firestore,e.converter,dd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Om(t,e,n){if(typeof(n=In(n))=="string"){if(n==="")throw new Y(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P0(e)&&n.indexOf("/")!==-1)throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!ne.isDocumentKey(r))throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return om(t,new ne(r))}if(n instanceof jt)return om(t,n._key);throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(n)}.`)}function Fm(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nv(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZT{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ms(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ge(a.doubleValue));return new Yh(i)}convertGeoPoint(e){return new Kh(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ah(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bo(e));default:return null}}convertTimestamp(e){const n=Or(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ee(J0(r));const s=new Vo(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vv extends Dv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tl extends Vv{data(e={}){return super.data(e)}}class eI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tl(this._firestore,this._userDataWriter,r.key,r,new Xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new tl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new tl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:tI(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){t=Fn(t,jt);const e=Fn(t.firestore,ys);return OT(Gh(e),t._key).then(n=>sI(e,t,n))}class jv extends ZT{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function js(t){t=Fn(t,Si);const e=Fn(t.firestore,ys),n=Gh(e),r=new jv(e);return XT(t._query),FT(n,t._query).then(s=>new eI(e,r,t,s))}function rI(t,e,n){t=Fn(t,jt);const r=Fn(t.firestore,ys),s=bv(t.converter,e);return pu(r,[Cv(du(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hn.none())])}function Gn(t,e,n,...r){t=Fn(t,jt);const s=Fn(t.firestore,ys),i=du(s);let a;return a=typeof(e=In(e))=="string"||e instanceof uu?QT(i,"updateDoc",t._key,e,n,r):qT(i,"updateDoc",t._key,e),pu(s,[a.toMutation(t._key,hn.exists(!0))])}function rc(t){return pu(Fn(t.firestore,ys),[new Nh(t._key,hn.none())])}function sf(t,e){const n=Fn(t.firestore,ys),r=ln(t),s=bv(t.converter,e);return pu(n,[Cv(du(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function pu(t,e){return function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget(async()=>CT(await LT(r),s,i)),i.promise}(Gh(t),e)}function sI(t,e,n){const r=n.docs.get(e._key),s=new jv(t);return new Vv(t,s,e._key,r,new Xi(n.hasPendingWrites,n.fromCache),e.converter)}function cn(){return new Jh("serverTimestamp")}(function(e,n=!0){(function(s){_i=s})(Ww),Ro(new li("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new ys(new iS(r.getProvider("auth-internal")),new uS(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(h.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),br(tm,"4.7.3",e),br(tm,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="us-central1";class oI{constructor(e,n,r,s,i=Ed,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new iI(n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Ed}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function aI(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const zm="@firebase/functions",Bm="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="auth-internal",uI="app-check-internal",cI="messaging-internal";function dI(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(lI),l=r.getProvider(cI),u=r.getProvider(uI);return new oI(i,a,l,u,s,t)};Ro(new li(Mv,n,"PUBLIC").setMultipleInstances(!0)),br(zm,Bm,e),br(zm,Bm,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t=Hw(),e=Ed){const r=c0(In(t),Mv).getImmediate({identifier:e}),s=M1("functions");return s&&fI(r,...s),r}function fI(t,e,n){aI(In(t),e,n)}dI(fetch.bind(self));const pI={apiKey:'"AIzaSyDRdl4zhwoZumVtphmJ19orZ8HoR0WQQZM",',authDomain:'"qualtrics-game-backend.firebaseapp.com",',projectId:'"qualtrics-game-backend",',storageBucket:'"qualtrics-game-backend.firebasestorage.app",',messagingSenderId:'"441267092549",',appId:"1:441267092549:web:6ce075f5f3ea7cf958772c"},Lv=d0(pI),tt=BT(Lv,{experimentalForceLongPolling:!1,useFetchStreams:!1});hI(Lv);const et={init(){localStorage.getItem("sessionId")||(localStorage.setItem("sessionId",this.generateSessionId()),localStorage.setItem("sessionStartTime",Date.now().toString())),localStorage.getItem("semesterStartTime")||localStorage.setItem("semesterStartTime",Date.now().toString())},generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},async logEvent(t,e){const n=localStorage.getItem("sessionId")||this.generateSessionId(),r=parseInt(localStorage.getItem("sessionStartTime")||Date.now()),s=Date.now(),i=s-r,a=(i/1e3).toFixed(1),l=Math.floor(i/6e4),u=Math.floor(i%6e4/1e3),h=`${l}:${u.toString().padStart(2,"0")}`,p=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),m=this.getFullGameContext(),g={sessionId:n,studentId:p.studentId||null,type:t,timestamp:new Date().toISOString(),clientTimestamp:s,timeElapsedSeconds:parseFloat(a),readableTime:h,semesterTime:this.getSemesterTime(),...m,isAdminMode:p.role==="admin",hasCheckpoint:p.checkpointSemester2||!1,hasAI:p.hasAI||!1,section:p.section||null,...this.convertTimesToSeconds(e)};(t==="user_action"||t==="task_attempt")&&console.log(`DEBUG: Event ${t} - studentId: ${g.studentId}, role: ${p.role}`);try{await sf(Qn(tt,"events"),g)}catch(x){console.error("Failed to log event:",x),this.storeOfflineEvent(g)}},convertTimesToSeconds(t){const e={...t},n=["timeTaken","timeSpent","totalTime","timeOnPreviousPage","averageTime","timeBetweenHelpAndSubmit"];for(const r of n)e[r]!==void 0&&e[r]!==null&&(e[`${r}Seconds`]=(e[r]/1e3).toFixed(1),delete e[r]);return e.timeProgression&&(e.timeProgressionSeconds=e.timeProgression.map(r=>(r/1e3).toFixed(1)),delete e.timeProgression),e.timePerAttempt&&(e.timePerAttemptSeconds=e.timePerAttempt.map(r=>(r/1e3).toFixed(1)),delete e.timePerAttempt),e},getSemesterTime(){const t=parseInt(localStorage.getItem("semesterStartTime")||Date.now()),e=Date.now()-t,n=(e/1e3).toFixed(1),r=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3);return{elapsedSeconds:parseFloat(n),readable:`${r}:${s.toString().padStart(2,"0")}`,minutes:r,seconds:s}},getCurrentContext(){const t=parseInt(localStorage.getItem("sessionStartTime")||Date.now()),e=((Date.now()-t)/1e3).toFixed(1);return{currentTask:localStorage.getItem("currentTask"),gameMode:localStorage.getItem("gameMode"),totalCompleted:this.getCompletedTaskCount(),currentStreak:this.getCurrentStreak(),sessionDurationSeconds:parseFloat(e)}},getFullGameContext(){const t=localStorage.getItem("currentTask")||"",e=localStorage.getItem("gameMode")||"",n=parseInt(localStorage.getItem("currentSemester")||"1"),r=parseInt(localStorage.getItem("totalSemesters")||"2"),s=localStorage.getItem("practiceCompleted")==="true",i=parseInt(localStorage.getItem("completedTasksCount")||"0"),a=parseInt(localStorage.getItem("completedLevels")||"0"),l=parseInt(localStorage.getItem("totalSwitches")||"0"),u=parseInt(localStorage.getItem("aiUsageCount")||"0"),h=JSON.parse(localStorage.getItem("categoryPoints")||"{}"),p=parseFloat(localStorage.getItem("studentLearningScore")||"0");return{currentTask:t,gameMode:e,currentSemester:n,totalSemesters:r,practiceCompleted:s,completedTasks:i,completedLevels:a,totalSwitches:l,aiUsageCount:u,studentLearning:p,totalBonus:h.bonus||0,finalScore:Math.round(p)+(h.bonus||0),semester:n}},calculateImprovementTrend(t){if(!t||t.length<3)return"needs_more_data";const n=t.slice(-5).map(s=>s.accuracy),r=this.calculateTrend(n);return r>5?"rapid_improvement":r>2?"steady_improvement":r>0?"slight_improvement":r>-2?"stable":r>-5?"slight_decline":"rapid_decline"},calculateImprovementRate(t){if(!t||t.length<2)return{overall:0,trend:0,isImproving:!1,dataPoints:t?t.length:0};const e=t[0].accuracy,r=t[t.length-1].accuracy-e;if(t.length<3)return{overall:r,trend:r,isImproving:r>0,dataPoints:t.length};const s=Math.floor(t.length/2),i=t.slice(0,s).reduce((u,h)=>u+h.accuracy,0)/s,l=t.slice(s).reduce((u,h)=>u+h.accuracy,0)/(t.length-s)-i;return{overall:r,trend:l,isImproving:l>0,dataPoints:t.length}},setPageStartTime(t){t&&localStorage.setItem(`pageStartTime_${t}`,Date.now().toString())},getTimeOnCurrentPage(t){if(!t)return 0;const e=localStorage.getItem(`pageStartTime_${t}`);return e?Date.now()-parseInt(e):0},ensureSession(){localStorage.getItem("sessionId")||this.init()},async trackAIHelpResponse(t,e,n,r,s,i){const a=parseInt(localStorage.getItem("aiUsageCount")||"0");return localStorage.setItem("aiUsageCount",(a+1).toString()),this.logEvent("ai_help_response",{taskId:t,helpType:e,suggestion:n,playerAction:r,playerValue:s,timeBetween:i})},async trackTaskAttempt(t,e){return this.logEvent("task_attempt",{taskId:t,...e})},async trackUserAction(t,e){return this.logEvent("user_action",{action:t,response:e.response||"",query:e.query||"",queryType:e.queryType||"",choice:e.choice||"",currentMode:e.currentMode||"",...e})},async syncOfflineEvents(){return console.log("Syncing offline events..."),Promise.resolve()},async trackTaskComplete(t,e){return this.logEvent("task_complete",{taskId:t,...e})},async trackPageSwitch(t,e,n){return this.logEvent("page_switch",{from:t,to:e,isAutoAdvance:n})},trackAITaskHelp(t,e,n,r,s){return this.logEvent("ai_task_help",{taskId:t,taskType:e,suggestion:n,wasCorrect:r,attemptNumber:s})}};et.init();const Zn={seedRandom:null,currentSeed:null,initializeSeed(t){this.currentSeed=t;let e=t;this.seedRandom=function(){return e=(e*9301+49297)%233280,e/233280}},getRandom(){return this.seedRandom?this.seedRandom():Math.random()},generateCountingPattern(t){const e=t<=10?"easy":t<25?"medium":"hard";let n;e==="easy"?n=(t-1)%5+1:e==="medium"?n=(t-11)%5+6:n=(t-25)%5+11;const s={easy:{1:{target:"the",type:"word"},2:{target:"and",type:"word"},3:{target:"of",type:"word"},4:{target:"to",type:"word"},5:{target:"in",type:"word"}},medium:{6:{target:"e",type:"letter"},7:{target:"a",type:"letter"},8:{target:"i",type:"letter"},9:{target:"o",type:"letter"},10:{target:"s",type:"letter"}},hard:{11:{targets:["a","e"],type:"multi-letter"},12:{targets:["i","o"],type:"multi-letter"},13:{targets:["s","t"],type:"multi-letter"},14:{targets:["n","r"],type:"multi-letter"},15:{targets:["l","d"],type:"multi-letter"}}}[e][n];let i="";return s.type==="word"?i=`Count how many times the word "${s.target}" appears:`:s.type==="letter"?i=`Count how many times the letter "${s.target}" appears (case-insensitive):`:i=`Count how many times the letters "${s.targets[0]}" and "${s.targets[1]}" appear in total:`,{...s,instruction:i,difficulty:e,difficultyLabel:e.charAt(0).toUpperCase()+e.slice(1)}},generateSliderPattern(t){const e=t<=10?"easy":t<25?"medium":"hard";let n,r,s;return e==="easy"?(n=Math.floor(this.getRandom()*11),r=1,s=!0):e==="medium"?(n=Math.round(this.getRandom()*10*10)/10,r=.1,s=!0):(n=Math.round(this.getRandom()*10*100)/100,r=.01,s=(t-25)%5!==0),{target:n,step:r,showValue:s,difficulty:e,difficultyLabel:e.charAt(0).toUpperCase()+e.slice(1),precision:e==="easy"?0:e==="medium"?1:2}},generateTypingPattern(t){const e=t<=10?"easy":t<25?"medium":"hard",n={easy:["hello world","quick test","type this","easy mode","simple text","good job","keep going","nice work","almost done","level up"],medium:["HeLLo WoRLd","QuIcK tEsT","TyPe ThIs","MeDiUm MoDe","MiXeD cAsE","KeEp GoInG","NiCe WoRk","AlMoSt DoNe","LeVeL uP","ChAlLeNgE","TeSt RuN","NeXt LeVeL","TrY aGaIn","GoOd LuCk","FiNaL tEsT"],hard:["Test@123","Go4It!Now","X9%Y8&Z7*","P6!Q5?R4+","Z1@Y2#X3$","M7&N8*O9!","J4%K5^L6&","D1!E2@F3#","A7$B8%C9^","V3*W4+X5=","Q2#R3$S4%","H5^I6&J7*","K8(L9)M0!","N1@O2#P3$","T4%U5^V6&","W7*X8(Y9)","C0!D1@E2#","F3$G4%H5^","I6&J7*K8(","L9)M0!N1@","O2#P3$Q4%","R5^S6&T7*","U8(V9)W0!","X1@Y2#Z3$","A4%B5^C6&"]};let r;if(e==="easy"){const s=(t-1)%n.easy.length;r=n.easy[s]}else if(e==="medium"){const s=(t-11)%n.medium.length;r=n.medium[s]}else{const s=(t-25)%n.hard.length;r=n.hard[s]}return{pattern:r,difficulty:e,difficultyLabel:e.charAt(0).toUpperCase()+e.slice(1)}},textPassages:["The University of California, Berkeley (UC Berkeley, Berkeley, Cal, or California) is a public land-grant research university in Berkeley, California, United States. Founded in 1868 and named after the Anglo-Irish philosopher George Berkeley, it is the state's first land-grant university and is the founding campus of the University of California system.","Berkeley has an enrollment of more than 45,000 students. The university is organized around fifteen schools of study on the same campus, including the College of Chemistry, the College of Engineering, College of Letters and Science, and the Haas School of Business.",'The Berkeley campus encompasses approximately 1,232 acres, though the "central campus" occupies only the low-lying western 178 acres. The campus contains numerous wooded areas, including the Eucalyptus Grove and Strawberry Creek, which runs through the center of campus.',"Oski the Bear (Oski) is the official mascot of the University of California, Berkeley, representing the California Golden Bears. Named after the Oski Yell, he made his debut at a freshman rally in the Greek Theatre on September 25, 1941.","Berkeley faculty, alumni, and researchers have won 111 Nobel laureates, 25 Turing Award winners, and 19 Academy Award winners. The university has produced many notable alumni in various fields including science, politics, business, and entertainment.","The university's athletic teams compete as the California Golden Bears and are members of the Atlantic Coast Conference for most sports. Berkeley teams have won 107 national championships, including 45 NCAA national championships.","Research at Berkeley is conducted within departments, organized research units, and interdisciplinary research centers. Berkeley operates Lawrence Berkeley National Laboratory, manages Los Alamos National Laboratory, and is a founding partner of the Space Sciences Laboratory.","The Berkeley campus offers over 350 degree programs through its 14 colleges and schools. Popular majors include Computer Science, Economics, Political Science, and Business Administration. The student-faculty ratio is 17:1.","Berkeley's libraries contain more than 13 million volumes and maintain special collections including the Mark Twain Papers, the Oral History Center, and the Bancroft Library, which houses the largest collection of materials on California history.","The campus is home to several museums including the Berkeley Art Museum and Pacific Film Archive, the Lawrence Hall of Science, and the UC Botanical Garden. These facilities serve both educational and public outreach purposes.","Notable Berkeley inventions and discoveries include the cyclotron, the atomic bomb, the flu vaccine, and vitamin E. Berkeley researchers discovered 16 chemical elements of the periodic table, more than any other university.","The Free Speech Movement, which took place during the 1964-65 academic year, was a pivotal moment in the history of civil liberties in the United States. It began when students protested a ban on political activities on campus.","Berkeley's Campanile, known as Sather Tower, is the third-tallest clock tower in the world at 307 feet. It was completed in 1914 and is visible for miles, serving as a symbol of the university.","The university operates on a semester system, with fall semester beginning in late August and spring semester beginning in mid-January. Berkeley offers over 5,000 courses each semester across all disciplines.",`Cal Bears have won at least one team national title in 13 different sports. The university's traditional rival is Stanford University, with the annual football game known as "The Big Game" dating back to 1892.`],getTextPassage(t){if(this.seedRandom){const e=Math.floor(this.getRandom()*this.textPassages.length),n=(t-1+e)%this.textPassages.length;return this.textPassages[n]}else{const e=(t-1)%this.textPassages.length;return this.textPassages[e]}}};function Td({taskNum:t,onComplete:e,isPractice:n=!1,currentTaskId:r}){const[s,i]=V.useState(""),[a,l]=V.useState(""),[u,h]=V.useState(null),[p,m]=V.useState(""),[g,x]=V.useState(null),[A,P]=V.useState(""),[M,C]=V.useState(""),[I]=V.useState(Date.now()),[R,j]=V.useState(""),[B,z]=V.useState(!1),[w,v]=V.useState(new Set),S=V.useRef(0);V.useRef(null);const E=(oe,ae=null,q=null)=>{const N=document.createElement("canvas"),F=N.getContext("2d");N.width=900,N.height=400,F.fillStyle="#fafafa",F.fillRect(0,0,N.width,N.height),F.strokeStyle="#e0e0e0",F.lineWidth=2,F.strokeRect(0,0,N.width,N.height),F.font="24px monospace",F.fillStyle="#333";const L=36,$=25,X=N.width-$*2;return((xe,he)=>{const ce=xe.split(" "),Le=[];let we="";for(let ee of ce){const ke=we+(we?" ":"")+ee;F.measureText(ke).width>he&&we?(Le.push(we),we=ee):we=ke}return we&&Le.push(we),Le})(oe,X).forEach((xe,he)=>{const ce=$+(he+1)*L;let Le=$;if(t<=5){const we=xe.split(" ");let ee=0;we.forEach(ke=>{const Oe=q&&q.has(ee),Re=ae&&ae.some(wt=>ke.toLowerCase()===wt.toLowerCase());if(Oe){const wt=F.measureText(ke).width;F.fillStyle="yellow",F.fillRect(Le-2,ce-18,wt+4,24)}else if(Re){const wt=F.measureText(ke).width;F.fillStyle="rgba(255, 215, 0, 0.4)",F.fillRect(Le-2,ce-18,wt+4,24)}F.fillStyle="#333",F.fillText(ke,Le,ce),Le+=F.measureText(ke+" ").width,ee++})}else for(let we=0;we<xe.length;we++){const ee=xe[we],ke=F.measureText(ee).width;ae&&ae.some(Re=>ee.toLowerCase()===Re.toLowerCase())&&(F.fillStyle="rgba(255, 215, 0, 0.4)",F.fillRect(Le-1,ce-18,ke+2,24)),F.fillStyle="#333",F.fillText(ee,Le,ce),Le+=ke}}),N.toDataURL()};V.useEffect(()=>{m(0),x(null),S.current=0},[t]),V.useEffect(()=>{const oe=async(q,N)=>{const F=document.createElement("canvas"),L=F.getContext("2d");F.width=900,F.height=350,L.fillStyle="#fafafa",L.fillRect(0,0,F.width,F.height),L.strokeStyle="#e0e0e0",L.lineWidth=2,L.strokeRect(0,0,F.width,F.height),L.font="24px monospace";const $=36,X=20,re=F.width-X*2,xe=((he,ce)=>{const Le=he.split(" "),we=[];let ee="";for(let ke of Le){const Oe=ee+(ee?" ":"")+ke;L.measureText(Oe).width>ce&&ee?(we.push(ee),ee=ke):ee=Oe}return ee&&we.push(ee),we})(A,re);for(let he=0;he<q.length;he++)q[he],xe.forEach((ce,Le)=>{const we=X+(Le+1)*$;let ee=X;for(let ke=0;ke<ce.length;ke++){const Oe=ce[ke],Re=L.measureText(Oe).width;q.some(Ht=>Oe.toLowerCase()===Ht.toLowerCase())&&(L.fillStyle="rgba(255, 255, 0, 0.6)",L.fillRect(ee-1,we-20,Re+2,26)),L.fillStyle="#333",L.fillText(Oe,ee,we),ee+=Re}}),j(F.toDataURL()),await new Promise(ce=>setTimeout(ce,300));setTimeout(()=>{m(N.toString())},300)},ae=async q=>{const{action:N,highlightWords:F,suggestedCount:L,animate:$,isMultiLetter:X,targetLetters:re}=q.detail||{};if(N==="highlightAndCount"){if(X&&Array.isArray(re)){$&&await oe(re,L);return}if(Array.isArray(F)&&$){A.split(" ");let Ce=[];for(let xe=0;xe<F.length;xe++){Ce.push(F[xe]);const he=document.createElement("canvas"),ce=he.getContext("2d");he.width=900,he.height=350,ce.fillStyle="#fafafa",ce.fillRect(0,0,he.width,he.height),ce.strokeStyle="#e0e0e0",ce.lineWidth=2,ce.strokeRect(0,0,he.width,he.height),ce.font="24px monospace";const Le=36,we=20,ee=he.width-we*2;((Re,wt)=>{const Ht=Re.split(" "),qt=[];let Qt="";for(let Gt of Ht){const lr=Qt+(Qt?" ":"")+Gt;ce.measureText(lr).width>wt&&Qt?(qt.push(Qt),Qt=Gt):Qt=lr}return Qt&&qt.push(Qt),qt})(A,ee).forEach((Re,wt)=>{const Ht=we+(wt+1)*Le;let qt=we;Re.split(" ").forEach(Gt=>{const lr=ce.measureText(Gt).width;Ce.some(Cn=>{const cr=Gt.replace(/[.,;!?]/g,"").toLowerCase(),Pe=Cn.replace(/[.,;!?]/g,"").toLowerCase();return cr===Pe})&&(ce.fillStyle="rgba(255, 255, 0, 0.5)",ce.fillRect(qt-2,Ht-18,lr+4,24)),ce.fillStyle="#333",ce.fillText(Gt,qt,Ht),qt+=ce.measureText(Gt+" ").width})}),j(he.toDataURL()),await new Promise(Re=>setTimeout(Re,200))}setTimeout(()=>{m(L.toString())},300)}}};return window.addEventListener("aiCountingHelp",ae),()=>window.removeEventListener("aiCountingHelp",ae)},[A,t]),V.useEffect(()=>{var F;const oe=Zn.generateCountingPattern(t),ae=Zn.getTextPassage(t);P(ae),i(oe.target||((F=oe.targets)==null?void 0:F.join(", "))),l(oe.instruction);let q=0;if(oe.type==="word"){const L=new RegExp(`\\b${oe.target}\\b`,"gi"),$=ae.match(L);q=$?$.length:0}else if(oe.type==="letter"){const L=new RegExp(oe.target,"gi"),$=ae.match(L);q=$?$.length:0}else oe.type==="multi-letter"&&oe.targets.forEach(L=>{const $=new RegExp(L,"gi"),X=ae.match($);q+=X?X.length:0});h(q);const N=E(ae,null);j(N)},[t]);const _=async()=>{const oe=Date.now()-I,ae=parseInt(p,10)||0,q=u??0,N=Math.abs(ae-q),F=`g1t${t}`,L=localStorage.getItem(`lastAIHelp_${F}`);if(L){const re=JSON.parse(L),Ce=Date.now()-re.timestamp,xe=ae===re.suggestion?"accepted":"modified";await et.trackAIHelpResponse(F,re.type,re.suggestion,xe,ae,Ce),localStorage.removeItem(`lastAIHelp_${F}`)}let $=0;N===0?$=2:N<=1?$=1:$=0,S.current+=1,await et.trackTaskAttempt(F,S.current,!0,oe,ae,q);const X=localStorage.getItem("sessionId");if(X&&!X.startsWith("offline-"))try{await Gn(ln(tt,"sessions",X),{[`taskAccuracies.g1t${t}`]:$===2?100:$===1?70:0,[`taskTimes.g1t${t}`]:oe,[`taskPoints.g1t${t}`]:$,lastActivity:cn()})}catch(re){console.error("Error storing accuracy:",re)}x($===2?" Perfect! 2 points earned!":$===1?` Off by ${N} - 1 point earned!`:` Off by ${N} - 0 points earned.`),setTimeout(()=>{e==null||e(`g1t${t}`,{attempts:S.current,totalTime:oe,accuracy:$===2?100:$===1?70:0,userAnswer:ae,correctAnswer:q,points:$})},500)},T=Zn.generateCountingPattern(t).difficultyLabel,pe=t<=5?"easy":t<=10?"medium":"hard";return d.jsxs("div",{className:"task counting",children:[d.jsxs("h3",{children:["Research Content - Level ",t]}),d.jsx("div",{className:`difficulty-badge ${pe}`,children:T}),d.jsxs("p",{className:"instruction",children:[d.jsx("strong",{children:a}),d.jsx("br",{}),d.jsx("span",{className:"hint",children:"(Case-insensitive)"})]}),d.jsxs("div",{className:"text-display text-to-count","data-counting-text":A,children:[d.jsx("div",{className:"count-target","data-pattern":s,style:{display:"none"},children:s}),R?d.jsx("img",{src:R,alt:"Text passage for counting",style:{width:"100%",maxWidth:"900px",height:"auto",maxHeight:"350px",objectFit:"contain",border:"none",userSelect:"none",pointerEvents:"none"},onContextMenu:oe=>oe.preventDefault(),draggable:!1}):d.jsx("div",{dangerouslySetInnerHTML:{__html:M}})]}),d.jsxs("div",{className:"input-section",children:[d.jsx("label",{children:"Your answer:"}),d.jsx("input",{type:"number",min:"0",max:"999",value:p,onChange:oe=>m(oe.target.value),onKeyPress:oe=>{oe.key==="Enter"&&_()},placeholder:"Enter count"})]}),d.jsx("button",{onClick:_,className:"submit-btn",style:{display:"block",margin:"20px auto 0"},children:"Submit"}),g&&d.jsx("div",{className:`feedback ${g.includes("2 points")?"correct":g.includes("0 points")?"incorrect":"partial"}`,children:g})]})}function Id({taskNum:t,onComplete:e,isPractice:n=!1,currentTaskId:r}){const[s,i]=V.useState(5),[a,l]=V.useState(0),[u,h]=V.useState(null),[p]=V.useState(Date.now()),[m,g]=V.useState(1),[x,A]=V.useState(!0),[P,M]=V.useState(!1),[C,I]=V.useState(!1),[R,j]=V.useState(!1),[B,z]=V.useState(!1),w=V.useRef(null),v=V.useRef(0);V.useEffect(()=>{if(n)i(3),g(1),A(!0);else{const q=Zn.generateSliderPattern(t);i(q.target),g(q.step),A(q.showValue)}l(0),h(null),v.current=0},[t,n]),V.useEffect(()=>{const q=N=>{const{action:F,value:L,animate:$}=N.detail;if(F==="moveSlider")if(I(!0),$){const X=parseFloat(a),re=parseFloat(L),Ce=1e3,xe=30;let he=0;const ce=setInterval(()=>{he++;const Le=he/xe,we=1-Math.pow(1-Le,3),ee=X+(re-X)*we;l(parseFloat(ee.toFixed(2))),he>=xe&&(clearInterval(ce),I(!1),l(parseFloat(re.toFixed(2))))},Ce/xe)}else l(parseFloat(L.toFixed(2))),I(!1)};return window.addEventListener("aiSliderHelp",q),()=>window.removeEventListener("aiSliderHelp",q)},[a]),V.useEffect(()=>{const q=N=>{N.key==="Enter"&&!C&&k()};return document.addEventListener("keypress",q),()=>document.removeEventListener("keypress",q)},[C,a,s]);const S=q=>{if(C)return;const N=w.current;if(!N)return;q.preventDefault();const F=N.getBoundingClientRect(),L=a/10,$=F.left+F.width*L,X=q.clientX||q.touches&&q.touches[0].clientX;Math.abs(X-$)<30&&(j(!0),z(!0))},E=q=>{if(!R||C)return;const N=w.current;if(!N)return;const F=N.getBoundingClientRect(),L=q.clientX||q.touches&&q.touches[0].clientX,X=Math.max(0,Math.min(1,(L-F.left)/F.width))*10,re=Math.round(X/m)*m;l(parseFloat(re.toFixed(2)))},_=()=>{j(!1)};V.useEffect(()=>{if(R){const q=F=>E(F),N=()=>_();return document.addEventListener("mousemove",q),document.addEventListener("mouseup",N),document.addEventListener("touchmove",q),document.addEventListener("touchend",N),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",q),document.removeEventListener("touchend",N)}}},[R,m,C]);const k=async()=>{const q=Date.now()-p,N=parseFloat(a),F=Math.abs(N-s),L=`g2t${t}`,$=localStorage.getItem(`lastAIHelp_${L}`);if($){const Ce=JSON.parse($),xe=Date.now()-Ce.timestamp,he=N===Ce.suggestion?"accepted":"modified";await et.trackAIHelpResponse(L,Ce.type,Ce.suggestion,he,N,xe),localStorage.removeItem(`lastAIHelp_${L}`)}let X=0;F===0?X=2:F<=1?X=1:X=0,v.current+=1,await et.trackTaskAttempt(L,v.current,!0,q,N,s);const re=localStorage.getItem("sessionId");if(re&&!re.startsWith("offline-"))try{await Gn(ln(tt,"sessions",re),{[`taskDifferences.g2t${t}`]:F,[`taskTimes.g2t${t}`]:q,[`taskPoints.g2t${t}`]:X,lastActivity:cn()})}catch(Ce){console.error("Error storing difference:",Ce)}h(X===2?" Perfect! 2 points earned!":X===1?` Off by ${F.toFixed(2)} - 1 point earned!`:` Off by ${F.toFixed(2)} - 0 points earned.`),setTimeout(()=>{e(`g2t${t}`,{attempts:v.current,totalTime:q,accuracy:X===2?100:X===1?70:0,userAnswer:N,correctAnswer:s,points:X})},500)},T=Zn.generateSliderPattern(t),pe=T.difficultyLabel,oe=T.difficulty,ae=()=>{const q=[];for(let N=0;N<=10;N++)q.push(d.jsxs("div",{style:{position:"absolute",left:`${N*10}%`,transform:"translateX(-50%)",textAlign:"center"},children:[d.jsx("div",{style:{width:"2px",height:"12px",background:"#666",margin:"0 auto"}}),d.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"2px"},children:N})]},N));return q};return d.jsxs("div",{className:`task slider ${C?"ai-controlled":""}`,children:[d.jsxs("h3",{children:["Material Creation - Level ",t]}),d.jsx("div",{className:`difficulty-badge ${oe}`,children:pe}),d.jsxs("p",{className:"instruction",children:["Move the slider to:"," ",d.jsx("strong",{className:"target-value","data-target-value":s,children:s}),d.jsx("br",{}),d.jsx("span",{style:{fontSize:"14px",color:"#666",fontStyle:"italic"},children:!B&&"Hold and drag the slider handle to move it"})]}),d.jsxs("div",{className:"slider-container",children:[d.jsxs("div",{className:"range-labels",children:[d.jsx("span",{children:"0"}),d.jsx("span",{children:"10"})]}),d.jsxs("div",{style:{position:"relative",padding:"20px 0 30px 0"},children:[d.jsx("div",{style:{position:"absolute",width:"100%",height:"20px",top:"0"},children:ae()}),d.jsx("div",{style:{position:"relative",marginTop:"20px"},children:d.jsx("input",{ref:w,type:"range",min:"0",max:"10",step:m,value:a,onChange:q=>{!R&&!C&&(l(parseFloat(q.target.value)),z(!0))},className:"slider-input",style:{width:"100%",cursor:R?"grabbing":"grab"},onMouseDown:S,onTouchStart:S})})]}),d.jsx("div",{className:"current-value",children:x?parseFloat(a).toFixed(n?0:T.precision):"??"})]}),d.jsx("button",{onClick:k,className:"submit-btn",disabled:C,style:{display:"block",margin:"20px auto 0"},children:"Submit"}),u&&d.jsx("div",{className:`feedback ${u.includes("2 points")?"correct":u.includes("0 points")?"incorrect":"partial"}`,children:u})]})}function Ad({taskNum:t,onComplete:e,isPractice:n=!1,currentTaskId:r}){const[s,i]=V.useState(""),[a,l]=V.useState(""),[u,h]=V.useState(null),[p]=V.useState(Date.now()),[m,g]=V.useState(""),[x,A]=V.useState(!1),P=V.useRef(0),M=B=>{const z=document.createElement("canvas"),w=z.getContext("2d");return z.width=600,z.height=150,w.fillStyle="#f5f5f5",w.fillRect(0,0,z.width,z.height),w.font='bold 40px "Courier New", monospace',w.fillStyle="#333",w.textAlign="center",w.textBaseline="middle",w.fillText(B,z.width/2,z.height/2),z.toDataURL()};V.useEffect(()=>{const z=Zn.generateTypingPattern(t).pattern;i(z);const w=M(z);g(w)},[t]),V.useEffect(()=>{l(""),h(null),P.current=0},[t]),V.useEffect(()=>{const B=z=>{const{action:w,text:v,typeSpeed:S}=z.detail;if(w==="autoType"&&v){A(!0),l("");let E="",_=0;const k=setInterval(()=>{_<v.length?(E+=v[_],l(E),_++):(clearInterval(k),A(!1))},S||50);return()=>clearInterval(k)}};return window.addEventListener("aiTypingHelp",B),()=>window.removeEventListener("aiTypingHelp",B)},[]);const C=async()=>{const B=Date.now()-p,z=`g3t${t}`,w=localStorage.getItem(`lastAIHelp_${z}`);if(w){const k=JSON.parse(w),T=Date.now()-k.timestamp,pe=a===k.suggestion?"accepted":"modified";await et.trackAIHelpResponse(z,k.type,k.suggestion,pe,a,T),localStorage.removeItem(`lastAIHelp_${z}`)}const S=((k,T)=>{const pe=k.length,oe=T.length,ae=Array(pe+1).fill(null).map(()=>Array(oe+1).fill(0));for(let q=0;q<=pe;q++)ae[q][0]=q;for(let q=0;q<=oe;q++)ae[0][q]=q;for(let q=1;q<=pe;q++)for(let N=1;N<=oe;N++)k[q-1]===T[N-1]?ae[q][N]=ae[q-1][N-1]:ae[q][N]=Math.min(ae[q-1][N]+1,ae[q][N-1]+1,ae[q-1][N-1]+1);return ae[pe][oe]})(a,s);let E=0;S===0?E=2:S===1?E=1:E=0,P.current+=1,await et.trackTaskAttempt(z,P.current,!0,B,a,s);const _=localStorage.getItem("sessionId");if(_&&!_.startsWith("offline-"))try{await Gn(ln(tt,"sessions",_),{[`taskAccuracies.g3t${t}`]:E===2?100:E===1?70:0,[`taskTimes.g3t${t}`]:B,[`taskPoints.g3t${t}`]:E,lastActivity:cn()})}catch(k){console.error("Error storing accuracy:",k)}h(E===2?" Perfect! 2 points earned!":E===1?" 1 typo - 1 point earned!":` ${S} errors - 0 points earned.`),setTimeout(()=>{e(`g3t${t}`,{attempts:P.current,totalTime:B,accuracy:E===2?100:E===1?70:0,userAnswer:a,correctAnswer:s,points:E})},500)},I=Zn.generateTypingPattern(t),R=I.difficultyLabel,j=I.difficulty;return d.jsxs("div",{className:"task typing",style:{maxWidth:"100%"},children:[d.jsxs("h3",{children:["Student Engagement - Level ",t]}),d.jsx("div",{className:`difficulty-badge ${j}`,children:R}),d.jsx("p",{className:"instruction",children:"Type this pattern exactly:"}),d.jsxs("div",{className:"pattern-display",children:[d.jsx("div",{className:"typing-pattern","data-typing-pattern":s,style:{display:"none"},children:s}),m?d.jsx("img",{src:m,alt:"Pattern to type",style:{width:"100%",maxWidth:"600px",height:"auto",userSelect:"none",pointerEvents:"none"},onContextMenu:B=>B.preventDefault(),draggable:!1}):d.jsx("span",{className:"pattern-text",children:s})]}),d.jsx("div",{className:"input-section",style:{width:"90%",maxWidth:"900px",margin:"20px auto 0"},children:d.jsx("input",{type:"text",inputMode:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:a,onChange:B=>!x&&l(B.target.value),onKeyPress:B=>{B.key==="Enter"&&!x&&(B.preventDefault(),C())},placeholder:"Type here...",className:"typing-input",disabled:x,style:{backgroundColor:x?"#e3f2fd":"white",transition:"background-color 0.3s",width:"100%",maxWidth:"100%",fontFamily:'"Courier New", monospace',fontSize:"28px",padding:"12px 14px",border:"2px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box"}})}),d.jsx("button",{onClick:C,className:"submit-btn",disabled:x,style:{display:"block",margin:"20px auto 0"},children:"Submit"}),u&&d.jsx("div",{className:`feedback ${u.includes("2 points")?"correct":u.includes("0 points")?"incorrect":"partial"}`,children:u})]})}function mI({practiceCompleted:t={},onPracticeComplete:e,onStartMainGame:n,onSelectPractice:r,isAdmin:s=!1}){const[i,a]=V.useState(null),l=(g,x)=>{if(x&&x.points===2){typeof e=="function"&&e(g,x);const A=document.createElement("div");A.className="notification-enter",A.style.cssText="position: fixed; bottom: 20px; left: 20px; background: #4CAF50; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10000; max-width: 400px;",A.textContent="Perfect! Practice task completed. Returning to menu...",document.body.appendChild(A),setTimeout(()=>{a(null),document.body.contains(A)&&document.body.removeChild(A)},1500)}else{const A=(x==null?void 0:x.points)||0,P=document.createElement("div");P.className="notification-enter",P.style.cssText="position: fixed; bottom: 20px; left: 20px; background: #ff9800; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10000; max-width: 400px;",P.textContent=`Practice requires 100% accuracy. You scored ${A===1?"50%":"0%"}. Try again!`,document.body.appendChild(P),setTimeout(()=>{document.body.contains(P)&&document.body.removeChild(P)},3e3)}},u=t.g2t1&&t.g1t1&&t.g3t1,h=()=>d.jsxs("div",{className:"practice-menu",children:[d.jsxs("h2",{children:["Practice Mode ",!s&&"(Required)"]}),!s&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #fff3cd 0%, #ffebee 100%)",borderRadius:"12px",padding:"16px",marginBottom:"25px",border:"2px solid #f57c00",boxShadow:"0 4px 6px rgba(245, 124, 0, 0.1)",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[d.jsx("span",{style:{fontSize:"20px"},children:""}),d.jsx("strong",{style:{color:"#e65100",fontSize:"18px"},children:"100% PERFECT ACCURACY REQUIRED"})]}),d.jsxs("div",{style:{color:"#e65100",fontSize:"14px"},children:["You must score 2/2 points (exact answer) on all three practice tasks to proceed.",d.jsx("br",{}),d.jsx("strong",{children:"No partial credit in practice mode!"})]}),d.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"12px"},children:[d.jsxs("span",{style:{padding:"4px 12px",background:t.g2t1?"#e8f5e9":"white",borderRadius:"20px",fontSize:"13px",color:t.g2t1?"#4CAF50":"#f57c00",fontWeight:"600",border:`1px solid ${t.g2t1?"#4CAF50":"#ffb74d"}`},children:["Materials ",t.g2t1?"":"Required"]}),d.jsxs("span",{style:{padding:"4px 12px",background:t.g1t1?"#e8f5e9":"white",borderRadius:"20px",fontSize:"13px",color:t.g1t1?"#4CAF50":"#f57c00",fontWeight:"600",border:`1px solid ${t.g1t1?"#4CAF50":"#ffb74d"}`},children:["Research ",t.g1t1?"":"Required"]}),d.jsxs("span",{style:{padding:"4px 12px",background:t.g3t1?"#e8f5e9":"white",borderRadius:"20px",fontSize:"13px",color:t.g3t1?"#4CAF50":"#f57c00",fontWeight:"600",border:`1px solid ${t.g3t1?"#4CAF50":"#ffb74d"}`},children:["Engagement ",t.g3t1?"":"Required"]})]})]}),d.jsx("p",{className:"practice-hint",style:{textAlign:"center",fontSize:"16px",color:"#666",marginBottom:"30px"},children:"Try each task type before starting the main challenge. No time pressure!"}),d.jsxs("div",{className:"practice-cards",children:[d.jsxs("div",{className:"practice-card materials",children:[d.jsx("h3",{children:" Materials"}),d.jsx("p",{children:"Hold and drag slider to match target values"}),d.jsx("p",{style:{fontSize:"13px",color:"#666",marginTop:"10px"},children:"Base points - directly added to score"}),d.jsx("div",{className:"practice-buttons",children:d.jsx("button",{onClick:()=>{a("g2t1"),r&&r("g2t1")},className:t.g2t1?"completed":"",disabled:!1,children:t.g2t1?" Completed":"Try Materials"})})]}),d.jsxs("div",{className:"practice-card research",children:[d.jsx("h3",{children:" Research"}),d.jsx("p",{children:"Count words or letters in text passages"}),d.jsx("p",{style:{fontSize:"13px",color:"#666",marginTop:"10px"},children:"Worth 15% multiplier per point in main game"}),d.jsx("div",{className:"practice-buttons",children:d.jsx("button",{onClick:()=>{a("g1t1"),r&&r("g1t1")},className:t.g1t1?"completed":"",disabled:!1,children:t.g1t1?" Completed":"Try Research"})})]}),d.jsxs("div",{className:"practice-card engagement",children:[d.jsx("h3",{children:" Engagement"}),d.jsx("p",{children:"Type patterns exactly as shown"}),d.jsx("p",{style:{fontSize:"13px",color:"#666",marginTop:"10px"},children:"Worth 0.15% compound interest per point"}),d.jsx("div",{className:"practice-buttons",children:d.jsx("button",{onClick:()=>{a("g3t1"),r&&r("g3t1")},className:t.g3t1?"completed":"",disabled:!1,children:t.g3t1?" Completed":"Try Engagement"})})]})]}),d.jsxs("div",{style:{marginTop:"25px",padding:"15px",background:"#f5f5f5",borderRadius:"8px",textAlign:"center"},children:[d.jsx("h4",{style:{margin:"0 0 10px 0",color:"#333",fontSize:"16px"},children:"Practice Progress:"}),d.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[d.jsxs("div",{style:{padding:"8px 15px",background:t.g2t1?"#4CAF50":"#e0e0e0",color:t.g2t1?"white":"#666",borderRadius:"20px",fontSize:"14px"},children:["Materials ",t.g2t1&&""]}),d.jsxs("div",{style:{padding:"8px 15px",background:t.g1t1?"#9C27B0":"#e0e0e0",color:t.g1t1?"white":"#666",borderRadius:"20px",fontSize:"14px"},children:["Research ",t.g1t1&&""]}),d.jsxs("div",{style:{padding:"8px 15px",background:t.g3t1?"#f44336":"#e0e0e0",color:t.g3t1?"white":"#666",borderRadius:"20px",fontSize:"14px"},children:["Engagement ",t.g3t1&&""]})]}),d.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#666"},children:[d.jsx("strong",{children:"100% accuracy required"})," to complete each practice task"]})]}),d.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:d.jsx("button",{className:"start-main-game-btn",onClick:n,style:{opacity:!s&&!u?.5:1,cursor:!s&&!u?"not-allowed":"pointer"},disabled:!s&&!u,children:s?"Start Main Game (Admin)":u?"Start Main Game - You're Ready! ":"Complete Practice First"})})]});if(!i)return h();const p=i[1],m=1;return d.jsxs("div",{className:"practice-container",children:[d.jsx("button",{className:"back-to-menu",onClick:()=>a(null),children:" Back to Practice Menu"}),d.jsxs("div",{style:{textAlign:"center",padding:"10px",background:"#fff3cd",borderRadius:"6px",margin:"10px 0",fontSize:"14px",color:"#856404"},children:[d.jsx("strong",{children:"Practice Mode:"})," 100% accuracy required. Will auto-return after completion."]}),d.jsxs("div",{className:"practice-task-wrapper",children:[p==="1"&&d.jsx(Td,{taskNum:m,onComplete:l,isPractice:!0,currentTaskId:i}),p==="2"&&d.jsx(Id,{taskNum:m,onComplete:l,isPractice:!0,currentTaskId:i}),p==="3"&&d.jsx(Ad,{taskNum:m,onComplete:l,isPractice:!0,currentTaskId:i})]})]})}class gI{constructor(){this.totalAIUsage=0,this.usageCount={materials:0,research:0,engagement:0},this.taskUsageCount={}}getUniversalAttemptNumber(){return this.totalAIUsage}shouldAIBeCorrect(e){let n;return e===1||e===2||e===4||e===5?n=!0:e===3?n=!1:n=Math.random()<.75,n}getTaskUsageCount(e){return this.taskUsageCount[e]||(this.taskUsageCount[e]=0),this.taskUsageCount[e]}incrementTaskUsage(e,n){this.totalAIUsage++,this.usageCount[n]++,this.taskUsageCount[e]||(this.taskUsageCount[e]=0),this.taskUsageCount[e]++}resetForNewSemester(){this.totalAIUsage=0,this.usageCount={materials:0,research:0,engagement:0},this.taskUsageCount={},console.log(" AI Help usage reset for new semester")}helpWithSlider(e,n){this.incrementTaskUsage(n,"materials");const r=this.getUniversalAttemptNumber();let s;if(this.shouldAIBeCorrect(r))s=e;else if(r===3){const i=Math.random()<.5?-1:1;s=Math.max(0,Math.min(10,e+i))}else if(Math.random()<.5){const i=Math.random()<.5?-1:1;s=Math.max(0,Math.min(10,e+i))}else{const i=(Math.random()<.5?-1:1)*(2+Math.random()*2);s=Math.max(0,Math.min(10,e+i))}return{action:"moveSlider",value:s,animate:!0}}helpWithCounting(e,n,r){this.incrementTaskUsage(r,"research");const s=this.getUniversalAttemptNumber(),i=this.shouldAIBeCorrect(s);return n.length===1||n.includes(" and ")||n.includes(",")?this.helpWithLetterCounting(e,n,s,i):this.helpWithWordCounting(e,n,s,i)}helpWithLetterCounting(e,n,r,s){let i=[];n.includes(" and ")||n.includes(",")?i=n.match(/[a-z]/gi)||[]:i=[n];let a=0;i.forEach(h=>{const p=new RegExp(h,"gi"),m=e.match(p);a+=m?m.length:0});let l=a,u=[...i];if(!s){r===3||Math.random()<.5?l=a+1:l=a+Math.floor(Math.random()*3)+2,l=Math.max(0,l);const p="abcdefghijklmnopqrstuvwxyz".split("").filter(g=>!i.includes(g.toLowerCase())),m=Math.floor(Math.random()*2)+1;for(let g=0;g<m&&p.length>0;g++){const x=Math.floor(Math.random()*p.length);u.push(p[x]),p.splice(x,1)}}return{action:"highlightAndCount",highlightWords:[],suggestedCount:l,animate:!0,isMultiLetter:!0,targetLetters:u}}helpWithWordCounting(e,n,r,s){const i=e.split(/\s+/),a=[];let l=0,u=0;if(i.forEach(h=>{h.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&u++}),s)i.forEach(h=>{h.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&(a.push(h),l++)});else if(r===3){l=u+1,l=Math.max(0,l),i.forEach(p=>{p.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&a.push(p)});const h=i.filter(p=>p.replace(/[.,;!?]/g,"").toLowerCase()!==n.toLowerCase());if(h.length>0&&a.length<l){const p=h[Math.floor(Math.random()*h.length)];a.push(p)}}else{Math.random()<.5?l=u+1:l=u+Math.floor(Math.random()*3)+2,l=Math.max(0,l),i.forEach(p=>{p.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&a.push(p)});const h=i.filter(p=>p.replace(/[.,;!?]/g,"").toLowerCase()!==n.toLowerCase());for(;a.length<l&&h.length>0;){const p=Math.floor(Math.random()*h.length),m=h[p];a.includes(m)||a.push(m),h.splice(p,1)}}return{action:"highlightAndCount",highlightWords:a,suggestedCount:l,animate:!0}}helpWithTyping(e,n){this.incrementTaskUsage(n,"engagement");const r=this.getUniversalAttemptNumber();let s=e;const i={0:["o","O"],o:["0"],O:["0"],1:["l","I","i"],l:["1","I","i"],I:["1","l","i"],i:["1","l","I"],e:["3"],3:["e"],a:["@"],"@":["a"],s:["5","$"],S:["5","$"],5:["s","S"],$:["s","S"],g:["9"],9:["g"],b:["6"],6:["b"],z:["2"],2:["z"],B:["8"],8:["B"]},a=l=>{const u=l.split(""),h=u.map((p,m)=>i[p]?m:-1).filter(p=>p!==-1);if(h.length>0){const p=h[Math.floor(Math.random()*h.length)],m=u[p],g=i[m];g&&g.length>0&&(u[p]=g[Math.floor(Math.random()*g.length)])}else{const p=["transpose","duplicate","missing"],m=p[Math.floor(Math.random()*p.length)],g=Math.floor(Math.random()*u.length);switch(m){case"transpose":g<u.length-1&&([u[g],u[g+1]]=[u[g+1],u[g]]);break;case"duplicate":u.splice(g,0,u[g]);break;case"missing":u.splice(g,1);break}}return u.join("")};if(this.shouldAIBeCorrect(r))s=e;else if(r===3)s=a(e);else if(Math.random()<.5)s=a(e);else{let l=e;const u=Math.floor(Math.random()*3)+2;for(let h=0;h<u;h++)l=a(l);s=l}return{action:"autoType",text:s,typeSpeed:50,perfect:this.shouldAIBeCorrect(r)}}}const yI=new gI,Ml={generateCode(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,8);return`${t}-${e}`.toUpperCase()},async createCode(t={}){return{success:!0,code:this.generateCode(),data:t}},async markCodeAsUsed(t,e){if(!t)return{success:!1,error:"No code provided"};try{const n={code:t,status:"used",usedAt:cn(),sessionId:e,createdAt:cn()};return await rI(ln(tt,"accessCodes",t),n),{success:!0}}catch(n){return console.error("Error marking code as used:",n),{success:!1,error:n.message}}},async checkCodeUsage(t){if(!t)return{used:!1};try{const e=await nI(ln(tt,"accessCodes",t));if(e.exists()){const n=e.data();return{used:n.status==="used",sessionId:n.sessionId,usedAt:n.usedAt}}return{used:!1}}catch(e){return console.error("Error checking code usage:",e),{used:!1,error:e.message}}},getCodeFromURL(){const t=new URLSearchParams(window.location.search);return t.get("code")||t.get("c")||null},async verifyQualtricsCode(t){return{valid:!1,reason:"Qualtrics codes not yet supported"}}};function vI({onLoginSuccess:t}){const[e,n]=V.useState(""),[r,s]=V.useState(!1),[i,a]=V.useState(""),[l,u]=V.useState(!1),h={"ADMIN-MASTER":{role:"master_admin",name:"Master Administrator",hasAI:!1,isMasterInterface:!0},...Array.from({length:10},(x,A)=>({[`ADMIN-TEST${A+1}`]:{role:"test",semesterDuration:72e4,name:`Test User ${A+1}`,hasAI:!0,checkpointSemester2:!0,isTestCode:!0}})).reduce((x,A)=>({...x,...A}),{}),"ADMIN-REGULAR":{role:"admin",semesterDuration:72e4,name:"Admin Regular Mode",hasAI:!0,checkpointSemester2:!0},"ADMIN-FAST":{role:"admin",semesterDuration:12e4,name:"Admin Fast Mode",hasAI:!0,checkpointSemester2:!0},"ADMIN-1-CP":{role:"admin",semesterDuration:12e4,name:"Admin Section 1 WITH Checkpoint",hasAI:!1,checkpointSemester2:!0},"ADMIN-1-NCP":{role:"admin",semesterDuration:12e4,name:"Admin Section 1 NO Checkpoint",hasAI:!1,checkpointSemester2:!1},"ADMIN-2-CP":{role:"admin",semesterDuration:12e4,name:"Admin Section 2 WITH Checkpoint",hasAI:!0,checkpointSemester2:!0},"ADMIN-2-NCP":{role:"admin",semesterDuration:12e4,name:"Admin Section 2 NO Checkpoint",hasAI:!0,checkpointSemester2:!1}},p=x=>({section:"TESTING-AI-CP",hasAI:!0,checkpointSemester2:!0,displayName:`${x} (Internal Tester - AI + Checkpoint)`}),m=x=>{if(h[x])return{valid:!0,type:"master",data:h[x]};const A=x.trim().replace(/[^a-zA-Z0-9\s\-_]/g,"");return A.length<2?{valid:!1,error:"Please enter a name with at least 2 characters"}:A.length>50?{valid:!1,error:"Name too long. Please use 50 characters or less"}:{valid:!0,type:"tester",condition:p(A),cleanName:A}},g=async x=>{if(x.preventDefault(),!e.trim()){a("Please enter your name");return}s(!0),a("");try{const A=m(e.trim());if(!A.valid){a(A.error||"Invalid Student ID"),s(!1);return}let P={timestamp:new Date().toISOString()};if(A.type==="master"){if(P={...P,studentIdentifier:e,role:A.data.role,semesterDuration:A.data.semesterDuration,displayName:A.data.name,section:A.data.isTestCode?"ADMIN-TEST":"ADMIN",hasAI:A.data.hasAI,checkpointSemester2:A.data.checkpointSemester2,isMasterCode:!0,isTestCode:A.data.isTestCode||!1,isMasterInterface:A.data.isMasterInterface||!1},A.data.isMasterInterface){sessionStorage.setItem("gameConfig",JSON.stringify({role:"master_admin",displayName:A.data.name,section:"master_admin",hasAI:!0,checkpointSemester2:!0})),window.location.href=`${window.location.origin}?master=true`;return}}else if(A.type==="tester"){const C=A.condition,I=A.cleanName;P={...P,studentIdentifier:I,role:"tester",semesterDuration:72e4,displayName:C.displayName,section:C.section,hasAI:C.hasAI,checkpointSemester2:C.checkpointSemester2,isMasterCode:!1,isTestUser:!0}}const M=await Ml.createCode(P);M.success?(sessionStorage.setItem("gameConfig",JSON.stringify({semesterDuration:P.semesterDuration,role:P.role,studentId:P.studentIdentifier,displayName:P.displayName,section:P.section,hasAI:P.hasAI,checkpointSemester2:P.checkpointSemester2})),window.location.href=`${window.location.origin}?code=${M.code}`):a("Failed to generate access code. Please try again.")}catch(A){console.error("Login error:",A),a("System error. Please try again.")}finally{s(!1)}};return d.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",padding:"20px"},children:[d.jsxs("div",{style:{background:"white",padding:"48px",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",maxWidth:"480px",width:"100%"},children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[d.jsxs("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},children:["Scheduling Challenge:",d.jsx("br",{}),"Can you beat Park?"]}),d.jsx("p",{style:{fontSize:"16px",color:"#718096",marginTop:"12px"},children:"Enter your name to access the game"})]}),d.jsxs("form",{onSubmit:g,children:[d.jsxs("div",{style:{marginBottom:"24px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#2d3748",fontWeight:"600",fontSize:"14px",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Your Name:"}),d.jsx("input",{type:"text",value:e,onChange:x=>n(x.target.value),disabled:r,style:{width:"100%",padding:"14px 16px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",boxSizing:"border-box",fontFamily:"'SF Mono', Monaco, 'Courier New', monospace",transition:"all 0.2s ease",background:"#f7fafc",outline:"none"},onFocus:x=>{x.target.style.borderColor="#2196F3",x.target.style.background="white",x.target.style.boxShadow="0 0 0 3px rgba(33, 150, 243, 0.1)"},onBlur:x=>{x.target.style.borderColor="#e2e8f0",x.target.style.background="#f7fafc",x.target.style.boxShadow="none"}}),d.jsx("div",{style:{marginTop:"8px",fontSize:"13px",color:"#a0aec0",lineHeight:"1.4"},children:"Enter your first and last name (2-50 characters)"})]}),i&&d.jsxs("div",{style:{background:"#fed7d7",color:"#c53030",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",fontSize:"14px",display:"flex",alignItems:"center",border:"1px solid #fc8181"},children:[d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",style:{marginRight:"8px",flexShrink:0},children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),i]}),d.jsx("button",{type:"submit",disabled:r,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:"600",background:r?"#cbd5e0":"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:r?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:r?"none":"0 4px 6px rgba(33, 150, 243, 0.25)",transform:r?"none":"translateY(0)"},onMouseDown:x=>{r||(x.target.style.transform="translateY(2px)",x.target.style.boxShadow="0 2px 4px rgba(33, 150, 243, 0.25)")},onMouseUp:x=>{r||(x.target.style.transform="translateY(0)",x.target.style.boxShadow="0 4px 6px rgba(33, 150, 243, 0.25)")},onMouseOver:x=>{r||(x.target.style.background="#1976D2")},onMouseOut:x=>{r||(x.target.style.background="#2196F3")},children:r?d.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsxs("svg",{className:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"8px",animation:"spin 1s linear infinite"},children:[d.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeOpacity:"0.25"}),d.jsx("path",{d:"M4 12a8 8 0 018-8",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})]}),"Verifying Name..."]}):"Access Game"})]}),d.jsxs("div",{style:{marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #e2e8f0",textAlign:"center"},children:[d.jsx("p",{style:{fontSize:"14px",color:"#718096",marginBottom:"12px"},children:"Having trouble? Contact your instructor:"}),d.jsxs("p",{style:{fontSize:"16px",color:"#2196F3",fontWeight:"500"},children:["Park Sinchaisri",d.jsx("br",{}),d.jsx("a",{href:"mailto:parksinchaisri@haas.berkeley.edu",style:{color:"#2196F3",textDecoration:"none",borderBottom:"1px solid #2196F3",fontSize:"15px"},children:"parksinchaisri@haas.berkeley.edu"})]}),l&&d.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f7fafc",borderRadius:"8px",fontSize:"11px",color:"#4a5568",lineHeight:"1.8"},children:[d.jsx("strong",{children:"Test Codes:"}),d.jsxs("div",{style:{marginTop:"8px",fontFamily:"monospace"},children:[d.jsx("div",{children:"ADMIN-TEST1 to ADMIN-TEST10 (Test users)"}),d.jsx("div",{children:"ADMIN-1-CP (No AI, With Checkpoint)"}),d.jsx("div",{children:"ADMIN-1-NCP (No AI, No Checkpoint)"}),d.jsx("div",{children:"ADMIN-2-CP (AI, With Checkpoint)"}),d.jsx("div",{children:"ADMIN-2-NCP (AI, No Checkpoint)"}),d.jsx("div",{children:"ADMIN-REGULAR (Original)"}),d.jsx("div",{children:"ADMIN-FAST (2 min test)"}),d.jsx("div",{children:"ADMIN-MASTER (Master interface)"})]})]})]})]}),d.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]})}const Um={async checkDailyLimit(t){var r;if(!t)return{allowed:!0};const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);try{const s=Qn(tt,"sessions"),i=Yi(s,Sd("studentId","==",t),Sd("startTime",">=",n)),a=await js(i);if(!a.empty){const l=a.docs[0].data(),u=(r=l.startTime)!=null&&r.toDate?l.startTime.toDate():new Date(l.clientStartTime);return{allowed:!1,reason:"daily_limit",existingSession:l,nextAvailable:new Date(n.getTime()+24*60*60*1e3)}}return{allowed:!0}}catch(s){console.error("Error checking daily limit:",s);const i=`played_${t}_${n.toISOString().split("T")[0]}`;return localStorage.getItem(i)?{allowed:!1,reason:"daily_limit",nextAvailable:new Date(n.getTime()+24*60*60*1e3)}:{allowed:!0}}},async markDailyPlay(t){const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),r=`played_${t}_${n.toISOString().split("T")[0]}`;localStorage.setItem(r,"true");const s=new Date(Date.now()-7*24*60*60*1e3);for(let i=0;i<localStorage.length;i++){const a=localStorage.key(i);if(a&&a.startsWith("played_")){const l=a.split("_")[2];l&&new Date(l)<s&&localStorage.removeItem(a)}}},async checkAccess(){try{const t=Ml.getCodeFromURL();if(!t)return{allowed:!1,reason:"Please login with your student ID",requiresCode:!0};const e=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),n=e.role==="admin"||e.role==="master_admin";if(!n&&e.studentId){const r=await this.checkDailyLimit(e.studentId);if(!r.allowed&&!r.refreshGranted){const i=r.nextAvailable;return{allowed:!1,reason:`You have already completed today's session. Please come back in ${Math.ceil((i-Date.now())/(1e3*60*60))} hours (after midnight).`,dailyLimitReached:!0,nextAvailable:i}}if(sessionStorage.getItem("activeSessionId"))return{allowed:!1,reason:"Page refresh is not allowed during the game. Your session has been terminated.",refreshAttempt:!0}}return e.studentId?(n||await this.markDailyPlay(e.studentId),{allowed:!0,newSession:!0,code:t,codeData:{status:"new",metadata:e},isAdmin:n}):{allowed:!1,reason:"Please login with your Berkeley student ID",requiresCode:!0}}catch(t){console.error("Error in checkAccess:",t);const e=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");return e.role==="admin"?{allowed:!0,newSession:!0,code:Ml.getCodeFromURL(),codeData:{status:"error_bypass",metadata:e},isAdmin:!0}:{allowed:!1,reason:"System error. Please try again.",requiresCode:!0}}},async createSession(t=null,e=null,n=!1){try{const r=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),s=r.role==="admin"||r.role==="master_admin",i={id:crypto.randomUUID(),accessCode:t,studentId:r.studentId||null,role:r.role||"student",semesterDuration:r.semesterDuration||72e4,displayName:r.displayName||"Student",startTime:cn(),clientStartTime:new Date().toISOString(),status:"active",completedTasks:{},isPractice:n,isAdminSession:s,userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`,section:r.section,hasAI:r.hasAI,checkpointSemester2:r.checkpointSemester2},l=(await sf(Qn(tt,"sessions"),i)).id;return localStorage.setItem("sessionId",l),sessionStorage.setItem("activeSessionId",l),s||(window.addEventListener("beforeunload",u=>{u.preventDefault(),u.returnValue="Your progress will be lost if you leave this page.",this.handleSessionAbandonment()}),document.addEventListener("visibilitychange",()=>{!s&&document.hidden})),l}catch(r){console.error("Error creating session:",r);const s=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");if(s.role==="admin"){const i="offline-"+Date.now();localStorage.setItem("sessionId",i),sessionStorage.setItem("activeSessionId",i);const a={id:i,accessCode:t,startTime:Date.now(),status:"active",isOffline:!0,studentId:s.studentId||null,role:s.role||"admin"};return localStorage.setItem("offlineSession",JSON.stringify(a)),i}throw r}},async handleSessionAbandonment(){const t=localStorage.getItem("sessionId");if(t&&!t.startsWith("offline-"))try{await Gn(ln(tt,"sessions",t),{status:"abandoned",abandonedAt:cn(),abandonReason:"page_unload"})}catch(e){console.error("Error marking session as abandoned:",e)}sessionStorage.removeItem("activeSessionId"),sessionStorage.removeItem("gameConfig")}};function _I(){const[t,e]=V.useState(""),[n,r]=V.useState(!1),[s,i]=V.useState(""),[a,l]=V.useState(!1),u=async()=>{r(!0),i(""),l(!1);try{const p=await Ml.createCode({createdBy:"admin",timestamp:new Date().toISOString()});p.success?e(p.code):i("Failed to generate code: "+p.error)}catch(p){i("Error: "+p.message)}finally{r(!1)}},h=()=>{const p=`${window.location.origin}?code=${t}`;navigator.clipboard.writeText(p),l(!0),setTimeout(()=>l(!1),2e3)};return d.jsxs("div",{style:{padding:"40px",maxWidth:"800px",margin:"0 auto",fontFamily:"system-ui, -apple-system, sans-serif"},children:[d.jsx("h1",{style:{color:"#333",marginBottom:"10px"},children:"Admin Dashboard"}),d.jsx("p",{style:{color:"#666",marginBottom:"30px"},children:"Generate access codes for participants"}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"30px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[d.jsx("button",{onClick:u,disabled:n,style:{padding:"12px 30px",fontSize:"16px",background:n?"#ccc":"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:n?"not-allowed":"pointer",fontWeight:"bold"},children:n?"Generating...":"Generate New Access Code"}),t&&d.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"white",borderRadius:"6px",border:"1px solid #e0e0e0"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#333"},children:"Generated Code"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#666",fontSize:"14px"},children:"Access Code:"}),d.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",background:"#f5f5f5",borderRadius:"4px",fontFamily:"monospace",fontSize:"18px",fontWeight:"bold"},children:t})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#666",fontSize:"14px"},children:"Full URL:"}),d.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"stretch"},children:[d.jsx("input",{type:"text",value:`${window.location.origin}?code=${t}`,readOnly:!0,style:{flex:1,padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontFamily:"monospace",fontSize:"14px",background:"#f9f9f9"}}),d.jsx("button",{onClick:h,style:{padding:"10px 20px",background:a?"#4CAF50":"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",whiteSpace:"nowrap"},children:a?" Copied!":"Copy URL"})]})]}),d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"4px",fontSize:"14px",color:"#1976d2"},children:[d.jsx("strong",{children:"Note:"})," This code is valid for 24 hours and can only be used once."]})]}),s&&d.jsx("div",{style:{marginTop:"20px",padding:"15px",background:"#ffebee",color:"#c62828",borderRadius:"4px"},children:s})]}),d.jsxs("div",{style:{marginTop:"40px",padding:"20px",background:"#f5f5f5",borderRadius:"6px",fontSize:"14px",color:"#666"},children:[d.jsx("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"How to use:"}),d.jsxs("ol",{style:{margin:"10px 0",paddingLeft:"20px"},children:[d.jsx("li",{children:"Generate a code using the button above"}),d.jsx("li",{children:"Copy the full URL"}),d.jsx("li",{children:"Share the URL with participants"}),d.jsx("li",{children:"Each participant can use their unique code once"})]})]})]})}function xI({sessionId:t,completedLevels:e,totalTime:n,gameMode:r}){const[s,i]=V.useState(""),[a,l]=V.useState(!1);V.useEffect(()=>{u()},[]);const u=()=>{const p=Date.now().toString(36).toUpperCase(),m=e.toString().padStart(2,"0"),g=r.limit==="time"?"T":"A",x=r.accuracy==="strict"?"S":"L",M=`GAME-${`${t}-${m}-${n}`.split("").reduce((C,I)=>C+I.charCodeAt(0),0).toString(36).toUpperCase().slice(-3)}-${m}-${g}${x}-${p}`;i(M)},h=async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(s),l(!0),setTimeout(()=>l(!1),3e3);else{const p=document.createElement("textarea");p.value=s,p.style.position="fixed",p.style.top="0",p.style.left="0",p.style.width="2em",p.style.height="2em",p.style.padding="0",p.style.border="none",p.style.outline="none",p.style.boxShadow="none",p.style.background="transparent",p.style.opacity="0",document.body.appendChild(p),p.focus(),p.select();try{document.execCommand("copy")?(l(!0),setTimeout(()=>l(!1),3e3)):(console.error("Failed to copy using execCommand"),alert("Copy failed. Please manually select and copy the code."))}catch(m){console.error("Failed to copy:",m),alert("Copy failed. Please manually select and copy the code.")}document.body.removeChild(p)}}catch(p){console.error("Clipboard operation failed:",p),alert(`Copy failed. Here's your code to copy manually:

${s}`)}};return d.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"30px",marginTop:"30px",color:"white",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[d.jsx("h2",{style:{marginBottom:"20px",fontSize:"24px"},children:" Your Completion Code"}),d.jsx("p",{style:{marginBottom:"20px",opacity:.9,fontSize:"16px"},children:"Copy this code and paste it into the Qualtrics survey to verify your completion:"}),d.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"20px",marginBottom:"20px",backdropFilter:"blur(10px)"},children:[d.jsx("div",{style:{fontFamily:"monospace",fontSize:"28px",fontWeight:"bold",letterSpacing:"2px",marginBottom:"15px",wordBreak:"break-all",textShadow:"2px 2px 4px rgba(0,0,0,0.2)",userSelect:"text",cursor:"text"},onClick:p=>{const m=window.getSelection(),g=document.createRange();g.selectNodeContents(p.currentTarget),m.removeAllRanges(),m.addRange(g)},title:"Click to select all text",children:s}),d.jsx("button",{onClick:h,style:{padding:"12px 30px",fontSize:"16px",fontWeight:"bold",background:a?"#4CAF50":"white",color:a?"white":"#764ba2",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:a?" Copied!":" Copy Code"})]}),d.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"6px",padding:"15px",fontSize:"14px",lineHeight:"1.5"},children:[d.jsx("strong",{children:" Important:"})," This code is your proof of completion. Make sure to copy it before closing this window!",d.jsx("br",{}),d.jsx("span",{style:{fontSize:"13px",opacity:.9},children:" Tip: If the Copy button doesn't work, click on the code text to select it, then use Ctrl+C (or Cmd+C on Mac) to copy."})]}),d.jsxs("details",{style:{marginTop:"20px",textAlign:"left"},children:[d.jsx("summary",{style:{cursor:"pointer",opacity:.8,fontSize:"12px",marginBottom:"10px"},children:"Code Details "}),d.jsxs("div",{style:{fontSize:"12px",opacity:.7,background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px",fontFamily:"monospace"},children:[d.jsxs("div",{children:["Levels Completed: ",e,"/45"]}),d.jsxs("div",{children:["Game Mode: ",r.limit==="time"?"Time Challenge":"Task Attempts"]}),d.jsxs("div",{children:["Accuracy Mode: ",r.accuracy==="strict"?"Strict (100%)":"Lenient"]}),d.jsxs("div",{children:["Total Time: ",Math.floor(n/60),"m ",n%60,"s"]}),d.jsxs("div",{children:["Generated: ",new Date().toLocaleString()]})]})]})]})}function wI(){const[t,e]=V.useState([]),[n,r]=V.useState(!0),[s,i]=V.useState(null),[a,l]=V.useState(!1),[u,h]=V.useState(""),p=["3040748714","3040729812","3040859968","3040852909","3040869211","3040849958","3039838870","15177695","3040849997","3039845630","3040682661","26416809","3039850622","3040869510","3031977170","3040806629","3040848528","3039840443","3040848749","3040849893","3039850830","3039850713"],m=["3040850023","22900589","3039850570","3040882302","3040815651","3040701758","3040852077","3036343361","3040869458","3040705047","3040702343","3039842887","3040848593","3040702603","3039840222","3039840209","3040861190","18565110","3040869302","3040814338","3039754031"],g=["3040705476","3040697715","3039753992","3040729513","3040681595","3040850010","3032682772","3039842484","3040869445","3040814455","3039840781","3040696831","3040705125","3034184066","3039843004","3039842835","3040860072","3040871018","3039839026","3040814429","3040869094","3040748064","3040875945","3040701589","3040682193","3040729422","3040836165","21798975","3038626424","3039753017","3039840287","3040806382"],x=["25958106","3040814351","3040848697","3040684039","3040869289","22971551","3040837218","3040864570","3040705099","3034288430","3040848541","3040864531","3040869237","3032342054","3040682479","3039840170","3032397447","3039850856","3039840118","3040729552","3040683181","3040861073","3031968434","3040882575","3035320237","3040823815","3039842575","24261697","23420611","3032000089","3040882341"],A=_=>p.includes(_)?{section:"01A-Checkpoint",hasCheckpoint:!0,isAdmin:!1}:m.includes(_)?{section:"01A-No Checkpoint",hasCheckpoint:!1,isAdmin:!1}:g.includes(_)?{section:"02A-Checkpoint",hasCheckpoint:!0,isAdmin:!1}:x.includes(_)?{section:"02A-No Checkpoint",hasCheckpoint:!1,isAdmin:!1}:_.startsWith("ADMIN-TEST")?{section:"ADMIN-TEST",hasCheckpoint:!0,isAdmin:!0}:_.includes("ADMIN")||_.includes("admin")?{section:"ADMIN",hasCheckpoint:!1,isAdmin:!0}:{section:"Unknown",hasCheckpoint:!1,isAdmin:!1};V.useEffect(()=>{P()},[]);const P=async()=>{r(!0);try{const _=await js(Qn(tt,"sessions")),k=new Date,T=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`,pe=Yi(Qn(tt,"accessRefreshes"),Sd("refreshedAt",">=",new Date(T))),oe=await js(pe),ae=new Set;oe.forEach(L=>{const $=L.data();ae.add($.studentId)});const q={};_.forEach(L=>{var X;const $=L.data();if($.role!=="master_admin"&&$.studentId){const re=A($.studentId);q[$.studentId]||(q[$.studentId]={studentId:$.studentId,sessions:[],latestAccess:null,totalAccesses:0,displayName:`Student ${$.studentId}`,section:re.section,hasCheckpoint:re.hasCheckpoint,hasPlayed:!0,isAdmin:re.isAdmin,hasBeenRefreshedToday:ae.has($.studentId)}),q[$.studentId].sessions.push({id:L.id,timestamp:(X=$.startTime)!=null&&X.toDate?$.startTime.toDate():new Date($.clientStartTime),status:$.status,completedTasks:Object.keys($.completedTasks||{}).length,finalScore:$.finalScore||0,currentSemester:$.currentSemester||1,timeElapsed:$.timeElapsed||$.totalTime||0})}}),Object.values(q).forEach(L=>{var $;L.sessions.sort((X,re)=>re.timestamp-X.timestamp),L.latestAccess=(($=L.sessions[0])==null?void 0:$.timestamp)||null,L.totalAccesses=L.sessions.length});const N=[];[...p,...m,...g,...x].forEach(L=>{if(q[L])N.push(q[L]);else{const $=A(L);N.push({studentId:L,sessions:[],latestAccess:null,totalAccesses:0,displayName:`Student ${L}`,section:$.section,hasCheckpoint:$.hasCheckpoint,hasPlayed:!1,isAdmin:$.isAdmin,hasBeenRefreshedToday:ae.has(L)})}}),N.sort((L,$)=>L.hasPlayed&&!$.hasPlayed?-1:!L.hasPlayed&&$.hasPlayed?1:L.latestAccess&&$.latestAccess?$.latestAccess-L.latestAccess:L.studentId.localeCompare($.studentId)),e(N)}catch(_){console.error("Error loading student data:",_)}finally{r(!1)}},M=async _=>{l(!0);try{const T=new Date().toISOString().split("T")[0],pe=`played_${_}_${T}`;localStorage.removeItem(pe),await sf(Qn(tt,"accessRefreshes"),{studentId:_,refreshedBy:"MASTER_ADMIN",refreshedAt:cn(),reason:"Manual refresh by admin"}),alert(`Access refreshed for student ${_}. They can now play again today.`),await P()}catch(k){console.error("Error refreshing access:",k),alert(`Failed to refresh access: ${k.message}`)}finally{l(!1)}},C=async()=>{if(confirm(` DANGER: This will permanently delete ALL student sessions, events, and access data.

This action cannot be undone. Are you absolutely sure?`)){l(!0);try{const _=Yi(Qn(tt,"sessions")),k=await js(_),T=k.docs.map(L=>rc(L.ref)),pe=Yi(Qn(tt,"events")),oe=await js(pe),ae=oe.docs.map(L=>rc(L.ref)),q=Yi(Qn(tt,"accessRefreshes")),N=await js(q),F=N.docs.map(L=>rc(L.ref));Object.keys(localStorage).forEach(L=>{L.startsWith("played_")&&localStorage.removeItem(L)}),await Promise.all([...T,...ae,...F]),alert(` All data reset complete!

Deleted:
- ${k.size} sessions
- ${oe.size} events
- ${N.size} access refreshes
- All localStorage data`),await P()}catch(_){console.error("Error resetting all data:",_),alert("Failed to reset data. Please check console for details.")}finally{l(!1)}}},I=t.filter(_=>_.studentId.toLowerCase().includes(u.toLowerCase())),R=_=>_?new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).format(_):"Never",j=_=>!_.sessions||_.sessions.length===0?0:Math.max(..._.sessions.map(k=>k.finalScore||0)),B=_=>!_.sessions||_.sessions.length===0?0:_.sessions.reduce((T,pe)=>(pe.finalScore||0)>(T.finalScore||0)?pe:T,_.sessions[0]).timeElapsed||0,z=_=>{if(!_)return"N/A";const k=Math.floor(_/60),T=_%60;return`${k}:${T.toString().padStart(2,"0")}`},w=t.filter(_=>!_.section.includes("ADMIN")).length,v=t.filter(_=>!_.section.includes("ADMIN")&&_.hasPlayed).length,S=t.filter(_=>!_.section.includes("ADMIN")).reduce((_,k)=>_+k.totalAccesses,0);t.filter(_=>!_.section.includes("ADMIN")&&_.hasPlayed).reduce((_,k)=>_+j(k),0)/(v||1);const E=t.filter(_=>!_.section.includes("ADMIN")&&!_.hasPlayed).length;return d.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[d.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"30px",borderRadius:"12px",marginBottom:"30px",color:"white"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("h1",{style:{margin:"0 0 10px 0"},children:" Master Admin Dashboard"}),d.jsx("p",{style:{margin:0,opacity:.9},children:"Manage student access and view activity logs"})]}),d.jsx("button",{onClick:C,disabled:a,style:{padding:"12px 20px",background:"#f44336",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",opacity:a?.6:1},children:a?"Processing...":" Reset All Data"})]})}),d.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:"30px"},children:[d.jsx("h2",{style:{margin:"0 0 20px 0",color:"#333",fontSize:"20px"},children:" Admin Code Reference"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[d.jsxs("div",{style:{border:"2px solid #4CAF50",borderRadius:"8px",padding:"15px",background:"#f8fff8"},children:[d.jsx("h3",{style:{margin:"0 0 10px 0",color:"#4CAF50",fontSize:"16px"},children:" Test Codes (Internal Use)"}),d.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px"},children:[d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-TEST1"})," to ",d.jsx("code",{children:"ADMIN-TEST10"})]}),d.jsx("li",{children:"Student-like experience with infinite attempts"}),d.jsx("li",{children:"12-minute duration, AI enabled, checkpoints"}),d.jsx("li",{children:"Data tracked like regular students"})]})]}),d.jsxs("div",{style:{border:"2px solid #2196F3",borderRadius:"8px",padding:"15px",background:"#f8fcff"},children:[d.jsx("h3",{style:{margin:"0 0 10px 0",color:"#2196F3",fontSize:"16px"},children:" Admin Codes (Testing)"}),d.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px"},children:[d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-REGULAR"})," - Standard 12min, AI enabled"]}),d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-FAST"})," - Quick 2min test mode"]}),d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-1-CP"})," - No AI, with checkpoint"]}),d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-1-NCP"})," - No AI, no checkpoint"]}),d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-2-CP"})," - AI enabled, with checkpoint"]}),d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-2-NCP"})," - AI enabled, no checkpoint"]})]})]}),d.jsxs("div",{style:{border:"2px solid #9C27B0",borderRadius:"8px",padding:"15px",background:"#fdf8ff"},children:[d.jsx("h3",{style:{margin:"0 0 10px 0",color:"#9C27B0",fontSize:"16px"},children:" Master Admin"}),d.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px"},children:[d.jsxs("li",{children:[d.jsx("code",{children:"ADMIN-MASTER"})," - Access to this interface"]}),d.jsx("li",{children:"Student data management and analysis"}),d.jsx("li",{children:"Access refresh and data reset capabilities"}),d.jsx("li",{children:"No gameplay, admin interface only"})]})]})]})]}),d.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[d.jsx("input",{type:"text",placeholder:"Search by Student ID...",value:u,onChange:_=>h(_.target.value),style:{flex:1,padding:"10px 15px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px"}}),d.jsx("button",{onClick:P,disabled:n,style:{padding:"10px 20px",background:"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:" Refresh Data"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"15px",marginTop:"20px"},children:[d.jsxs("div",{style:{padding:"15px",background:"#e3f2fd",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2196F3"},children:w}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Total Students"})]}),d.jsxs("div",{style:{padding:"15px",background:"#e8f5e9",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4CAF50"},children:v}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Have Played"})]}),d.jsxs("div",{style:{padding:"15px",background:"#fff3e0",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ff9800"},children:S}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Total Sessions"})]}),d.jsxs("div",{style:{padding:"15px",background:"#fce4ec",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#e91e63"},children:E}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Never Played"})]}),d.jsxs("div",{style:{padding:"15px",background:"#f3e5f5",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#9c27b0"},children:E}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Never Played"})]})]})]}),d.jsx("div",{style:{background:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{background:"#f5f5f5"},children:[d.jsx("th",{style:{padding:"15px",textAlign:"left",fontWeight:"600"},children:"Student ID"}),d.jsx("th",{style:{padding:"15px",textAlign:"left",fontWeight:"600"},children:"Section"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Status"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Latest Access"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Highest Score"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Time Taken"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Total"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Actions"})]})}),d.jsx("tbody",{children:n?d.jsx("tr",{children:d.jsx("td",{colSpan:"8",style:{padding:"40px",textAlign:"center"},children:"Loading student data..."})}):I.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"8",style:{padding:"40px",textAlign:"center"},children:"No students found"})}):I.map(_=>{const k=j(_);return d.jsxs("tr",{style:{borderBottom:"1px solid #e0e0e0",background:s===_.studentId?"#f0f8ff":_.hasPlayed?_.isAdmin?"#fff9c4":"white":"#fafafa"},children:[d.jsx("td",{style:{padding:"15px",fontFamily:"monospace"},children:_.studentId}),d.jsx("td",{style:{padding:"15px"},children:d.jsx("span",{style:{padding:"4px 8px",background:_.isAdmin?"#ffeb3b":_.section.includes("01A")?"#e3f2fd":_.section.includes("02A")?"#f3e5f5":"#f5f5f5",borderRadius:"4px",fontSize:"12px",fontWeight:_.isAdmin?"bold":"normal",color:_.isAdmin?"#333":"inherit"},children:_.section})}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:_.isAdmin?d.jsx("span",{style:{padding:"4px 8px",background:"#9C27B0",color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:"Unlimited"}):!_.hasPlayed||_.hasBeenRefreshedToday?d.jsx("span",{style:{padding:"4px 8px",background:"#e8f5e9",color:"#2e7d32",borderRadius:"12px",fontSize:"12px"},children:"Active"}):d.jsx("span",{style:{padding:"4px 8px",background:"#ffeb3b",color:"#f57c00",borderRadius:"12px",fontSize:"12px"},children:"Restricted"})}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:R(_.latestAccess)}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:d.jsx("span",{style:{padding:"4px 8px",background:k>=1e3?"#e8f5e9":k>0?"#fff3e0":"#f5f5f5",color:k>=1e3?"#2e7d32":k>0?"#f57c00":"#999",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:k})}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:d.jsx("span",{style:{fontFamily:"monospace",fontSize:"12px",color:"#666",fontWeight:"bold"},children:z(B(_))})}),d.jsx("td",{style:{padding:"15px",textAlign:"center",fontWeight:"bold"},children:_.totalAccesses}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:_.isAdmin?d.jsx("span",{style:{color:"#999",fontSize:"12px"},children:"N/A"}):d.jsx("button",{onClick:()=>{i(_.studentId),confirm(`Reset access for Student ${_.studentId} (${_.section})?

This will allow them to play again today.`)&&M(_.studentId)},disabled:a,style:{padding:"6px 12px",background:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:" Reset"})})]},_.studentId)})})]})}),d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#f5f5f5",borderRadius:"8px",fontSize:"12px",color:"#666",textAlign:"center"},children:["Daily automatic reset is disabled. Use refresh button to manually grant access to students who have already played.",d.jsx("br",{}),"Total roster: ",w," students across 4 conditions (01A-Checkpoint, 01A-No Checkpoint, 02A-Checkpoint, 02A-No Checkpoint)"]})]})}const SI={notifyGameComplete(t={}){try{window.parent.postMessage({type:"gameComplete",status:"finished",timestamp:new Date().toISOString(),...t},"*");try{if(window.parent&&window.parent.document){const e=window.parent.document.querySelector("#NextButton");e&&(e.style.display="inline-block",e.style.visibility="visible",e.disabled=!1)}}catch{window.parent.postMessage({type:"showNextButton",action:"show"},"*")}console.log(" Game completion notification sent to Qualtrics")}catch(e){console.error("Failed to notify Qualtrics:",e)}},notifySemesterComplete(t,e,n={}){try{window.parent.postMessage({type:"semesterComplete",semester:t,totalSemesters:e,timestamp:new Date().toISOString(),...n},"*"),window.parent.postMessage({type:"keepNextButtonVisible",action:"maintain"},"*"),console.log(` Semester ${t} completion notification sent`)}catch(r){console.error("Failed to notify Qualtrics of semester completion:",r)}},ensureNextButtonVisible(){try{window.parent.postMessage({type:"ensureNextButton",action:"show",timestamp:new Date().toISOString()},"*")}catch(t){console.error("Failed to ensure Next button visibility:",t)}}};function EI({onStart:t}){const[e,n]=V.useState({task1:0,task2:0,task3:0}),[r,s]=V.useState([]),[i,a]=V.useState(0),l=["It's generally smart to do roughly an even number of each task.","This is because the tasks that are worth more points take more time to do, so you don't want to only do the shorter tasks or only do the longer tasks.","Of course, you might prefer one task over another, so you could take that into account. Do you feel like you are particularly good at one of the tasks?"],u=()=>{i<l.length?(s(x=>[...x,{sender:"AI",text:l[i]}]),a(x=>x+1)):s(x=>[...x,{sender:"AI",text:"I've shared my best advice! It's up to you now."}])},h=(x,A)=>{const P=parseInt(A)||0;n(M=>({...M,[x]:Math.max(0,P)}))},p=e.task1+e.task2+e.task3,m=p===10,g=()=>{if(!m)return;const x=[];for(let A=0;A<e.task1;A++)x.push("g2");for(let A=0;A<e.task2;A++)x.push("g1");for(let A=0;A<e.task3;A++)x.push("g3");t(x,e)};return d.jsxs("div",{style:{maxWidth:"800px",margin:"40px auto",padding:"30px",background:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[d.jsx("h1",{style:{textAlign:"center",marginBottom:"30px",color:"#333"},children:"Task Allocation Strategy"}),d.jsxs("div",{style:{marginBottom:"30px",lineHeight:"1.6",color:"#555"},children:[d.jsxs("p",{children:["You have ",d.jsx("strong",{children:"15 minutes"})," to complete ",d.jsx("strong",{children:"10 tasks"}),"."]}),d.jsx("p",{children:"You must decide now how many of each task type you want to perform."}),d.jsxs("p",{children:["Total tasks must add up to ",d.jsx("strong",{children:"10"}),"."]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"40px",marginBottom:"40px"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[d.jsxs("div",{style:sc,children:[d.jsxs("label",{style:ic,children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"10px"},children:""}),"Task 1: Slider (Materials)"]}),d.jsx("input",{type:"number",min:"0",max:"10",value:e.task1,onChange:x=>h("task1",x.target.value),style:oc})]}),d.jsxs("div",{style:sc,children:[d.jsxs("label",{style:ic,children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"10px"},children:""}),"Task 2: Counting (Research)"]}),d.jsx("input",{type:"number",min:"0",max:"10",value:e.task2,onChange:x=>h("task2",x.target.value),style:oc})]}),d.jsxs("div",{style:sc,children:[d.jsxs("label",{style:ic,children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"10px"},children:""}),"Task 3: Typing (Engagement)"]}),d.jsx("input",{type:"number",min:"0",max:"10",value:e.task3,onChange:x=>h("task3",x.target.value),style:oc})]}),d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:m?"#e8f5e9":"#ffebee",borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:m?"#2e7d32":"#c62828"},children:["Total Allocated: ",p," / 10"]})]}),d.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{style:{flex:1,marginBottom:"15px",overflowY:"auto",maxHeight:"300px",display:"flex",flexDirection:"column",gap:"10px"},children:[r.length===0&&d.jsx("div",{style:{color:"#999",fontStyle:"italic",textAlign:"center",marginTop:"40px"},children:"Need advice? Ask the AI helper."}),r.map((x,A)=>d.jsxs("div",{style:{background:"#f0f7ff",padding:"10px 15px",borderRadius:"12px 12px 12px 0",alignSelf:"flex-start",maxWidth:"90%"},children:[d.jsx("strong",{children:" AI:"})," ",x.text]},A))]}),d.jsxs("button",{onClick:u,style:{background:"#2196F3",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[d.jsx("span",{children:""})," Ask AI for Recommendation"]})]})]}),d.jsx("div",{style:{textAlign:"center"},children:d.jsx("button",{onClick:g,disabled:!m,style:{background:m?"#4CAF50":"#ccc",color:"white",border:"none",padding:"15px 40px",fontSize:"18px",borderRadius:"30px",cursor:m?"pointer":"not-allowed",fontWeight:"bold",boxShadow:m?"0 4px 15px rgba(76, 175, 80, 0.3)":"none",transition:"all 0.2s"},children:"Start Experiment"})})]})}const sc={display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f9f9f9",padding:"15px",borderRadius:"8px"},ic={fontWeight:"bold",color:"#333",display:"flex",alignItems:"center"},oc={width:"60px",padding:"10px",fontSize:"18px",textAlign:"center",borderRadius:"6px",border:"1px solid #ddd"};function TI({currentTaskIndex:t,totalTasks:e,taskQueue:n,onSwitchTask:r,children:s,points:i,timeRemaining:a,onTimeUp:l}){const u=n[t],h=M=>M.startsWith("g1")?{name:"Research",icon:"",color:"#9C27B0"}:M.startsWith("g2")?{name:"Materials",icon:"",color:"#4CAF50"}:M.startsWith("g3")?{name:"Engagement",icon:"",color:"#f44336"}:{name:"Unknown",icon:"",color:"#333"},p=h(u),m=n.slice(t+1),g=m.some(M=>M.startsWith("g1")),x=m.some(M=>M.startsWith("g2")),A=m.some(M=>M.startsWith("g3")),P=t;return d.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",padding:"15px 25px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"20px"},children:[d.jsx("div",{style:{width:"200px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""}),d.jsx("div",{children:d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:a<60?"#f44336":"#333",animation:a<60?"pulse 1s infinite":"none"},children:[Math.floor(a/60),":",(a%60).toString().padStart(2,"0")]})})]})}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Total Points"}),d.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#2196F3"},children:i})]}),d.jsxs("div",{style:{textAlign:"right",width:"200px"},children:[d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Task Progress"}),d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:[P," / ",e]})]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 300px",gap:"20px"},children:[d.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 10px rgba(0,0,0,0.05)",minHeight:"500px"},children:[d.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:p.icon}),d.jsxs("h2",{style:{margin:0,color:p.color},children:["Current: ",p.name]})]}),s]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.05)"},children:[d.jsx("h3",{style:{marginTop:0,fontSize:"16px",color:"#555"},children:"Switch Task"}),d.jsx("p",{style:{fontSize:"13px",color:"#777",marginBottom:"15px"},children:"Pause current task and switch to another type. The current task will be moved to the end of the queue."}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d.jsxs("button",{disabled:!x||u.startsWith("g2"),onClick:()=>r("g2"),style:ac(x&&!u.startsWith("g2"),"#4CAF50"),children:[d.jsx("span",{children:""})," Switch to Materials"]}),d.jsxs("button",{disabled:!g||u.startsWith("g1"),onClick:()=>r("g1"),style:ac(g&&!u.startsWith("g1"),"#9C27B0"),children:[d.jsx("span",{children:""})," Switch to Research"]}),d.jsxs("button",{disabled:!A||u.startsWith("g3"),onClick:()=>r("g3"),style:ac(A&&!u.startsWith("g3"),"#f44336"),children:[d.jsx("span",{children:""})," Switch to Engagement"]})]})]}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"12px",fontSize:"12px",color:"#666"},children:[d.jsx("strong",{children:"Next up:"}),d.jsxs("div",{style:{marginTop:"10px",display:"flex",gap:"5px",flexWrap:"wrap"},children:[m.slice(0,5).map((M,C)=>d.jsx("span",{style:{background:h(M).color,color:"white",padding:"2px 6px",borderRadius:"4px",opacity:.7},children:h(M).icon},C)),m.length>5&&d.jsxs("span",{children:["+",m.length-5," more"]})]})]})]})]}),d.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.5; }
          100% { opacity: 1; }
        }
      `})]})}const ac=(t,e)=>({display:"flex",alignItems:"center",gap:"10px",padding:"12px",border:`1px solid ${t?e:"#ddd"}`,borderRadius:"8px",background:t?"white":"#f5f5f5",color:t?e:"#999",cursor:t?"pointer":"not-allowed",fontWeight:"bold",transition:"all 0.2s",opacity:t?1:.7});function II({timeRemaining:t,onSelectTask:e,onFinishEarly:n}){return d.jsxs("div",{style:{maxWidth:"800px",margin:"40px auto",padding:"40px",background:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[d.jsx("h1",{style:{color:"#2196F3",marginBottom:"20px"},children:" All Tasks Completed!"}),d.jsxs("div",{style:{fontSize:"18px",color:"#555",marginBottom:"30px",lineHeight:"1.6"},children:[d.jsx("p",{children:"You have finished all 10 allocated tasks with time to spare."}),d.jsxs("p",{children:["You currently have ",d.jsxs("strong",{children:[Math.floor(t/60)," minutes and ",t%60," seconds"]})," remaining."]}),d.jsxs("p",{children:["You can choose to do more tasks for ",d.jsx("strong",{children:"1/2 credit"})," to increase your score, or finish the experiment now."]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"40px"},children:[d.jsxs("button",{onClick:()=>e("g2"),style:lc("#4CAF50"),children:[d.jsx("span",{style:{fontSize:"32px",display:"block",marginBottom:"10px"},children:""}),"Do Materials Task",d.jsx("div",{style:{fontSize:"12px",opacity:.8,marginTop:"5px"},children:"(50% Points)"})]}),d.jsxs("button",{onClick:()=>e("g1"),style:lc("#9C27B0"),children:[d.jsx("span",{style:{fontSize:"32px",display:"block",marginBottom:"10px"},children:""}),"Do Research Task",d.jsx("div",{style:{fontSize:"12px",opacity:.8,marginTop:"5px"},children:"(50% Points)"})]}),d.jsxs("button",{onClick:()=>e("g3"),style:lc("#f44336"),children:[d.jsx("span",{style:{fontSize:"32px",display:"block",marginBottom:"10px"},children:""}),"Do Engagement Task",d.jsx("div",{style:{fontSize:"12px",opacity:.8,marginTop:"5px"},children:"(50% Points)"})]})]}),d.jsx("div",{style:{borderTop:"1px solid #eee",paddingTop:"30px"},children:d.jsx("button",{onClick:n,style:{background:"#f5f5f5",color:"#666",border:"1px solid #ddd",padding:"12px 30px",fontSize:"16px",borderRadius:"30px",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s"},onMouseEnter:r=>r.target.style.background="#e0e0e0",onMouseLeave:r=>r.target.style.background="#f5f5f5",children:"No thanks, I'm done"})})]})}const lc=t=>({background:"white",border:`2px solid ${t}`,color:t,padding:"20px",borderRadius:"12px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"});function AI(t,e){const n=t.length,r=e.length,s=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let i=0;i<=n;i++)s[i][0]=i;for(let i=0;i<=r;i++)s[0][i]=i;for(let i=1;i<=n;i++)for(let a=1;a<=r;a++)t[i-1]===e[a-1]?s[i][a]=s[i-1][a-1]:s[i][a]=Math.min(s[i-1][a]+1,s[i][a-1]+1,s[i-1][a-1]+1);return s[n][r]}function CI(){const e=new URLSearchParams(window.location.search).get("admin")==="berkeley2024",[n,r]=V.useState("landing"),[s,i]=V.useState(null),[a,l]=V.useState(null),[u,h]=V.useState("g2t1"),[p,m]=V.useState({}),[g,x]=V.useState(0),[A,P]=V.useState(null),[M,C]=V.useState(!1),[I,R]=V.useState(""),[j,B]=V.useState(!0),[z,w]=V.useState(0),[v,S]=V.useState({}),[E,_]=V.useState(0),[k,T]=V.useState(0),[pe,oe]=V.useState(!1),[ae,q]=V.useState(null),[N,F]=V.useState(!1),[L,$]=V.useState(30),[X,re]=V.useState(!1),[Ce,xe]=V.useState(5),[he,ce]=V.useState(!1),[Le,we]=V.useState(0),[ee,ke]=V.useState(1),[Oe]=V.useState(2),[Re,wt]=V.useState([]),[Ht,qt]=V.useState(null),[Qt,Gt]=V.useState(!1),[lr,ur]=V.useState(0),[Cn,cr]=V.useState(null),[Pe,Ei]=V.useState({g2t1:!1,g1t1:!1,g3t1:!1}),[Jo,lt]=V.useState(1200),[Ye,Wr]=V.useState(1200),[vs,Zo]=V.useState(0),[Te,kn]=V.useState({materials:0,research:0,engagement:0,bonus:0}),[Hr,_s]=V.useState({}),[ea,ta]=V.useState({}),[of,xs]=V.useState({}),[Rn,ws]=V.useState([]),[sn,Ss]=V.useState(0),[na,zn]=V.useState(null),[mu,Ti]=V.useState(!1),Es=V.useRef(Date.now()),mn=V.useRef(null);V.useRef(null),V.useRef(null);const Ts=V.useRef(null),ut=V.useRef(Date.now());V.useRef(1200),V.useRef(1200);const dr=()=>{const Q=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").semesterDuration||12e5,W=Math.floor(Q/2e3);return Math.floor(W/60)};if(V.useEffect(()=>{(async()=>{try{const Q=new URLSearchParams(window.location.search),W=Q.has("code")||Q.has("c");if((Q.get("code")||Q.get("c"))==="ADMIN-MASTER"){sessionStorage.setItem("gameConfig",JSON.stringify({role:"master_admin",section:"master_admin",hasAI:!1,isMasterInterface:!0,displayName:"Master Administrator"})),B(!1);return}if(e&&!sessionStorage.getItem("gameConfig")&&sessionStorage.setItem("gameConfig",JSON.stringify({role:"admin",section:"admin",hasAI:!0,checkpointSemester2:!0,displayName:"Admin User"})),!W){r("studentLogin"),B(!1);return}const{allowed:Ie,reason:He,resumeSession:Fe,newSession:Dt,code:Xe,codeData:Je}=await Um.checkAccess();if(!Ie){C(!0),R(He),B(!1);return}if(Fe)P(Fe),localStorage.setItem("sessionId",Fe);else if(Dt){const st=await Um.createSession(Xe,Je);P(st)}await et.syncOfflineEvents(),B(!1)}catch{B(!1)}})()},[]),V.useEffect(()=>{n==="complete"&&ee>=Oe&&SI.notifyGameComplete({finalScore:Math.round(gn())+(Te.bonus||0),totalTime:z,semestersCompleted:ee,sessionId:A})},[n,ee,Oe,z,Te.bonus,A]),V.useEffect(()=>{localStorage.setItem("currentTask",u)},[u]),V.useEffect(()=>{localStorage.setItem("gameMode",JSON.stringify(s))},[s]),V.useEffect(()=>{localStorage.setItem("currentSemester",ee.toString())},[ee]),V.useEffect(()=>{localStorage.setItem("totalSemesters",Oe.toString())},[Oe]),V.useEffect(()=>{localStorage.setItem("completedTasksCount",Object.keys(p).length.toString())},[p]),V.useEffect(()=>{localStorage.setItem("completedLevels",g.toString())},[g]),V.useEffect(()=>{localStorage.setItem("totalSwitches",E.toString())},[E]),V.useEffect(()=>{localStorage.setItem("categoryPoints",JSON.stringify(Te))},[Te]),V.useEffect(()=>{localStorage.setItem("studentLearningScore",vs.toString())},[vs]),V.useEffect(()=>{const K=Pe.g2t1&&Pe.g1t1&&Pe.g3t1;localStorage.setItem("practiceCompleted",K.toString())},[Pe]),j)return d.jsx("div",{className:"app",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:d.jsx("h2",{children:"Loading..."})});if(window.location.search.includes("master=true")&&JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="master_admin")return d.jsx(wI,{});if(window.location.search.includes("admin=true"))return d.jsx(_I,{});const gn=(K=Te,Q=Hr)=>{let W=0;Object.entries(Q).forEach(([Dt,Xe])=>{const st=1+parseInt(Dt)*.15;W+=Xe*st});const te=parseFloat(localStorage.getItem("engagementInterest")||"0")||0,Ie=W+te,He=K.materials||0,Fe=K.research||0;return console.log(` STUDENT LEARNING: ${Ie.toFixed(1)} pts | Materials: ${He} (with sequential multipliers) | Research: ${Fe} | Interest: ${te.toFixed(1)} = ${Ie.toFixed(1)}`),isNaN(Ie)?0:Ie},qr=()=>{const K=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");if(!(ee===2&&K.checkpointSemester2))return;Gt(!0),gn()>=300?(ur(300),kn(Ie=>({...Ie,bonus:(Ie.bonus||0)+300}))):ur(0),oe(!0),q("checkpoint")},ra=()=>{const K=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),Q=K.semesterDuration||12e5,W=Math.floor(Q/1e3);lt(W),Wr(W),Es.current=Date.now(),mn.current=setInterval(()=>{const Ie=Date.now()-Es.current,He=Math.floor(Ie/1e3);w(He);const Fe=Math.max(0,W-He);if(Wr(Fe),He%10===0&&A&&!A.startsWith("offline-")&&Gn(ln(tt,"sessions",A),{timeElapsed:He,lastUpdated:cn()}).catch(Xe=>console.error("Failed to update session time:",Xe)),ee===2&&K.checkpointSemester2){const Xe=K.semesterDuration||12e5,Je=Math.floor(Xe/2e3);He===Je&&!Qt&&qr()}Fe<=0&&(clearInterval(mn.current),mn.current=null,Un("semester_complete"))},1e3)},sa=K=>{const W=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="admin",te=Pe.g2t1&&Pe.g1t1&&Pe.g3t1;l(K),et.logEvent("practice_choice",{choice:K}),K==="no"?!W&&!te?(Pn("You must complete all three practice tasks first!"),r("practice")):Bn():r("practice")},Bn=()=>{if(!Ht){const K=Math.floor(Math.random()*1e6);qt(K),Zn.initializeSeed(K),A&&!A.startsWith("offline-")&&Gn(ln(tt,"sessions",A),{randomSeed:K,[`semesterSeeds.semester${ee}`]:K})}localStorage.setItem("engagementInterest","0"),kn({materials:0,research:0,engagement:0,bonus:0}),_s({}),r("allocation"),m({}),x(0),_(0),T(0),Gt(!1),ta({}),xs({})},gu=(K,Q)=>{ws(K),zn(Q),Ss(0),r("challenge");const te=`${K[0]}t1`;h(te),S({[te]:Date.now()}),et.setPageStartTime(te),ra(),et.logEvent("allocation_complete",{counts:Q,queue:K,timestamp:Date.now()})},yu=K=>{if(Rn[sn]===K)return;const W=[...Rn],te=W.splice(sn,1)[0];W.push(te);const Ie=W.findIndex((He,Fe)=>Fe>=sn&&He.startsWith(K));if(Ie!==-1){const He=W.splice(Ie,1)[0];W.splice(sn,0,He),ws(W),_(st=>st+1);const Fe=He,Xe=Object.keys(p).filter(st=>st.startsWith(Fe)).length+1,Je=`${Fe}t${Xe}`;Is(Je)}},hr=async(K,Q)=>{ut.current=Date.now();let W=0;const te=K.startsWith("g1")?"research":K.startsWith("g2")?"materials":"engagement";if(te==="materials")if(Q.points!==void 0)W=Q.points;else{const se=parseFloat(Q.userAnswer||Q.userValue||0),ze=parseFloat(Q.correctAnswer||Q.targetValue||0),Nt=Math.abs(se-ze);Nt===0?W=2:Nt<=1?W=1:W=0}else if(te==="research")if(Q.points!==void 0)W=Q.points;else{const se=parseInt(Q.userAnswer||0),ze=parseInt(Q.correctAnswer||0),Nt=Math.abs(se-ze);Nt===0?W=2:Nt<=1?W=1:W=0}else if(te==="engagement")if(Q.points!==void 0)W=Q.points;else{const se=Q.userAnswer||"",ze=Q.correctAnswer||"";se===ze?W=2:AI(se,ze)===1?W=1:W=0}if(kn(se=>{const ze={...se,[te]:se[te]+W};return console.log(` Updated ${te}: +${W} (total: ${ze[te]})`),ze}),te==="materials"&&W>0){const se=Te.research;_s(ze=>{const Nt=ze[se]||0;return{...ze,[se]:Nt+W}})}const He=.0015*(te==="engagement"?Te.engagement+W:Te.engagement),Fe={...Te,[te]:Te[te]+W};let Dt=Hr;if(te==="materials"&&W>0){const se=Te.research,ze=Hr[se]||0;Dt={...Hr,[se]:ze+W}}let Xe=0;Object.entries(Dt).forEach(([se,ze])=>{const Cs=1+parseInt(se)*.15;Xe+=ze*Cs});const st=parseFloat(localStorage.getItem("engagementInterest")||"0")+He*Xe;localStorage.setItem("engagementInterest",st.toString()),xs(se=>({...se,[K]:W})),ta(se=>({...se,[K]:(se[K]||0)+1}));const Ii={...Te,[te]:Te[te]+W},Ai=gn(Ii,Dt);Zo(Ai);let Kt="";if(te==="materials"){const se=Math.abs((Q.userValue||0)-(Q.targetValue||0));se===0?Kt="Perfect materials!":se<=1?Kt=`Off by ${se.toFixed(2)}`:Kt=`Off by ${se.toFixed(2)}`}else if(te==="research"){const se=Math.abs((Q.userAnswer||0)-(Q.correctAnswer||0));se===0?Kt="Perfect research!":se<=1?Kt=`Off by ${se}`:Kt=`Off by ${se}`}else te==="engagement"&&(W===2?Kt="Perfect engagement!":W===1?Kt="One typo":Kt="Multiple errors");Pn(`${Kt} | +${W} ${te} pts`),m(se=>({...se,[K]:!0})),x(se=>se+1),T(se=>se+1),await et.trackTaskComplete(K,Q.attempts,Q.totalTime,Q.accuracy||Q.difference||0),await et.logEvent("task_complete",{taskId:K,...Q,pointsEarned:W,categoryPoints:Fe,studentLearningScore:Ai,engagementInterest:st,completionContext:{totalTasksCompleted:Object.keys(p).length+1,currentGameTime:z,switchesBeforeCompletion:E,bonusPromptsEarned:k+1,timeRemaining:Ye}}),A&&!A.startsWith("offline-")&&await Gn(ln(tt,"sessions",A),{[`completedTasks.${K}`]:!0,[`taskPoints.${K}`]:W,categoryPoints:Fe,studentLearningScore:Ai,engagementInterest:st,bonusPrompts:k+1,lastActivity:cn()});const As=sn+1;if(As<Rn.length){Ss(As);const se=Rn[As];let ze=Object.keys(p).filter(oa=>oa.startsWith(se)).length;se===K.substring(0,2)&&K.startsWith(se)&&(ze+=1);const Nt=ze+1,Cs=`${se}t${Nt}`;Is(Cs,!0)}else Ye>0?r("bonus_round"):Un("all_tasks_done")},Is=async(K,Q=!1)=>{if(!pe){if(p[K]&&!Q){Pn("Task already completed! Choose a different task.");return}if(Q||await et.logEvent("manual_tab_switch",{from:u,to:K,reason:"user_clicked"}),ut.current=Date.now(),X&&(re(!1),xe(5),Ts.current&&(clearInterval(Ts.current),Ts.current=null)),u!==K&&!Q&&_(W=>W+1),await et.trackPageSwitch(u,K,Q),v[u]){const W=Date.now()-v[u];await et.logEvent("task_time",{taskId:u,timeSpent:W,completed:p[u]||!1,leftForTask:K})}h(K),S(W=>({...W,[K]:Date.now()})),et.setPageStartTime(K)}},Pn=K=>{const Q=document.createElement("div");Q.className="notification-enter",Q.style.cssText="position: fixed; bottom: 20px; left: 20px; background: #2196F3; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10000; max-width: 400px;",Q.textContent=K,document.body.appendChild(Q),setTimeout(()=>{Q.className="notification-exit",setTimeout(()=>{document.body.contains(Q)&&document.body.removeChild(Q)},500)},3e3)},Un=async(K="semester_complete")=>{mn.current&&clearInterval(mn.current);const Q=Math.floor((Date.now()-Es.current-Le)/1e3),W=gn(),te=Te.bonus||0,Ie=Math.round(W)+te;await et.logEvent("game_complete",{totalTime:Q,totalSwitches:E,completedTasks:Object.keys(p).length,completedLevels:g,completionReason:K,gameMode:s,currentSemester:ee,categoryPoints:Te,studentLearningScore:W,totalBonus:te,finalScore:Ie,finalContext:{practiceCompleted:a==="yes",totalPrompts:3+k,isAdminMode:e}}),A&&!A.startsWith("offline-")&&await Gn(ln(tt,"sessions",A),{status:"completed",completedAt:cn(),finalTime:Q,timeElapsed:Q,totalSwitches:E,completionReason:K,currentSemester:ee,finalScore:Ie,studentLearningScore:W}),r("complete")},St=(K,Q)=>{if(Q&&Q.points&&Q.points===2)Ei(W=>({...W,[K]:!0})),Pn("Perfect! Practice task completed."),setTimeout(()=>{cr(null)},1500);else{const W=(Q==null?void 0:Q.points)||0;Pn(`Practice requires 100% accuracy. You scored ${W===1?"50%":"0%"}. Try again!`),setTimeout(()=>{cr(null)},2e3)}},ia=()=>{const K=u[1],Q=parseInt(u.substring(3)),W=n==="practice";return K==="1"?d.jsx(Td,{taskNum:Q,onComplete:W?St:hr,currentTaskId:u,isPractice:W}):K==="2"?d.jsx(Id,{taskNum:Q,onComplete:W?St:hr,currentTaskId:u,isPractice:W}):d.jsx(Ad,{taskNum:Q,onComplete:W?St:hr,currentTaskId:u,isPractice:W})};if(n==="studentLogin")return d.jsx(vI,{onLoginSuccess:K=>{window.location.href=`${window.location.origin}?code=${K}`}});if(M)return d.jsx("div",{className:"app",children:d.jsxs("div",{style:{maxWidth:"600px",margin:"50px auto",padding:"30px",background:"white",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[d.jsx("h2",{style:{color:"#f44336",marginBottom:"20px"},children:"Access Denied"}),d.jsx("p",{style:{fontSize:"18px",marginBottom:"20px"},children:I}),d.jsx("div",{style:{padding:"15px",background:"#ffebee",borderRadius:"8px",border:"1px solid #f44336"},children:d.jsx("p",{style:{color:"#c62828",margin:0},children:"If you believe this is an error, please contact your instructor."})})]})});if(n==="semesterBreak"){const K=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),Q=ee===2&&K.checkpointSemester2;return d.jsx("div",{className:"app",children:d.jsxs("div",{style:{maxWidth:"700px",margin:"50px auto",padding:"40px",background:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[d.jsxs("h1",{style:{color:"#2196F3",marginBottom:"30px"},children:[" Semester ",ee-1," Complete!"]}),d.jsxs("div",{style:{background:"#e3f2fd",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"2px solid #2196F3"},children:[d.jsx("h3",{style:{color:"#1976d2",marginBottom:"10px"},children:"Take a Break!"}),d.jsxs("p",{style:{fontSize:"16px",color:"#666",marginBottom:"0"},children:["Great job completing Semester ",ee-1,"! Take a moment to rest your eyes, stretch, or grab some water before continuing."]})]}),Q&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #fff3cd 0%, #ffebee 100%)",padding:"25px",borderRadius:"8px",marginBottom:"30px",border:"2px solid #ff9800"},children:[d.jsx("h3",{style:{color:"#f57c00",marginBottom:"15px"},children:" Midterm Checkpoint Coming!"}),d.jsxs("div",{style:{fontSize:"16px",color:"#666",textAlign:"left"},children:[d.jsx("p",{style:{marginBottom:"10px"},children:d.jsxs("strong",{children:["Semester 2 includes a midterm exam at the"," ",dr(),"-minute mark!"]})}),d.jsxs("ul",{style:{marginLeft:"20px",marginBottom:"10px"},children:[d.jsx("li",{children:"Your students will be tested at the midpoint"}),d.jsxs("li",{children:["If student learning  300 points:"," ",d.jsx("strong",{children:"+300 bonus points!"})]}),d.jsx("li",{children:"Build up your teaching effectiveness early to maximize the bonus"})]}),d.jsxs("p",{style:{background:"white",padding:"10px",borderRadius:"4px",textAlign:"center",fontWeight:"bold",color:"#f57c00"},children:["Goal: Reach 300+ Student Learning by minute"," ",dr()]})]})]}),Re.length>0&&d.jsxs("div",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"8px",marginBottom:"30px"},children:[d.jsx("h4",{style:{color:"#666",marginBottom:"10px"},children:"Your Performance So Far:"}),Re.map((W,te)=>d.jsxs("div",{style:{marginBottom:"8px",fontSize:"16px"},children:["Semester ",te+1,":"," ",d.jsxs("strong",{children:[W.finalScore," points"]})]},te))]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsxs("button",{onClick:()=>{r("challenge"),ra(),S({g2t1:Date.now()}),et.setPageStartTime("g2t1"),et.logEvent("semester_start",{semester:ee,timestamp:Date.now(),hasCheckpoint:Q})},style:{padding:"15px 40px",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"all 0.3s"},onMouseOver:W=>{W.currentTarget.style.transform="translateY(-2px)",W.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.15)"},onMouseOut:W=>{W.currentTarget.style.transform="translateY(0)",W.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:["I'm Ready - Start Semester ",ee]}),d.jsx("p",{style:{marginTop:"15px",fontSize:"14px",color:"#999"},children:"Click when you're ready to continue. The timer will start immediately."})]})]})})}if(n==="landing"){s||i({accuracy:"lenient",limit:"time"});const K=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),Q=K.role==="admin";return d.jsx("div",{className:"app",children:d.jsx("div",{className:"landing-container",children:d.jsxs("div",{className:"landing-card",style:{padding:"40px",maxWidth:"900px"},children:[d.jsxs("h1",{style:{color:"#333",marginBottom:"30px",fontSize:"32px",textAlign:"left"},children:["Can you beat Park? - Semester ",ee,"/",Oe]}),d.jsxs("div",{className:"game-info",style:{textAlign:"left"},children:[d.jsxs("div",{style:{marginBottom:"35px",textAlign:"left"},children:[d.jsxs("h3",{style:{color:"#f44336",fontSize:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""})," Engagement"]}),d.jsx("p",{style:{marginLeft:"34px",fontSize:"16px",lineHeight:"1.6",color:"#555"},children:"Build interest that compounds! Each point adds 0.15% interest after every task completion."})]}),d.jsxs("div",{style:{marginBottom:"35px",textAlign:"left"},children:[d.jsxs("h3",{style:{color:"#9C27B0",fontSize:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""})," Research"]}),d.jsx("p",{style:{marginLeft:"34px",fontSize:"16px",lineHeight:"1.6",color:"#555"},children:"Research amplifies your FUTURE materials! Each point adds +15% multiplier to materials earned after the research (order matters!)."})]}),d.jsxs("div",{style:{marginBottom:"35px",textAlign:"left"},children:[d.jsxs("h3",{style:{color:"#4CAF50",fontSize:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""})," Materials"]}),d.jsx("p",{style:{marginLeft:"34px",fontSize:"16px",lineHeight:"1.6",color:"#555"},children:"Create teaching materials - each point directly contributes to your goal points!"})]}),d.jsxs("div",{style:{background:"#f0f8ff",borderRadius:"8px",padding:"25px",marginBottom:"30px",border:"2px solid #2196F3"},children:[d.jsxs("h3",{style:{color:"#2196F3",fontSize:"20px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""})," Student Learning Formula"]}),d.jsxs("div",{style:{background:"white",padding:"18px",borderRadius:"6px",fontFamily:"monospace",fontSize:"18px",textAlign:"center",marginBottom:"20px",border:"1px solid #e0e0e0",lineHeight:"1.8"},children:["Goal ="," ",d.jsx("strong",{children:"Materials  (1 + Research0.15) + Engagement Interest"}),d.jsx("br",{}),d.jsxs("div",{style:{fontSize:"14px",marginTop:"10px",fontFamily:"sans-serif"},children:["Research multipliers apply only to materials earned"," ",d.jsx("em",{children:"after"})," the research"]})]}),d.jsxs("ul",{style:{color:"#333",lineHeight:"2",margin:"0",paddingLeft:"25px",fontSize:"15px",textAlign:"left"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Scoring:"})," Exact = 2 pts | Within 1 = 1 pt | Otherwise = 0 pts"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Timing:"})," Task completion order affects your final score"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Strategy:"})," Think carefully about when to complete each task type!"]}),ee===2&&d.jsxs("li",{children:["At minute ",dr(),": Exam checkpoint with bonus opportunity (300+ Student Learning = 300 bonus)"]})]})]}),K.hasAI&&d.jsxs("div",{style:{background:"#fff3cd",borderRadius:"6px",padding:"15px",marginBottom:"20px",border:"1px solid #ffc107"},children:[d.jsx("h3",{style:{color:"#856404",fontSize:"16px",marginBottom:"10px"},children:"AI Assistant Available:"}),d.jsxs("ul",{style:{color:"#856404",lineHeight:"1.6",margin:"0",paddingLeft:"20px",fontSize:"14px"},children:[d.jsx("li",{children:"Click the help buttons below each task for AI assistance"}),d.jsx("li",{children:"Unlimited use but reliability varies"}),d.jsx("li",{children:'Type "strategy" or "order" in chat for strategic advice!'})]})]}),ee===2&&d.jsxs("div",{style:{background:"#fff3cd",borderRadius:"6px",padding:"15px",marginBottom:"20px",border:"2px solid #ffc107"},children:[d.jsx("h3",{style:{color:"#856404",fontSize:"16px",marginBottom:"10px"},children:" Semester 2: Midterm Checkpoint!"}),d.jsxs("p",{style:{color:"#856404",fontSize:"14px",margin:0},children:["At the ",dr(),"-minute mark, if you have 300+ student learning points, you'll earn a 300-point bonus!"]})]})]}),!Q&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%)",borderRadius:"12px",padding:"20px",marginTop:"20px",marginBottom:"20px",border:"2px solid #d32f2f",boxShadow:"0 4px 6px rgba(211, 47, 47, 0.1)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"12px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""}),d.jsx("h3",{style:{color:"#b71c1c",margin:0,fontSize:"18px",fontWeight:"600"},children:"ONE ATTEMPT ONLY - NO RESTART"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{color:"#d32f2f",fontSize:"18px"},children:""}),d.jsxs("span",{style:{fontSize:"14px",color:"#c62828"},children:[d.jsx("strong",{children:"No refresh/close"})," - Session ends"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{color:"#d32f2f",fontSize:"18px"},children:""}),d.jsxs("span",{style:{fontSize:"14px",color:"#c62828"},children:[d.jsx("strong",{children:"No tab switching"})," - 30s warning"]})]})]}),d.jsx("div",{style:{background:"white",padding:"10px",borderRadius:"6px",textAlign:"center",fontSize:"14px",color:"#b71c1c",fontWeight:"600"},children:" Ensure 40 minutes uninterrupted before starting"})]}),d.jsxs("button",{className:"start-button",onClick:()=>r("practiceChoice"),children:["Start Semester ",ee]}),e&&d.jsxs("div",{style:{marginTop:"20px",padding:"10px",background:"#ffcccb",borderRadius:"6px",border:"2px solid #ff0000",fontWeight:"bold",color:"#d00"},children:["ADMIN MODE: ",Jo/60," minute timer, checkpoint at"," ",dr(),"minute"]}),Re.length>0&&d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"6px",fontSize:"14px"},children:[d.jsx("strong",{children:"Previous Semesters:"}),Re.map((W,te)=>d.jsxs("div",{style:{marginTop:"5px"},children:["Semester ",te+1,": ",W.finalScore," points"]},te))]})]})})})}if(n==="practiceChoice"){const Q=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="admin";return d.jsx("div",{className:"app",children:d.jsx("div",{className:"landing-container",children:d.jsxs("div",{className:"landing-card",children:[d.jsx("h2",{style:{color:"#333",marginBottom:"20px"},children:Q?"Practice Mode (Optional for Admin)":"Practice Mode (Required)"}),d.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:Q?"As an admin, you can skip practice or try it first.":"You must complete all three practice tasks before starting the main game."}),d.jsx("p",{style:{color:"#888",fontSize:"14px",marginBottom:"30px",fontStyle:"italic"},children:"Practice lets you try each teaching task without time pressure."}),!Q&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",borderRadius:"12px",padding:"20px",marginBottom:"20px",border:"2px solid #1976d2",boxShadow:"0 4px 6px rgba(25, 118, 210, 0.1)"},children:[d.jsxs("h4",{style:{color:"#0d47a1",margin:"0 0 16px 0",fontSize:"18px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{fontSize:"20px"},children:""}),"Required Practice Tasks (100% accuracy needed):"]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:Pe.g2t1?"#e8f5e9":"white",borderRadius:"8px",border:`1px solid ${Pe.g2t1?"#4CAF50":"#e0e0e0"}`},children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),d.jsx("span",{style:{flex:1,fontSize:"15px",color:"#424242"},children:d.jsx("strong",{children:"Materials"})}),Pe.g2t1?d.jsx("span",{style:{color:"#4CAF50",fontSize:"20px",fontWeight:"bold"},children:""}):d.jsx("span",{style:{background:"#fff3cd",color:"#f57c00",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"PENDING"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:Pe.g1t1?"#e8f5e9":"white",borderRadius:"8px",border:`1px solid ${Pe.g1t1?"#4CAF50":"#e0e0e0"}`},children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),d.jsx("span",{style:{flex:1,fontSize:"15px",color:"#424242"},children:d.jsx("strong",{children:"Research"})}),Pe.g1t1?d.jsx("span",{style:{color:"#4CAF50",fontSize:"20px",fontWeight:"bold"},children:""}):d.jsx("span",{style:{background:"#fff3cd",color:"#f57c00",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"PENDING"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:Pe.g3t1?"#e8f5e9":"white",borderRadius:"8px",border:`1px solid ${Pe.g3t1?"#4CAF50":"#e0e0e0"}`},children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),d.jsx("span",{style:{flex:1,fontSize:"15px",color:"#424242"},children:d.jsx("strong",{children:"Engagement"})}),Pe.g3t1?d.jsx("span",{style:{color:"#4CAF50",fontSize:"20px",fontWeight:"bold"},children:""}):d.jsx("span",{style:{background:"#fff3cd",color:"#f57c00",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"PENDING"})]})]}),d.jsx("div",{style:{marginTop:"16px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.8)",borderRadius:"6px",fontSize:"13px",color:"#0d47a1",textAlign:"center",fontStyle:"italic"},children:" Each task must be completed perfectly to proceed"})]}),d.jsxs("div",{style:{display:"flex",gap:"20px",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>sa("yes"),style:{padding:"15px 30px",background:"#4CAF50",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:Q?"Try Practice Mode":"Start Required Practice"}),Q&&d.jsx("button",{onClick:()=>sa("no"),style:{padding:"15px 30px",background:"#2196F3",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"Skip Practice (Admin)"})]})]})})})}if(n==="practice"){const Q=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="admin";if(!Cn)return d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:"Teaching Simulation - Practice Mode"}),d.jsx(mI,{practiceCompleted:Pe,onPracticeComplete:St,onSelectPractice:cr,onStartMainGame:()=>{const Ie=Pe.g2t1&&Pe.g1t1&&Pe.g3t1;!Q&&!Ie?Pn("You must complete all three practice tasks first!"):Bn()},isAdmin:Q})]});const W=Cn[1],te=1;return d.jsx("div",{className:"app",children:d.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[d.jsx("button",{onClick:()=>cr(null),style:{marginBottom:"20px",padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Practice Menu"}),d.jsxs("div",{style:{textAlign:"center",padding:"10px",background:"#fff3cd",borderRadius:"6px",margin:"10px 0",fontSize:"14px",color:"#856404"},children:[d.jsx("strong",{children:"Practice Mode:"})," 100% accuracy required. Will auto-return after completion."]}),W==="1"&&d.jsx(Td,{taskNum:te,onComplete:St,currentTaskId:Cn,isPractice:!0}),W==="2"&&d.jsx(Id,{taskNum:te,onComplete:St,currentTaskId:Cn,isPractice:!0}),W==="3"&&d.jsx(Ad,{taskNum:te,onComplete:St,currentTaskId:Cn,isPractice:!0})]})})}if(n==="complete"){const K=Math.floor(z/60),Q=z%60,W=Math.round(gn()),te=Te.bonus||0,Ie=W+te,He={semester:ee,totalTime:z,completedLevels:g,categoryPoints:Te,switches:E,gameMode:s,randomSeed:Ht,studentLearningScore:W,finalScore:Ie},Fe=async()=>{const Xe=[...Re,He];wt(Xe),localStorage.setItem("engagementInterest","0"),kn({materials:0,research:0,engagement:0,bonus:0}),_s({}),A&&!A.startsWith("offline-")&&await Gn(ln(tt,"sessions",A),{[`semesterHistory.semester${ee}`]:He,currentSemester:ee+1,lastActivity:cn()}),ke(ee+1),yI.resetForNewSemester(),r("semesterBreak"),m({}),x(0),_(0),T(0),w(0),we(0),h("g2t1"),Gt(!1);const Je=Math.floor(Math.random()*1e6);qt(Je),Zn.initializeSeed(Je)},Dt=ee>=Oe;return d.jsxs("div",{className:"app",children:[d.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[d.jsx("div",{style:{textAlign:"center",marginBottom:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"8px",border:"2px solid #2196F3"},children:d.jsxs("h2",{style:{color:"#2196F3",margin:0},children:["Semester ",ee," of ",Oe," Complete!"]})}),Dt&&d.jsx(xI,{sessionId:A,completedLevels:g,totalTime:z,gameMode:s}),d.jsxs("div",{style:{textAlign:"center",padding:"40px",background:"white",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginTop:"20px"},children:[d.jsxs("h2",{style:{color:"#333",marginBottom:"20px"},children:[" Semester ",ee," Performance"]}),d.jsxs("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#2196F3",marginBottom:"30px"},children:["Final Score: ",Ie," points"]}),d.jsxs("div",{style:{background:"#e3f2fd",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"2px solid #2196F3"},children:[d.jsxs("h3",{style:{margin:"0 0 15px 0",color:"#1976d2"},children:["Student Learning Score: ",W]}),d.jsxs("div",{style:{fontSize:"16px",color:"#666"},children:["= ",Te.materials||0," (Materials) "," ",(1+(Te.research||0)*.15).toFixed(2)," ","(Research)",parseFloat(localStorage.getItem("engagementInterest")||"0")>0&&` + ${parseFloat(localStorage.getItem("engagementInterest")||"0").toFixed(2)} (Interest)`]}),te>0&&d.jsxs("div",{style:{marginTop:"10px",fontSize:"16px",color:"#1976d2"},children:["+ ",te," Checkpoint Bonus"]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"30px"},children:[d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Total Time"}),d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:[K,"m ",Q,"s"]})]}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Student Learning"}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:W})]})]}),(ee===2||te>0)&&d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Checkpoint Bonus"}),d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:["+",te]})]}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Tasks Completed"}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:g})]})]}),d.jsx("h3",{style:{color:"#666",marginBottom:"15px"},children:"Teaching Performance by Category"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px",marginBottom:"30px"},children:[d.jsxs("div",{style:{background:"#f0f8f0",padding:"15px",borderRadius:"6px",border:"2px solid #4CAF5020"},children:[d.jsx("div",{style:{color:"#4CAF50",fontWeight:"bold",marginBottom:"5px"},children:" Materials"}),d.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:Te.materials||0}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Base points"})]}),d.jsxs("div",{style:{background:"#f8f0ff",padding:"15px",borderRadius:"6px",border:"2px solid #9C27B020"},children:[d.jsx("div",{style:{color:"#9C27B0",fontWeight:"bold",marginBottom:"5px"},children:" Research"}),d.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:Te.research||0}),d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["+",(Te.research||0)*15,"% to future materials"]})]}),d.jsxs("div",{style:{background:"#fff0f0",padding:"15px",borderRadius:"6px",border:"2px solid #f4433620"},children:[d.jsx("div",{style:{color:"#f44336",fontWeight:"bold",marginBottom:"5px"},children:" Engagement"}),d.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:Te.engagement||0}),d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["+",((Te.engagement||0)*.15).toFixed(1),"% interest/task"]})]})]})]}),ee===2&&Te.bonus>0&&d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffc107"},children:[d.jsxs("strong",{style:{color:"#856404"},children:[" Exam Season Bonus:"," "]}),d.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#856404"},children:["+",Te.bonus," points"]})]}),Re.length>0&&d.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[d.jsx("h4",{style:{color:"#666",marginBottom:"15px"},children:"Progress Over Semesters"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"10px"},children:[...Re,He].map((Xe,Je)=>d.jsxs("div",{style:{padding:"10px",background:Je===Re.length?"#e3f2fd":"white",borderRadius:"6px",border:"1px solid #e0e0e0",textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Semester ",Je+1]}),d.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#333"},children:Xe.finalScore})]},Je))})]}),d.jsx("div",{style:{marginTop:"30px",textAlign:"center"},children:Dt?d.jsxs("div",{style:{padding:"20px",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",textAlign:"center"},children:[d.jsx("h3",{style:{color:"#856404",marginBottom:"10px"},children:" All semesters complete!"}),d.jsx("p",{style:{color:"#856404",marginBottom:"0"},children:"Return to the Qualtrics survey and enter your completion code to finish the study."})]}):d.jsxs("button",{onClick:Fe,style:{padding:"15px 40px",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:["Start Semester ",ee+1," "]})})]})}return n==="allocation"?d.jsx(EI,{onStart:gu}):n==="bonus_round"?d.jsx(II,{timeRemaining:Ye,onSelectTask:K=>{const Q=[...Rn,K];ws(Q);const W=Object.keys(p).filter(Ie=>Ie.startsWith(K)).length,te=`${K}t${W+1}`;r("challenge"),Is(te,!0)},onFinishEarly:()=>Un("finished_early")}):d.jsxs("div",{className:"app",children:[d.jsx(TI,{currentTaskIndex:sn,totalTasks:Rn.length,taskQueue:Rn,onSwitchTask:yu,points:Math.round(vs),timeRemaining:Ye,onTimeUp:()=>Un("time_up"),children:ia()}),d.jsx("div",{style:{display:"none"}})]})}t0(document.getElementById("root")).render(d.jsx(V.StrictMode,{children:d.jsx(CI,{})}));
//# sourceMappingURL=index-BJLnkio5.js.map
